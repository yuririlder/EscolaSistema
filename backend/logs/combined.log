2026-01-17 00:54:28 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:54:28 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 00:54:28 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 00:54:28 [INFO]: Sincronizando schema do banco de dados...
2026-01-17 00:54:28 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:54:28 [INFO]: Banco de dados já existe
2026-01-17 00:54:28 [INFO]: Schema do banco sincronizado com sucesso
2026-01-17 00:54:28 [INFO]: Migrations executadas com sucesso
2026-01-17 00:54:28 [INFO]: Servidor rodando na porta 3001
2026-01-17 00:54:28 [INFO]: Ambiente: development
2026-01-17 00:54:45 [INFO]: Encerrando servidor...
2026-01-17 00:54:53 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:54:53 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 00:54:53 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 00:54:53 [INFO]: Sincronizando schema do banco de dados...
2026-01-17 00:54:53 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:54:53 [INFO]: Banco de dados já existe
2026-01-17 00:54:53 [INFO]: Schema do banco sincronizado com sucesso
2026-01-17 00:54:53 [INFO]: Migrations executadas com sucesso
2026-01-17 00:54:53 [INFO]: Servidor rodando na porta 3001
2026-01-17 00:54:53 [INFO]: Ambiente: development
2026-01-17 00:55:04 [INFO]: Encerrando servidor...
2026-01-17 00:55:15 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:55:15 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 00:55:15 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 00:55:15 [INFO]: Sincronizando schema do banco de dados...
2026-01-17 00:55:15 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:55:15 [INFO]: Banco de dados já existe
2026-01-17 00:55:15 [INFO]: Schema do banco sincronizado com sucesso
2026-01-17 00:55:15 [INFO]: Migrations executadas com sucesso
2026-01-17 00:55:16 [INFO]: Servidor rodando na porta 3001
2026-01-17 00:55:16 [INFO]: Ambiente: development
2026-01-17 00:55:18 [HTTP]: POST /api/auth/login
2026-01-17 00:55:18 [ERROR]: Erro no login connection_1.db.query is not a function
TypeError: connection_1.db.query is not a function
    at AuthService.login (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\authService.ts:11:29)
    at login (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\authController.ts:15:40)
    at Layer.handle [as handle_request] (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\express\lib\router\route.js:149:13)
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\middlewares\validateMiddleware.ts:11:14
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 00:55:33 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:55:33 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 00:55:33 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 00:55:33 [INFO]: Sincronizando schema do banco de dados...
2026-01-17 00:55:33 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:55:33 [INFO]: Banco de dados já existe
2026-01-17 00:55:33 [INFO]: Schema do banco sincronizado com sucesso
2026-01-17 00:55:33 [INFO]: Migrations executadas com sucesso
2026-01-17 00:55:33 [INFO]: Servidor rodando na porta 3001
2026-01-17 00:55:33 [INFO]: Ambiente: development
2026-01-17 00:56:05 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:56:05 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 00:56:05 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 00:56:05 [INFO]: Sincronizando schema do banco de dados...
2026-01-17 00:56:05 [DEBUG]: Query: SELECT 1 - Duração: 0ms
2026-01-17 00:56:05 [INFO]: Banco de dados já existe
2026-01-17 00:56:05 [INFO]: Schema do banco sincronizado com sucesso
2026-01-17 00:56:05 [INFO]: Migrations executadas com sucesso
2026-01-17 00:56:05 [INFO]: Servidor rodando na porta 3001
2026-01-17 00:56:05 [INFO]: Ambiente: development
2026-01-17 01:05:11 [ERROR]: Erro ao conectar com banco de dados PostgreSQL: {"code":"ECONNREFUSED"}
AggregateError: 
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at testConnection (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\connection.ts:31:20)
    at startServer (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\server.ts:53:5)
2026-01-17 01:07:06 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:07:06 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:07:06 [DEBUG]: SELECT 1
2026-01-17 01:07:06 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:07:06 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:07:06 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:07:06 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:06 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:07:06 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:07:06 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:07:06 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:07:06 [INFO]: Migrations executadas com sucesso
2026-01-17 01:07:06 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:07:06 [INFO]: Ambiente: development
2026-01-17 01:07:36 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:07:36 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:07:37 [DEBUG]: SELECT 1
2026-01-17 01:07:37 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:07:37 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:07:37 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:07:37 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:37 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:07:37 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:07:37 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:07:37 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:07:37 [INFO]: Migrations executadas com sucesso
2026-01-17 01:07:37 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:07:37 [INFO]: Ambiente: development
2026-01-17 01:07:56 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:07:56 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:07:56 [DEBUG]: SELECT 1
2026-01-17 01:07:56 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:07:56 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:07:56 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:07:56 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:07:56 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:07:56 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:07:56 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:07:56 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:07:56 [INFO]: Migrations executadas com sucesso
2026-01-17 01:07:56 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:07:56 [INFO]: Ambiente: development
2026-01-17 01:08:09 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:08:09 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:08:09 [DEBUG]: SELECT 1
2026-01-17 01:08:09 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:08:09 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:08:09 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:08:09 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:09 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:08:09 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:08:09 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:08:09 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:08:09 [INFO]: Migrations executadas com sucesso
2026-01-17 01:08:09 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:08:09 [INFO]: Ambiente: development
2026-01-17 01:08:44 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:08:44 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:08:44 [DEBUG]: SELECT 1
2026-01-17 01:08:44 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:08:44 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:08:44 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:08:44 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:08:44 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:08:44 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:08:44 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:08:44 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:08:44 [INFO]: Migrations executadas com sucesso
2026-01-17 01:08:44 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:08:44 [INFO]: Ambiente: development
2026-01-17 01:09:05 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:09:05 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:09:05 [DEBUG]: SELECT 1
2026-01-17 01:09:05 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:09:05 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:09:05 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:09:05 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:05 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:09:05 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:09:05 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:09:05 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:09:05 [INFO]: Migrations executadas com sucesso
2026-01-17 01:09:05 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:09:05 [INFO]: Ambiente: development
2026-01-17 01:09:25 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:09:25 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:09:25 [DEBUG]: SELECT 1
2026-01-17 01:09:25 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:09:25 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:09:25 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:09:25 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:25 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:09:25 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:09:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:09:25 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:09:25 [INFO]: Migrations executadas com sucesso
2026-01-17 01:09:25 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:09:25 [INFO]: Ambiente: development
2026-01-17 01:09:54 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:09:54 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:09:55 [DEBUG]: SELECT 1
2026-01-17 01:09:55 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:09:55 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:09:55 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:09:55 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:09:55 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:09:55 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:09:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:09:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:09:55 [INFO]: Migrations executadas com sucesso
2026-01-17 01:09:55 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:09:55 [INFO]: Ambiente: development
2026-01-17 01:10:25 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:10:25 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:10:25 [DEBUG]: SELECT 1
2026-01-17 01:10:25 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:10:25 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:10:25 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:10:25 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:10:25 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:10:25 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:10:25 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:10:25 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:10:25 [INFO]: Migrations executadas com sucesso
2026-01-17 01:10:25 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:10:25 [INFO]: Ambiente: development
2026-01-17 01:12:00 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:12:00 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:12:00 [DEBUG]: SELECT 1
2026-01-17 01:12:00 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:12:00 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:12:00 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:12:00 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:12:00 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:12:00 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:12:00 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:12:00 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:12:00 [INFO]: Migrations executadas com sucesso
2026-01-17 01:12:00 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:12:00 [INFO]: Ambiente: development
2026-01-17 01:13:02 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:13:02 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:13:16 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:13:16 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:13:17 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:13:17 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:13:17 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:13:17 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:13:17 [DEBUG]: SELECT 1
2026-01-17 01:13:17 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:13:17 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:13:17 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:13:17 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:17 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:13:17 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:13:17 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:13:17 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:13:17 [INFO]: Migrations executadas com sucesso
2026-01-17 01:13:17 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:13:17 [INFO]: Ambiente: development
2026-01-17 01:13:23 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:13:23 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:13:23 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:13:23 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:13:23 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:13:23 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:13:23 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:13:23 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:13:31 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:14:06 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:14:06 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:14:08 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:08 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:08 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:08 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:08 [DEBUG]: SELECT 1
2026-01-17 01:14:08 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:14:08 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:14:08 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:08 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:08 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:08 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:08 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:08 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:08 [INFO]: Migrations executadas com sucesso
2026-01-17 01:14:08 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:14:08 [INFO]: Ambiente: development
2026-01-17 01:14:38 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:14:38 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:14:40 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:40 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:40 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:40 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:40 [DEBUG]: SELECT 1
2026-01-17 01:14:40 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:14:40 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:14:40 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:40 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:40 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:40 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:40 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:40 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:40 [INFO]: Migrations executadas com sucesso
2026-01-17 01:14:40 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:14:40 [INFO]: Ambiente: development
2026-01-17 01:14:49 [INFO]: Encerrando servidor...
2026-01-17 01:14:58 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:14:58 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:14:59 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:59 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:59 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:59 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:59 [DEBUG]: SELECT 1
2026-01-17 01:14:59 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:14:59 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:14:59 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:14:59 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:14:59 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:14:59 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:14:59 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:14:59 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:14:59 [INFO]: Migrations executadas com sucesso
2026-01-17 01:14:59 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:14:59 [INFO]: Ambiente: development
2026-01-17 01:15:10 [INFO]: Encerrando servidor...
2026-01-17 01:15:27 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:15:27 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:15:28 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:15:28 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:15:28 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:15:28 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:15:28 [DEBUG]: SELECT 1
2026-01-17 01:15:28 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:15:28 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:15:28 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:15:28 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:15:28 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:15:28 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:15:28 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:15:28 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:15:28 [INFO]: Migrations executadas com sucesso
2026-01-17 01:15:28 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:15:28 [INFO]: Ambiente: development
2026-01-17 01:15:37 [HTTP]: POST /api/auth/login
2026-01-17 01:15:37 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:15:37 [DEBUG]: Query executada em 1ms
2026-01-17 01:15:37 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:15:54 [HTTP]: POST /api/auth/login
2026-01-17 01:15:54 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:15:54 [DEBUG]: Query executada em 0ms
2026-01-17 01:15:54 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:15:54 [HTTP]: GET /api/usuarios
2026-01-17 01:15:54 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:15:54 [DEBUG]: Query executada em 1ms
2026-01-17 01:16:00 [HTTP]: POST /api/auth/login
2026-01-17 01:16:00 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:16:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:16:00 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:16:00 [HTTP]: POST /api/usuarios
2026-01-17 01:16:00 [DEBUG]: SELECT id FROM usuarios WHERE email = 'secretaria@escola.com'
2026-01-17 01:16:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:16:00 [DEBUG]: INSERT INTO usuarios (id, nome, email, senha, perfil, ativo)
       VALUES ('78f55a1f-82cb-420b-974d-f5a1b547'/*+4 bytes*/, 'Secretaria Teste', 'secretaria@escola.com', '$2a$10$UQly/S8jtComcuycnPzQYO0AT'/*+28 bytes*/, 'SECRETARIO', 1)
2026-01-17 01:16:00 [INFO]: Usuário criado: secretaria@escola.com
2026-01-17 01:16:00 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = '78f55a1f-82cb-420b-974d-f5a1b547'/*+4 bytes*/
2026-01-17 01:16:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:16:05 [HTTP]: POST /api/auth/login
2026-01-17 01:16:05 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:16:05 [DEBUG]: Query executada em 0ms
2026-01-17 01:16:05 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:16:05 [HTTP]: GET /api/escola
2026-01-17 01:16:05 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:16:05 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/auth/login
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:17:00 [HTTP]: GET /api/usuarios
2026-01-17 01:17:00 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/usuarios
2026-01-17 01:17:00 [DEBUG]: SELECT id FROM usuarios WHERE email = 'coord204202089@escola.com'
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [DEBUG]: INSERT INTO usuarios (id, nome, email, senha, perfil, ativo)
       VALUES ('b66441be-af9f-439a-b0df-c7ada189'/*+4 bytes*/, 'Coordenador Teste', 'coord204202089@escola.com', '$2a$10$vkHYvxm.QtaS2wO8IFuOdue8e'/*+28 bytes*/, 'COORDENADOR', 1)
2026-01-17 01:17:00 [INFO]: Usuário criado: coord204202089@escola.com
2026-01-17 01:17:00 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b66441be-af9f-439a-b0df-c7ada189'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: GET /api/escola
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: PUT /api/escola
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: UPDATE escolas SET diretor = 'Dr. Joao Silva', updated_at = datetime('now') WHERE id = '57cf77cb-407c-4377-b786-00e3f6d5'/*+4 bytes*/
2026-01-17 01:17:00 [INFO]: Escola atualizada
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/professores
2026-01-17 01:17:00 [DEBUG]: BEGIN
2026-01-17 01:17:00 [DEBUG]: INSERT INTO funcionarios (id, nome, cpf, rg, data_nascimento, telefone, email, endereco, cidade, estado, cep, cargo, salario, data_contratacao, observacoes)
         VALUES ('b0274855-631f-4d07-9a93-f8c5e433'/*+4 bytes*/, 'Prof. Carlos Santos', '57961740023', NULL, '1985-03-15', '(11) 99999-0001', 'carlos471201609@escola.com', NULL, NULL, NULL, NULL, 'Professor', 3500.0, '2024-01-01', NULL)
2026-01-17 01:17:00 [DEBUG]: INSERT INTO professores (id, funcionario_id, formacao, especialidade)
         VALUES ('439858f5-f536-4bda-8ccc-5df5c0c6'/*+4 bytes*/, 'b0274855-631f-4d07-9a93-f8c5e433'/*+4 bytes*/, 'Licenciatura em Matematica', 'Matematica')
2026-01-17 01:17:00 [INFO]: Professor criado: Prof. Carlos Santos
2026-01-17 01:17:00 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       WHERE p.id = '439858f5-f536-4bda-8ccc-5df5c0c6'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [DEBUG]: SELECT tp.*, t.nome as turma_nome, t.ano, t.turno, t.serie
         FROM turma_professores tp
         INNER JOIN turmas t ON tp.turma_id = t.id
         WHERE tp.professor_id = '439858f5-f536-4bda-8ccc-5df5c0c6'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: COMMIT
2026-01-17 01:17:00 [HTTP]: GET /api/professores
2026-01-17 01:17:00 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       ORDER BY f.nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/turmas
2026-01-17 01:17:00 [DEBUG]: INSERT INTO turmas (id, nome, ano, turno, serie, sala_numero, capacidade, ativa)
       VALUES ('b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/, 'Turma A - 520619814', 2025.0, 'MATUTINO', '1º Ano', '101', 30.0, 1.0)
2026-01-17 01:17:00 [INFO]: Turma criada: Turma A - 520619814
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM turmas WHERE id = 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: GET /api/turmas
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [HTTP]: POST /api/responsaveis
2026-01-17 01:17:00 [DEBUG]: SELECT id FROM responsaveis WHERE cpf = '83135897151'
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: INSERT INTO responsaveis (id, nome, cpf, rg, data_nascimento, telefone, celular, email, endereco, cidade, estado, cep, profissao, local_trabalho, observacoes)
       VALUES ('97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/, 'Maria Silva Santos', '83135897151', NULL, NULL, '(11) 99999-0002', '(11) 98888-0002', 'maria1451211164@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', 'Engenheira', NULL, NULL)
2026-01-17 01:17:00 [INFO]: Responsável criado: Maria Silva Santos
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM responsaveis WHERE id = '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: GET /api/responsaveis
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [HTTP]: POST /api/alunos
2026-01-17 01:17:00 [DEBUG]: SELECT id FROM alunos WHERE cpf = '10896925385'
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: SELECT id FROM responsaveis WHERE id = '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: INSERT INTO alunos (id, nome, cpf, rg, data_nascimento, sexo, telefone, email, endereco, cidade, estado, cep, responsavel_id, observacoes)
       VALUES ('4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, 'Joao Silva Santos', '10896925385', NULL, '2015-06-20', 'M', NULL, 'joao131198302@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/, NULL)
2026-01-17 01:17:00 [INFO]: Aluno criado: Joao Silva Santos
2026-01-17 01:17:00 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, r.telefone as responsavel_telefone, r.email as responsavel_email, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       WHERE a.id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: GET /api/alunos
2026-01-17 01:17:00 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/notas
2026-01-17 01:17:00 [DEBUG]: SELECT id, turma_id FROM alunos WHERE id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: SELECT id FROM notas WHERE aluno_id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/ AND turma_id = 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/ AND disciplina = 'Matematica' AND bimestre = 1.0 AND tipo = 'Prova'
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: INSERT INTO notas (id, aluno_id, turma_id, disciplina, bimestre, nota, tipo, observacao)
       VALUES ('46488d93-ce55-4bf7-8b55-f04f2455'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/, 'Matematica', 1.0, 8.5, 'Prova', NULL)
2026-01-17 01:17:00 [INFO]: Nota lançada para aluno 4812d342-9086-481b-8f97-86e38c9cb57b
2026-01-17 01:17:00 [DEBUG]: SELECT n.*, a.nome as aluno_nome, t.nome as turma_nome
       FROM notas n
       INNER JOIN alunos a ON n.aluno_id = a.id
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.id = '46488d93-ce55-4bf7-8b55-f04f2455'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: GET /api/notas/aluno/4812d342-9086-481b-8f97-86e38c9cb57b
2026-01-17 01:17:00 [DEBUG]: SELECT n.*, t.nome as turma_nome
       FROM notas n
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.aluno_id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/
       ORDER BY n.disciplina ASC, n.bimestre ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:17:00 [DEBUG]: Query executada em 1ms
2026-01-17 01:17:00 [HTTP]: POST /api/financeiro/planos
2026-01-17 01:17:00 [DEBUG]: INSERT INTO planos_mensalidade (id, nome, descricao, valor, ativo)
       VALUES ('e557cd68-6979-432c-bdd1-cdcb5e3c'/*+4 bytes*/, 'Plano Teste 49584902', 'Plano de teste', 950.0, 1.0)
2026-01-17 01:17:00 [INFO]: Plano criado: Plano Teste 49584902
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'e557cd68-6979-432c-bdd1-cdcb5e3c'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 01:17:00 [DEBUG]: SELECT id, nome FROM alunos WHERE id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: BEGIN
2026-01-17 01:17:00 [DEBUG]: INSERT INTO matriculas (id, aluno_id, plano_id, ano_letivo, valor_matricula, valor_mensalidade, dia_vencimento, data_matricula, status, desconto, observacoes)
         VALUES ('5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/, 2025.0, 300.0, 1500.0, 10.0, '2026-01-17', 'ATIVA', 0.0, NULL)
2026-01-17 01:17:00 [DEBUG]: UPDATE alunos SET matricula_ativa = 1, data_matricula = '2026-01-17', updated_at = datetime('now') WHERE id = '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('a18b2d8e-c53d-459d-ba5e-b62c7dbc'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 1.0, 2025.0, 1500.0, 0.0, '2025-01-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('f6c14a66-2de1-421d-8420-175a2c68'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 2.0, 2025.0, 1500.0, 0.0, '2025-02-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('52eaab4c-75c0-47e5-8384-003929a0'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 3.0, 2025.0, 1500.0, 0.0, '2025-03-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('3bb4726c-917a-47ac-9a84-1cdf54e9'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 4.0, 2025.0, 1500.0, 0.0, '2025-04-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('44bc66b4-80ab-4c9f-b27d-1e0aa33a'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 5.0, 2025.0, 1500.0, 0.0, '2025-05-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('9af04b0e-ee68-46ad-a378-f61d8703'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 6.0, 2025.0, 1500.0, 0.0, '2025-06-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('ea0bca42-d2e5-4613-ac41-7944511a'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 7.0, 2025.0, 1500.0, 0.0, '2025-07-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('43c06e4b-6975-49f8-9a20-0423f19d'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 8.0, 2025.0, 1500.0, 0.0, '2025-08-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('1687e745-94b9-44d9-84e5-1963ad3f'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 9.0, 2025.0, 1500.0, 0.0, '2025-09-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('ecb987b6-b585-4d91-9ff4-c4faad5e'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 10.0, 2025.0, 1500.0, 0.0, '2025-10-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('72423434-6409-45b9-952e-45303544'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 11.0, 2025.0, 1500.0, 0.0, '2025-11-10', 'PENDENTE')
2026-01-17 01:17:00 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('9bbd56ed-9172-431e-9a52-123f4c37'/*+4 bytes*/, '4812d342-9086-481b-8f97-86e38c9c'/*+4 bytes*/, '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/, 12.0, 2025.0, 1500.0, 0.0, '2025-12-10', 'PENDENTE')
2026-01-17 01:17:00 [INFO]: Matrícula realizada para aluno Joao Silva Santos
2026-01-17 01:17:00 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       WHERE m.id = '5e60d5bb-2f14-43d7-8c77-30bf5c75'/*+4 bytes*/
2026-01-17 01:17:00 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:00 [DEBUG]: COMMIT
2026-01-17 01:17:01 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 01:17:01 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       ORDER BY m.data_matricula DESC
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [HTTP]: POST /api/financeiro/despesas
2026-01-17 01:17:01 [DEBUG]: INSERT INTO despesas (id, descricao, categoria, valor, data_vencimento, fornecedor, observacoes, status)
       VALUES ('da8ea37c-b4a3-4455-8058-8a871bce'/*+4 bytes*/, 'Material de escritorio', 'MATERIAL', 350.5, '2025-02-15', 'Papelaria ABC', NULL, 'PENDENTE')
2026-01-17 01:17:01 [INFO]: Despesa criada: Material de escritorio
2026-01-17 01:17:01 [DEBUG]: SELECT * FROM despesas WHERE id = 'da8ea37c-b4a3-4455-8058-8a871bce'/*+4 bytes*/
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [HTTP]: GET /api/financeiro/despesas
2026-01-17 01:17:01 [DEBUG]: SELECT * FROM despesas WHERE 1=1 ORDER BY data_vencimento DESC
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM alunos
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM alunos WHERE matricula_ativa = 1
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM professores p INNER JOIN funcionarios f ON p.funcionario_id = f.id WHERE f.ativo = 1
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM turmas WHERE ativa = 1
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status = 'PENDENTE'
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:17:01 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status IN ('PENDENTE', 'ATRASADO') AND data_vencimento < date('now')
2026-01-17 01:17:01 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: POST /api/auth/login
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:18:11 [HTTP]: GET /api/auth/me
2026-01-17 01:18:11 [HTTP]: POST /api/auth/login
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM usuarios WHERE email = 'invalido@escola.com' AND ativo = 1
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [ERROR]: Erro no login Credenciais inválidas
Error: Credenciais inválidas
    at AuthService.login (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\authService.ts:17:13)
    at login (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\authController.ts:15:40)
    at Layer.handle [as handle_request] (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\express\lib\router\route.js:149:13)
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\middlewares\validateMiddleware.ts:11:14
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 01:18:11 [HTTP]: GET /api/usuarios
2026-01-17 01:18:11 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/usuarios/b3844c3c-6fa1-4b68-a6ee-b9b65021c3b0
2026-01-17 01:18:11 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: PUT /api/usuarios/b3844c3c-6fa1-4b68-a6ee-b9b65021c3b0
2026-01-17 01:18:11 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: UPDATE usuarios SET nome = 'Administrador Sistema', updated_at = datetime('now') WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:18:11 [INFO]: Usuário atualizado: b3844c3c-6fa1-4b68-a6ee-b9b65021c3b0
2026-01-17 01:18:11 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: POST /api/professores
2026-01-17 01:18:11 [DEBUG]: BEGIN
2026-01-17 01:18:11 [DEBUG]: INSERT INTO funcionarios (id, nome, cpf, rg, data_nascimento, telefone, email, endereco, cidade, estado, cep, cargo, salario, data_contratacao, observacoes)
         VALUES ('9eefc556-1441-409d-9c88-28a5a4c7'/*+4 bytes*/, 'Profa. Ana Lucia', '59726898337', NULL, '1990-08-22', '(11) 99999-0003', 'ana1881952838@escola.com', NULL, NULL, NULL, NULL, 'Professora', 3800.0, '2024-02-01', NULL)
2026-01-17 01:18:11 [DEBUG]: INSERT INTO professores (id, funcionario_id, formacao, especialidade)
         VALUES ('2ab1d9ce-31a5-40c2-93ec-652e9455'/*+4 bytes*/, '9eefc556-1441-409d-9c88-28a5a4c7'/*+4 bytes*/, 'Licenciatura em Portugues', 'Portugues')
2026-01-17 01:18:11 [INFO]: Professor criado: Profa. Ana Lucia
2026-01-17 01:18:11 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       WHERE p.id = '2ab1d9ce-31a5-40c2-93ec-652e9455'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: SELECT tp.*, t.nome as turma_nome, t.ano, t.turno, t.serie
         FROM turma_professores tp
         INNER JOIN turmas t ON tp.turma_id = t.id
         WHERE tp.professor_id = '2ab1d9ce-31a5-40c2-93ec-652e9455'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: COMMIT
2026-01-17 01:18:11 [HTTP]: GET /api/professores
2026-01-17 01:18:11 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       ORDER BY f.nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/professores/439858f5-f536-4bda-8ccc-5df5c0c62619
2026-01-17 01:18:11 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       WHERE p.id = '439858f5-f536-4bda-8ccc-5df5c0c6'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [DEBUG]: SELECT tp.*, t.nome as turma_nome, t.ano, t.turno, t.serie
         FROM turma_professores tp
         INNER JOIN turmas t ON tp.turma_id = t.id
         WHERE tp.professor_id = '439858f5-f536-4bda-8ccc-5df5c0c6'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: POST /api/turmas
2026-01-17 01:18:11 [DEBUG]: INSERT INTO turmas (id, nome, ano, turno, serie, sala_numero, capacidade, ativa)
       VALUES ('60d35965-9179-4708-a0e4-cb7ade85'/*+4 bytes*/, 'Turma B - 123465502', 2025.0, 'VESPERTINO', '2º Ano', '102', 25.0, 1.0)
2026-01-17 01:18:11 [INFO]: Turma criada: Turma B - 123465502
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas WHERE id = '60d35965-9179-4708-a0e4-cb7ade85'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/turmas
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/turmas/b9a07141-fed9-4b2e-be65-16de09035696
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas WHERE id = 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: POST /api/responsaveis
2026-01-17 01:18:11 [DEBUG]: SELECT id FROM responsaveis WHERE cpf = '75803607679'
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: INSERT INTO responsaveis (id, nome, cpf, rg, data_nascimento, telefone, celular, email, endereco, cidade, estado, cep, profissao, local_trabalho, observacoes)
       VALUES ('1ee2cc0f-03a2-4091-a59a-c8d11155'/*+4 bytes*/, 'Pedro Oliveira', '75803607679', NULL, NULL, '(11) 99999-0004', '(11) 98888-0004', 'pedro166398324@email.com', 'Av. Brasil, 456', 'Sao Paulo', 'SP', NULL, 'Medico', NULL, NULL)
2026-01-17 01:18:11 [INFO]: Responsável criado: Pedro Oliveira
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM responsaveis WHERE id = '1ee2cc0f-03a2-4091-a59a-c8d11155'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/responsaveis
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/responsaveis/97a9ccd2-f853-47b6-bb6d-87d69c9bde59
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM responsaveis WHERE id = '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/responsaveis
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/turmas
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: POST /api/alunos
2026-01-17 01:18:11 [DEBUG]: SELECT id FROM alunos WHERE cpf = '80903039604'
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [DEBUG]: SELECT id FROM responsaveis WHERE id = '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: INSERT INTO alunos (id, nome, cpf, rg, data_nascimento, sexo, telefone, email, endereco, cidade, estado, cep, responsavel_id, observacoes)
       VALUES ('4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/, 'Ana Maria Oliveira', '80903039604', NULL, '2016-03-10', 'F', NULL, 'ana677809942@email.com', 'Av. Brasil, 456', 'Sao Paulo', 'SP', NULL, '97a9ccd2-f853-47b6-bb6d-87d69c9b'/*+4 bytes*/, NULL)
2026-01-17 01:18:11 [INFO]: Aluno criado: Ana Maria Oliveira
2026-01-17 01:18:11 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, r.telefone as responsavel_telefone, r.email as responsavel_email, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       WHERE a.id = '4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/alunos
2026-01-17 01:18:11 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/alunos/4b6683bb-de26-4b3d-9ba7-7ef9111cc2eb
2026-01-17 01:18:11 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, r.telefone as responsavel_telefone, r.email as responsavel_email, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       WHERE a.id = '4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/alunos
2026-01-17 01:18:11 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/turmas
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: POST /api/notas
2026-01-17 01:18:11 [DEBUG]: SELECT id, turma_id FROM alunos WHERE id = '4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: SELECT id FROM notas WHERE aluno_id = '4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/ AND turma_id = 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/ AND disciplina = 'Portugues' AND bimestre = 1.0 AND tipo = 'Prova'
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [DEBUG]: INSERT INTO notas (id, aluno_id, turma_id, disciplina, bimestre, nota, tipo, observacao)
       VALUES ('3d1fd5b3-5a2a-48cf-972d-01065196'/*+4 bytes*/, '4b6683bb-de26-4b3d-9ba7-7ef9111c'/*+4 bytes*/, 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/, 'Portugues', 1.0, 9.0, 'Prova', NULL)
2026-01-17 01:18:11 [INFO]: Nota lançada para aluno 4b6683bb-de26-4b3d-9ba7-7ef9111cc2eb
2026-01-17 01:18:11 [DEBUG]: SELECT n.*, a.nome as aluno_nome, t.nome as turma_nome
       FROM notas n
       INNER JOIN alunos a ON n.aluno_id = a.id
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.id = '3d1fd5b3-5a2a-48cf-972d-01065196'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/notas/turma/b9a07141-fed9-4b2e-be65-16de09035696
2026-01-17 01:18:11 [DEBUG]: SELECT n.*, a.nome as aluno_nome
       FROM notas n
       INNER JOIN alunos a ON n.aluno_id = a.id
       WHERE n.turma_id = 'b9a07141-fed9-4b2e-be65-16de0903'/*+4 bytes*/
       ORDER BY a.nome ASC, n.disciplina ASC, n.bimestre ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/financeiro/planos/cc32b808-f126-4a45-871d-56e1aad65a38
2026-01-17 01:18:11 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 01:18:11 [DEBUG]: 
      SELECT m.*, a.nome as aluno_nome
      FROM mensalidades m
      INNER JOIN alunos a ON m.aluno_id = a.id
      WHERE 1=1
     ORDER BY m.data_vencimento DESC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: POST /api/financeiro/despesas
2026-01-17 01:18:11 [DEBUG]: INSERT INTO despesas (id, descricao, categoria, valor, data_vencimento, fornecedor, observacoes, status)
       VALUES ('fd394ff9-c73d-4a0a-9b08-4fd20d2f'/*+4 bytes*/, 'Manutencao predial', 'MANUTENCAO', 1200.0, '2025-02-20', 'Predial Services', NULL, 'PENDENTE')
2026-01-17 01:18:11 [INFO]: Despesa criada: Manutencao predial
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM despesas WHERE id = 'fd394ff9-c73d-4a0a-9b08-4fd20d2f'/*+4 bytes*/
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/financeiro/historico/2025
2026-01-17 01:18:11 [HTTP]: GET /api/usuarios
2026-01-17 01:18:11 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/professores
2026-01-17 01:18:11 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       ORDER BY f.nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/turmas
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/responsaveis
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:11 [HTTP]: GET /api/alunos
2026-01-17 01:18:11 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 1ms
2026-01-17 01:18:11 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:18:11 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:18:11 [DEBUG]: Query executada em 0ms
2026-01-17 01:18:26 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:18:26 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:18:26 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:26 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:26 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:26 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:26 [DEBUG]: SELECT 1
2026-01-17 01:18:26 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:18:26 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:18:26 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:26 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:26 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:26 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:26 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:26 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:26 [INFO]: Migrations executadas com sucesso
2026-01-17 01:18:26 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:18:26 [INFO]: Ambiente: development
2026-01-17 01:18:50 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:18:50 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:18:50 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:50 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:50 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:50 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:50 [DEBUG]: SELECT 1
2026-01-17 01:18:50 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:18:50 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:18:50 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:50 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:50 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:50 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:50 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:50 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:50 [INFO]: Migrations executadas com sucesso
2026-01-17 01:18:50 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:18:50 [INFO]: Ambiente: development
2026-01-17 01:18:55 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:18:55 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:18:55 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:55 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:55 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:55 [DEBUG]: SELECT 1
2026-01-17 01:18:55 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:18:55 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:18:55 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:18:55 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:18:55 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:18:55 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:18:55 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:18:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:18:55 [INFO]: Migrations executadas com sucesso
2026-01-17 01:18:55 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:18:55 [INFO]: Ambiente: development
2026-01-17 01:19:08 [HTTP]: POST /api/auth/login
2026-01-17 01:19:08 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:19:08 [HTTP]: GET /api/auth/me
2026-01-17 01:19:08 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:19:08 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [HTTP]: GET /api/financeiro/planos/cc32b808-f126-4a45-871d-56e1aad65a38
2026-01-17 01:19:08 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [HTTP]: GET /api/financeiro/historico/2025
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:08 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:08 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:31 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:19:31 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:19:31 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:19:31 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:19:31 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:19:31 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:19:31 [DEBUG]: SELECT 1
2026-01-17 01:19:31 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:19:31 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:19:31 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:19:31 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:19:31 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:19:31 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:19:31 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:19:31 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:19:31 [INFO]: Migrations executadas com sucesso
2026-01-17 01:19:31 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:19:31 [INFO]: Ambiente: development
2026-01-17 01:19:44 [HTTP]: POST /api/auth/login
2026-01-17 01:19:44 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:19:44 [HTTP]: GET /api/auth/me
2026-01-17 01:19:44 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [HTTP]: GET /api/financeiro/dashboard/historico/2025
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [HTTP]: GET /api/financeiro/historico/2025
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 2.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 3.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 4.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 5.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 6.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 7.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 8.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 9.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 10.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 11.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:44 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
         WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 12.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2025.0
2026-01-17 01:19:44 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:47 [HTTP]: POST /api/auth/login
2026-01-17 01:19:47 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:19:47 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:48 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:19:48 [HTTP]: GET /api/auth/me
2026-01-17 01:19:48 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:19:48 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: POST /api/auth/login
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:19:53 [HTTP]: GET /api/usuarios
2026-01-17 01:19:53 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: POST /api/usuarios
2026-01-17 01:19:53 [DEBUG]: SELECT id FROM usuarios WHERE email = 'coord627059249@escola.com'
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: INSERT INTO usuarios (id, nome, email, senha, perfil, ativo)
       VALUES ('a1658898-1cfa-49db-a13f-7255cd2a'/*+4 bytes*/, 'Coordenador Teste', 'coord627059249@escola.com', '$2a$10$RSOGIFmJnRpAd3yaT28yBuk1r'/*+28 bytes*/, 'COORDENADOR', 1)
2026-01-17 01:19:53 [INFO]: Usuário criado: coord627059249@escola.com
2026-01-17 01:19:53 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'a1658898-1cfa-49db-a13f-7255cd2a'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: GET /api/escola
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: PUT /api/escola
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: UPDATE escolas SET diretor = 'Dr. Joao Silva', updated_at = datetime('now') WHERE id = '57cf77cb-407c-4377-b786-00e3f6d5'/*+4 bytes*/
2026-01-17 01:19:53 [INFO]: Escola atualizada
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/professores
2026-01-17 01:19:53 [DEBUG]: BEGIN
2026-01-17 01:19:53 [DEBUG]: INSERT INTO funcionarios (id, nome, cpf, rg, data_nascimento, telefone, email, endereco, cidade, estado, cep, cargo, salario, data_contratacao, observacoes)
         VALUES ('d0a39b86-eabd-459a-8fd3-be764e9c'/*+4 bytes*/, 'Prof. Carlos Santos', '70641760523', NULL, '1985-03-15', '(11) 99999-0001', 'carlos85550543@escola.com', NULL, NULL, NULL, NULL, 'Professor', 3500.0, '2024-01-01', NULL)
2026-01-17 01:19:53 [DEBUG]: INSERT INTO professores (id, funcionario_id, formacao, especialidade)
         VALUES ('8489a576-d8f2-4ae8-b2c7-687b56b7'/*+4 bytes*/, 'd0a39b86-eabd-459a-8fd3-be764e9c'/*+4 bytes*/, 'Licenciatura em Matematica', 'Matematica')
2026-01-17 01:19:53 [INFO]: Professor criado: Prof. Carlos Santos
2026-01-17 01:19:53 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       WHERE p.id = '8489a576-d8f2-4ae8-b2c7-687b56b7'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT tp.*, t.nome as turma_nome, t.ano, t.turno, t.serie
         FROM turma_professores tp
         INNER JOIN turmas t ON tp.turma_id = t.id
         WHERE tp.professor_id = '8489a576-d8f2-4ae8-b2c7-687b56b7'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: COMMIT
2026-01-17 01:19:53 [HTTP]: GET /api/professores
2026-01-17 01:19:53 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       ORDER BY f.nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/turmas
2026-01-17 01:19:53 [DEBUG]: INSERT INTO turmas (id, nome, ano, turno, serie, sala_numero, capacidade, ativa)
       VALUES ('f70bc6fe-8595-4b69-8844-dc59c047'/*+4 bytes*/, 'Turma A - 1658169775', 2025.0, 'MATUTINO', '1º Ano', '101', 30.0, 1.0)
2026-01-17 01:19:53 [INFO]: Turma criada: Turma A - 1658169775
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM turmas WHERE id = 'f70bc6fe-8595-4b69-8844-dc59c047'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: GET /api/turmas
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/responsaveis
2026-01-17 01:19:53 [DEBUG]: SELECT id FROM responsaveis WHERE cpf = '92824849184'
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: INSERT INTO responsaveis (id, nome, cpf, rg, data_nascimento, telefone, celular, email, endereco, cidade, estado, cep, profissao, local_trabalho, observacoes)
       VALUES ('3c7d3b11-ad65-4009-8112-838da04d'/*+4 bytes*/, 'Maria Silva Santos', '92824849184', NULL, NULL, '(11) 99999-0002', '(11) 98888-0002', 'maria233091730@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', 'Engenheira', NULL, NULL)
2026-01-17 01:19:53 [INFO]: Responsável criado: Maria Silva Santos
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM responsaveis WHERE id = '3c7d3b11-ad65-4009-8112-838da04d'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: GET /api/responsaveis
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/alunos
2026-01-17 01:19:53 [DEBUG]: SELECT id FROM alunos WHERE cpf = '21806051753'
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [DEBUG]: SELECT id FROM responsaveis WHERE id = '3c7d3b11-ad65-4009-8112-838da04d'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: INSERT INTO alunos (id, nome, cpf, rg, data_nascimento, sexo, telefone, email, endereco, cidade, estado, cep, responsavel_id, observacoes)
       VALUES ('e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, 'Joao Silva Santos', '21806051753', NULL, '2015-06-20', 'M', NULL, 'joao1782322079@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', '3c7d3b11-ad65-4009-8112-838da04d'/*+4 bytes*/, NULL)
2026-01-17 01:19:53 [INFO]: Aluno criado: Joao Silva Santos
2026-01-17 01:19:53 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, r.telefone as responsavel_telefone, r.email as responsavel_email, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       WHERE a.id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: GET /api/alunos
2026-01-17 01:19:53 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/notas
2026-01-17 01:19:53 [DEBUG]: SELECT id, turma_id FROM alunos WHERE id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT id FROM notas WHERE aluno_id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/ AND turma_id = 'f70bc6fe-8595-4b69-8844-dc59c047'/*+4 bytes*/ AND disciplina = 'Matematica' AND bimestre = 1.0 AND tipo = 'Prova'
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: INSERT INTO notas (id, aluno_id, turma_id, disciplina, bimestre, nota, tipo, observacao)
       VALUES ('4725c0d6-487f-4bbf-ab1a-1c11fcd3'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, 'f70bc6fe-8595-4b69-8844-dc59c047'/*+4 bytes*/, 'Matematica', 1.0, 8.5, 'Prova', NULL)
2026-01-17 01:19:53 [INFO]: Nota lançada para aluno e844a6b0-45b9-414f-8b46-ef57016c3a9d
2026-01-17 01:19:53 [DEBUG]: SELECT n.*, a.nome as aluno_nome, t.nome as turma_nome
       FROM notas n
       INNER JOIN alunos a ON n.aluno_id = a.id
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.id = '4725c0d6-487f-4bbf-ab1a-1c11fcd3'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: GET /api/notas/aluno/e844a6b0-45b9-414f-8b46-ef57016c3a9d
2026-01-17 01:19:53 [DEBUG]: SELECT n.*, t.nome as turma_nome
       FROM notas n
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.aluno_id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/
       ORDER BY n.disciplina ASC, n.bimestre ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/financeiro/planos
2026-01-17 01:19:53 [DEBUG]: INSERT INTO planos_mensalidade (id, nome, descricao, valor, ativo)
       VALUES ('5d8c18df-9dae-4ac8-89cf-6e1c50ce'/*+4 bytes*/, 'Plano Teste 14153547', 'Plano de teste', 950.0, 1.0)
2026-01-17 01:19:53 [INFO]: Plano criado: Plano Teste 14153547
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = '5d8c18df-9dae-4ac8-89cf-6e1c50ce'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 01:19:53 [DEBUG]: SELECT id, nome FROM alunos WHERE id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: BEGIN
2026-01-17 01:19:53 [DEBUG]: INSERT INTO matriculas (id, aluno_id, plano_id, ano_letivo, valor_matricula, valor_mensalidade, dia_vencimento, data_matricula, status, desconto, observacoes)
         VALUES ('4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/, 2025.0, 300.0, 1500.0, 10.0, '2026-01-17', 'ATIVA', 0.0, NULL)
2026-01-17 01:19:53 [DEBUG]: UPDATE alunos SET matricula_ativa = 1, data_matricula = '2026-01-17', updated_at = datetime('now') WHERE id = 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('440f6d59-2f9b-495d-a2b8-5f5d0dab'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 1.0, 2025.0, 1500.0, 0.0, '2025-01-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('b4dc4e4f-d317-42b5-885b-480b416c'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 2.0, 2025.0, 1500.0, 0.0, '2025-02-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('bf9628eb-77da-4e63-a255-c2685475'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 3.0, 2025.0, 1500.0, 0.0, '2025-03-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('48ca3647-9455-4b9f-8fd8-5e702df2'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 4.0, 2025.0, 1500.0, 0.0, '2025-04-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('1a961f33-b6cf-4a1e-aa39-f35e26f9'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 5.0, 2025.0, 1500.0, 0.0, '2025-05-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('3f1d1dfb-bfe9-400c-b43f-7c0d3dac'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 6.0, 2025.0, 1500.0, 0.0, '2025-06-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('04d457c0-daaf-4f1e-a988-53760186'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 7.0, 2025.0, 1500.0, 0.0, '2025-07-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('1cf5566b-350e-41c6-ae8c-c602ac2a'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 8.0, 2025.0, 1500.0, 0.0, '2025-08-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('79b2ffa8-6d90-41b4-9435-2b491b51'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 9.0, 2025.0, 1500.0, 0.0, '2025-09-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('4f3ba4d9-3e3a-4d28-84dd-12470d06'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 10.0, 2025.0, 1500.0, 0.0, '2025-10-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('95bcfb62-482b-493c-ae66-f10540f3'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 11.0, 2025.0, 1500.0, 0.0, '2025-11-10', 'PENDENTE')
2026-01-17 01:19:53 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('e7d1199e-c965-4ae5-8a27-812d2f93'/*+4 bytes*/, 'e844a6b0-45b9-414f-8b46-ef57016c'/*+4 bytes*/, '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/, 12.0, 2025.0, 1500.0, 0.0, '2025-12-10', 'PENDENTE')
2026-01-17 01:19:53 [INFO]: Matrícula realizada para aluno Joao Silva Santos
2026-01-17 01:19:53 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       WHERE m.id = '4bcd07a0-dbf0-4437-b1db-9f579a46'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: COMMIT
2026-01-17 01:19:53 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 01:19:53 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       ORDER BY m.data_matricula DESC
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: POST /api/financeiro/despesas
2026-01-17 01:19:53 [DEBUG]: INSERT INTO despesas (id, descricao, categoria, valor, data_vencimento, fornecedor, observacoes, status)
       VALUES ('4a1f8cd3-7626-4581-aadd-127067fd'/*+4 bytes*/, 'Material de escritorio', 'MATERIAL', 350.5, '2025-02-15', 'Papelaria ABC', NULL, 'PENDENTE')
2026-01-17 01:19:53 [INFO]: Despesa criada: Material de escritorio
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM despesas WHERE id = '4a1f8cd3-7626-4581-aadd-127067fd'/*+4 bytes*/
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [HTTP]: GET /api/financeiro/despesas
2026-01-17 01:19:53 [DEBUG]: SELECT * FROM despesas WHERE 1=1 ORDER BY data_vencimento DESC
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM alunos
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM alunos WHERE matricula_ativa = 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM professores p INNER JOIN funcionarios f ON p.funcionario_id = f.id WHERE f.ativo = 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM turmas WHERE ativa = 1
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status = 'PENDENTE'
2026-01-17 01:19:53 [DEBUG]: Query executada em 1ms
2026-01-17 01:19:53 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status IN ('PENDENTE', 'ATRASADO') AND data_vencimento < date('now')
2026-01-17 01:19:53 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:29 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:20:29 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:20:30 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:20:30 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:20:30 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:20:30 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:20:30 [DEBUG]: SELECT 1
2026-01-17 01:20:30 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:20:30 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:20:30 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:20:30 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:20:30 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:20:30 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:20:30 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:20:30 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:20:30 [INFO]: Migrations executadas com sucesso
2026-01-17 01:20:30 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:20:30 [INFO]: Ambiente: development
2026-01-17 01:20:41 [HTTP]: POST /api/auth/login
2026-01-17 01:20:41 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:20:41 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:41 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:20:41 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:20:41 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:20:41 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:41 [HTTP]: GET /api/financeiro/planos/cc32b808-f126-4a45-871d-56e1aad65a38
2026-01-17 01:20:41 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/
2026-01-17 01:20:41 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:41 [HTTP]: GET /api/auth/me
2026-01-17 01:20:41 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b3844c3c-6fa1-4b68-a6ee-b9b65021'/*+4 bytes*/
2026-01-17 01:20:41 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:45 [HTTP]: POST /api/auth/login
2026-01-17 01:20:45 [DEBUG]: SELECT * FROM usuarios WHERE email = 'admin@escola.com' AND ativo = 1
2026-01-17 01:20:45 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:45 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:20:45 [HTTP]: GET /api/usuarios
2026-01-17 01:20:45 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios ORDER BY nome ASC
2026-01-17 01:20:45 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:45 [HTTP]: POST /api/usuarios
2026-01-17 01:20:45 [DEBUG]: SELECT id FROM usuarios WHERE email = 'coord1961355164@escola.com'
2026-01-17 01:20:45 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: INSERT INTO usuarios (id, nome, email, senha, perfil, ativo)
       VALUES ('b7cdefd8-cdd6-4f73-a7a3-999f6964'/*+4 bytes*/, 'Coordenador Teste', 'coord1961355164@escola.com', '$2a$10$BI/mqkjvxMfGoj3pi699xeMUD'/*+28 bytes*/, 'COORDENADOR', 1)
2026-01-17 01:20:46 [INFO]: Usuário criado: coord1961355164@escola.com
2026-01-17 01:20:46 [DEBUG]: SELECT id, nome, email, perfil, ativo, created_at, updated_at
       FROM usuarios WHERE id = 'b7cdefd8-cdd6-4f73-a7a3-999f6964'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/escola
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: PUT /api/escola
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: UPDATE escolas SET diretor = 'Dr. Joao Silva', updated_at = datetime('now') WHERE id = '57cf77cb-407c-4377-b786-00e3f6d5'/*+4 bytes*/
2026-01-17 01:20:46 [INFO]: Escola atualizada
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM escolas LIMIT 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: POST /api/professores
2026-01-17 01:20:46 [DEBUG]: BEGIN
2026-01-17 01:20:46 [DEBUG]: INSERT INTO funcionarios (id, nome, cpf, rg, data_nascimento, telefone, email, endereco, cidade, estado, cep, cargo, salario, data_contratacao, observacoes)
         VALUES ('dfb2dae7-860c-42eb-8487-5ecbc903'/*+4 bytes*/, 'Prof. Carlos Santos', '67663773908', NULL, '1985-03-15', '(11) 99999-0001', 'carlos337461677@escola.com', NULL, NULL, NULL, NULL, 'Professor', 3500.0, '2024-01-01', NULL)
2026-01-17 01:20:46 [DEBUG]: INSERT INTO professores (id, funcionario_id, formacao, especialidade)
         VALUES ('26f18b2b-3277-4fe8-adbb-110b18c0'/*+4 bytes*/, 'dfb2dae7-860c-42eb-8487-5ecbc903'/*+4 bytes*/, 'Licenciatura em Matematica', 'Matematica')
2026-01-17 01:20:46 [INFO]: Professor criado: Prof. Carlos Santos
2026-01-17 01:20:46 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       WHERE p.id = '26f18b2b-3277-4fe8-adbb-110b18c0'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT tp.*, t.nome as turma_nome, t.ano, t.turno, t.serie
         FROM turma_professores tp
         INNER JOIN turmas t ON tp.turma_id = t.id
         WHERE tp.professor_id = '26f18b2b-3277-4fe8-adbb-110b18c0'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: COMMIT
2026-01-17 01:20:46 [HTTP]: GET /api/professores
2026-01-17 01:20:46 [DEBUG]: SELECT p.*, 
              f.nome, f.cpf, f.rg, f.data_nascimento, f.telefone, f.email, f.endereco, 
              f.cidade, f.estado, f.cep, f.cargo, f.salario, f.data_contratacao, f.ativo, f.observacoes
       FROM professores p
       INNER JOIN funcionarios f ON p.funcionario_id = f.id
       ORDER BY f.nome ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: POST /api/turmas
2026-01-17 01:20:46 [DEBUG]: INSERT INTO turmas (id, nome, ano, turno, serie, sala_numero, capacidade, ativa)
       VALUES ('79dbff12-dc7c-496b-ab2b-fbe8b77a'/*+4 bytes*/, 'Turma A - 1080146122', 2025.0, 'MATUTINO', '1º Ano', '101', 30.0, 1.0)
2026-01-17 01:20:46 [INFO]: Turma criada: Turma A - 1080146122
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM turmas WHERE id = '79dbff12-dc7c-496b-ab2b-fbe8b77a'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: GET /api/turmas
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM turmas ORDER BY ano DESC, nome ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: POST /api/responsaveis
2026-01-17 01:20:46 [DEBUG]: SELECT id FROM responsaveis WHERE cpf = '22486355390'
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: INSERT INTO responsaveis (id, nome, cpf, rg, data_nascimento, telefone, celular, email, endereco, cidade, estado, cep, profissao, local_trabalho, observacoes)
       VALUES ('530b700a-f7a0-424f-929f-66f6b53c'/*+4 bytes*/, 'Maria Silva Santos', '22486355390', NULL, NULL, '(11) 99999-0002', '(11) 98888-0002', 'maria1194742552@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', 'Engenheira', NULL, NULL)
2026-01-17 01:20:46 [INFO]: Responsável criado: Maria Silva Santos
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM responsaveis WHERE id = '530b700a-f7a0-424f-929f-66f6b53c'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/responsaveis
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM responsaveis ORDER BY nome ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: POST /api/alunos
2026-01-17 01:20:46 [DEBUG]: SELECT id FROM alunos WHERE cpf = '74570258654'
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [DEBUG]: SELECT id FROM responsaveis WHERE id = '530b700a-f7a0-424f-929f-66f6b53c'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: INSERT INTO alunos (id, nome, cpf, rg, data_nascimento, sexo, telefone, email, endereco, cidade, estado, cep, responsavel_id, observacoes)
       VALUES ('4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, 'Joao Silva Santos', '74570258654', NULL, '2015-06-20', 'M', NULL, 'joao2083118446@email.com', 'Rua das Flores, 123', 'Sao Paulo', 'SP', '01234-567', '530b700a-f7a0-424f-929f-66f6b53c'/*+4 bytes*/, NULL)
2026-01-17 01:20:46 [INFO]: Aluno criado: Joao Silva Santos
2026-01-17 01:20:46 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, r.telefone as responsavel_telefone, r.email as responsavel_email, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       WHERE a.id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/alunos
2026-01-17 01:20:46 [DEBUG]: SELECT a.*, r.nome as responsavel_nome, t.nome as turma_nome
       FROM alunos a
       LEFT JOIN responsaveis r ON a.responsavel_id = r.id
       LEFT JOIN turmas t ON a.turma_id = t.id
       ORDER BY a.nome ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: POST /api/notas
2026-01-17 01:20:46 [DEBUG]: SELECT id, turma_id FROM alunos WHERE id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT id FROM notas WHERE aluno_id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/ AND turma_id = '79dbff12-dc7c-496b-ab2b-fbe8b77a'/*+4 bytes*/ AND disciplina = 'Matematica' AND bimestre = 1.0 AND tipo = 'Prova'
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [DEBUG]: INSERT INTO notas (id, aluno_id, turma_id, disciplina, bimestre, nota, tipo, observacao)
       VALUES ('f26a83a0-7360-4a6d-bf00-022b0d5f'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '79dbff12-dc7c-496b-ab2b-fbe8b77a'/*+4 bytes*/, 'Matematica', 1.0, 8.5, 'Prova', NULL)
2026-01-17 01:20:46 [INFO]: Nota lançada para aluno 4f32cece-419e-44dd-bfce-ae8c131b3fd2
2026-01-17 01:20:46 [DEBUG]: SELECT n.*, a.nome as aluno_nome, t.nome as turma_nome
       FROM notas n
       INNER JOIN alunos a ON n.aluno_id = a.id
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.id = 'f26a83a0-7360-4a6d-bf00-022b0d5f'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/notas/aluno/4f32cece-419e-44dd-bfce-ae8c131b3fd2
2026-01-17 01:20:46 [DEBUG]: SELECT n.*, t.nome as turma_nome
       FROM notas n
       INNER JOIN turmas t ON n.turma_id = t.id
       WHERE n.aluno_id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/
       ORDER BY n.disciplina ASC, n.bimestre ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/financeiro/planos
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM planos_mensalidade ORDER BY nome ASC
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: POST /api/financeiro/planos
2026-01-17 01:20:46 [DEBUG]: INSERT INTO planos_mensalidade (id, nome, descricao, valor, ativo)
       VALUES ('18426b06-a802-4065-bc66-ac124e81'/*+4 bytes*/, 'Plano Teste 814288959', 'Plano de teste', 950.0, 1.0)
2026-01-17 01:20:46 [INFO]: Plano criado: Plano Teste 814288959
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = '18426b06-a802-4065-bc66-ac124e81'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 01:20:46 [DEBUG]: SELECT id, nome FROM alunos WHERE id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM planos_mensalidade WHERE id = 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [DEBUG]: BEGIN
2026-01-17 01:20:46 [DEBUG]: INSERT INTO matriculas (id, aluno_id, plano_id, ano_letivo, valor_matricula, valor_mensalidade, dia_vencimento, data_matricula, status, desconto, observacoes)
         VALUES ('5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, 'cc32b808-f126-4a45-871d-56e1aad6'/*+4 bytes*/, 2025.0, 300.0, 1500.0, 10.0, '2026-01-17', 'ATIVA', 0.0, NULL)
2026-01-17 01:20:46 [DEBUG]: UPDATE alunos SET matricula_ativa = 1, data_matricula = '2026-01-17', updated_at = datetime('now') WHERE id = '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('330cb33f-448b-4f83-a398-6899302f'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 1.0, 2025.0, 1500.0, 0.0, '2025-01-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('243b15cf-a4ac-4051-a130-9200658a'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 2.0, 2025.0, 1500.0, 0.0, '2025-02-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('e496a16d-0ce1-47d0-8297-c292f510'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 3.0, 2025.0, 1500.0, 0.0, '2025-03-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('bedaf14f-5c63-49d8-ae83-ed514f6f'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 4.0, 2025.0, 1500.0, 0.0, '2025-04-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('16859e64-1af7-4b25-8f5d-a78dbeaf'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 5.0, 2025.0, 1500.0, 0.0, '2025-05-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('ef09022d-d584-406f-a401-f117955a'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 6.0, 2025.0, 1500.0, 0.0, '2025-06-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('9ad0ccf7-701d-483e-97bd-0d247a0b'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 7.0, 2025.0, 1500.0, 0.0, '2025-07-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('b895924e-3b6c-4979-b4e1-450bd63f'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 8.0, 2025.0, 1500.0, 0.0, '2025-08-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('4190da9f-ca28-4947-9396-bfcc4443'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 9.0, 2025.0, 1500.0, 0.0, '2025-09-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('449a91f5-5195-4e11-805c-a07ca5ed'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 10.0, 2025.0, 1500.0, 0.0, '2025-10-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('e21fcf09-4ede-4098-b1e8-6268ec16'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 11.0, 2025.0, 1500.0, 0.0, '2025-11-10', 'PENDENTE')
2026-01-17 01:20:46 [DEBUG]: INSERT INTO mensalidades (id, aluno_id, matricula_id, mes_referencia, ano_referencia, valor, desconto, data_vencimento, status)
         VALUES ('f345194a-04b8-43d5-90f5-456681f1'/*+4 bytes*/, '4f32cece-419e-44dd-bfce-ae8c131b'/*+4 bytes*/, '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/, 12.0, 2025.0, 1500.0, 0.0, '2025-12-10', 'PENDENTE')
2026-01-17 01:20:46 [INFO]: Matrícula realizada para aluno Joao Silva Santos
2026-01-17 01:20:46 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       WHERE m.id = '5d2df4c3-f48b-4a29-9819-a8948e91'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: COMMIT
2026-01-17 01:20:46 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 01:20:46 [DEBUG]: SELECT m.*, a.nome as aluno_nome, p.nome as plano_nome
       FROM matriculas m
       INNER JOIN alunos a ON m.aluno_id = a.id
       INNER JOIN planos_mensalidade p ON m.plano_id = p.id
       ORDER BY m.data_matricula DESC
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: POST /api/financeiro/despesas
2026-01-17 01:20:46 [DEBUG]: INSERT INTO despesas (id, descricao, categoria, valor, data_vencimento, fornecedor, observacoes, status)
       VALUES ('f2f4e7e9-fed8-44cf-938c-143a0223'/*+4 bytes*/, 'Material de escritorio', 'MATERIAL', 350.5, '2025-02-15', 'Papelaria ABC', NULL, 'PENDENTE')
2026-01-17 01:20:46 [INFO]: Despesa criada: Material de escritorio
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM despesas WHERE id = 'f2f4e7e9-fed8-44cf-938c-143a0223'/*+4 bytes*/
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [HTTP]: GET /api/financeiro/despesas
2026-01-17 01:20:46 [DEBUG]: SELECT * FROM despesas WHERE 1=1 ORDER BY data_vencimento DESC
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM alunos
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM alunos WHERE matricula_ativa = 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 1ms
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM professores p INNER JOIN funcionarios f ON p.funcionario_id = f.id WHERE f.ativo = 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM turmas WHERE ativa = 1
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COALESCE(SUM(valor_pago), 0) as total FROM mensalidades 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COALESCE(SUM(valor), 0) as total FROM despesas 
       WHERE status = 'PAGO' AND CAST(strftime('%m', data_pagamento) AS INTEGER) = 1.0 AND CAST(strftime('%Y', data_pagamento) AS INTEGER) = 2026.0
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status = 'PENDENTE'
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:20:46 [DEBUG]: SELECT COUNT(*) as count FROM mensalidades WHERE status IN ('PENDENTE', 'ATRASADO') AND data_vencimento < date('now')
2026-01-17 01:20:46 [DEBUG]: Query executada em 0ms
2026-01-17 01:25:10 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:25:10 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:25:11 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:25:11 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:25:11 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:25:11 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:25:11 [DEBUG]: SELECT 1
2026-01-17 01:25:11 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:25:11 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:25:11 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:25:11 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:25:11 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:25:11 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:25:11 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:25:11 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:25:11 [INFO]: Migrations executadas com sucesso
2026-01-17 01:25:11 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:25:11 [INFO]: Ambiente: development
2026-01-17 01:31:59 [DEBUG]: PRAGMA journal_mode = WAL
2026-01-17 01:31:59 [DEBUG]: PRAGMA foreign_keys = ON
2026-01-17 01:32:01 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:32:01 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:32:01 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:32:01 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:32:01 [DEBUG]: SELECT 1
2026-01-17 01:32:01 [INFO]: Conexão com banco de dados SQLite estabelecida
2026-01-17 01:32:01 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:32:01 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:32:01 [DEBUG]: -- Tabela Escola
CREATE TABLE IF NOT EXISTS escolas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cnpj TEXT UNIQUE NOT NULL,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  diretor TEXT,
  secretario TEXT,
  logo TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Usuários
CREATE TABLE IF NOT EXISTS usuarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  perfil TEXT NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Funcionários
CREATE TABLE IF NOT EXISTS funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  cargo TEXT NOT NULL,
  salario REAL NOT NULL,
  data_contratacao TEXT NOT NULL,
  data_desligamento TEXT,
  ativo INTEGER DEFAULT 1,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Professores
CREATE TABLE IF NOT EXISTS professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT UNIQUE NOT NULL REFERENCES funcionarios(id) ON DELETE CASCADE,
  formacao TEXT,
  especialidade TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Responsáveis
CREATE TABLE IF NOT EXISTS responsaveis (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE NOT NULL,
  rg TEXT,
  data_nascimento TEXT,
  telefone TEXT,
  celular TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  profissao TEXT,
  local_trabalho TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Turmas
CREATE TABLE IF NOT EXISTS turmas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  ano INTEGER NOT NULL,
  turno TEXT NOT NULL,
  serie TEXT,
  sala_numero TEXT,
  capacidade INTEGER DEFAULT 30,
  ativa INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Alunos
CREATE TABLE IF NOT EXISTS alunos (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT NOT NULL,
  cpf TEXT UNIQUE,
  rg TEXT,
  data_nascimento TEXT NOT NULL,
  sexo TEXT,
  telefone TEXT,
  email TEXT,
  endereco TEXT,
  cidade TEXT,
  estado TEXT,
  cep TEXT,
  responsavel_id TEXT NOT NULL REFERENCES responsaveis(id),
  turma_id TEXT REFERENCES turmas(id),
  matricula_ativa INTEGER DEFAULT 0,
  data_matricula TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Turma-Professor
CREATE TABLE IF NOT EXISTS turma_professores (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  professor_id TEXT NOT NULL REFERENCES professores(id) ON DELETE CASCADE,
  disciplina TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE(turma_id, professor_id, disciplina)
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Notas
CREATE TABLE IF NOT EXISTS notas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id) ON DELETE CASCADE,
  turma_id TEXT NOT NULL REFERENCES turmas(id) ON DELETE CASCADE,
  disciplina TEXT NOT NULL,
  bimestre INTEGER NOT NULL CHECK (bimestre BETWEEN 1 AND 4),
  nota REAL NOT NULL CHECK (nota >= 0 AND nota <= 10),
  tipo TEXT,
  observacao TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(aluno_id, turma_id, disciplina, bimestre, tipo)
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Planos de Mensalidade
CREATE TABLE IF NOT EXISTS planos_mensalidade (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  nome TEXT UNIQUE NOT NULL,
  descricao TEXT,
  valor REAL NOT NULL,
  ativo INTEGER DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Matrículas
CREATE TABLE IF NOT EXISTS matriculas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  plano_id TEXT NOT NULL REFERENCES planos_mensalidade(id),
  ano_letivo INTEGER NOT NULL,
  valor_matricula REAL NOT NULL,
  valor_mensalidade REAL NOT NULL,
  dia_vencimento INTEGER DEFAULT 10,
  data_matricula TEXT NOT NULL,
  status TEXT DEFAULT 'ATIVA',
  desconto REAL DEFAULT 0,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Mensalidades
CREATE TABLE IF NOT EXISTS mensalidades (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  aluno_id TEXT NOT NULL REFERENCES alunos(id),
  matricula_id TEXT NOT NULL REFERENCES matriculas(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  valor REAL NOT NULL,
  valor_pago REAL,
  desconto REAL DEFAULT 0,
  multa REAL DEFAULT 0,
  juros REAL DEFAULT 0,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  forma_pagamento TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Despesas
CREATE TABLE IF NOT EXISTS despesas (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  descricao TEXT NOT NULL,
  categoria TEXT NOT NULL,
  valor REAL NOT NULL,
  data_vencimento TEXT NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  fornecedor TEXT,
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now'))
);
2026-01-17 01:32:01 [DEBUG]: -- Tabela Pagamentos de Funcionários
CREATE TABLE IF NOT EXISTS pagamentos_funcionarios (
  id TEXT PRIMARY KEY DEFAULT (lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))),
  funcionario_id TEXT NOT NULL REFERENCES funcionarios(id),
  mes_referencia INTEGER NOT NULL,
  ano_referencia INTEGER NOT NULL,
  salario_base REAL NOT NULL,
  bonus REAL DEFAULT 0,
  descontos REAL DEFAULT 0,
  valor_liquido REAL NOT NULL,
  data_pagamento TEXT,
  status TEXT DEFAULT 'PENDENTE',
  observacoes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  UNIQUE(funcionario_id, mes_referencia, ano_referencia)
);
2026-01-17 01:32:01 [DEBUG]: -- Índices para performance
CREATE INDEX IF NOT EXISTS idx_alunos_responsavel ON alunos(responsavel_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_alunos_turma ON alunos(turma_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_aluno ON notas(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_notas_turma ON notas(turma_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_aluno ON mensalidades(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_mensalidades_status ON mensalidades(status);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_matriculas_aluno ON matriculas(aluno_id);
2026-01-17 01:32:01 [DEBUG]: CREATE INDEX IF NOT EXISTS idx_pagamentos_funcionario ON pagamentos_funcionarios(funcionario_id);
2026-01-17 01:32:01 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:32:01 [INFO]: Migrations executadas com sucesso
2026-01-17 01:32:01 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:32:01 [INFO]: Ambiente: development
2026-01-17 01:38:27 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:38:27 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:27 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:38:29 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:38:29 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:38:29 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:38:29 [INFO]: Migrations executadas com sucesso
2026-01-17 01:38:29 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:38:29 [INFO]: Ambiente: development
2026-01-17 01:38:29 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:38:29 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:38:29 [INFO]: Iniciando migrations do banco de dados SQLite...
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [WARN]: Aviso na migration: connection_1.default.exec is not a function
2026-01-17 01:38:29 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:38:29 [INFO]: Migrations executadas com sucesso
2026-01-17 01:39:09 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:39:09 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:39:09 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:39:09 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:39:09 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:39:09 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:39:09 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:39:09 [INFO]: Migrations executadas com sucesso
2026-01-17 01:39:09 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:39:09 [INFO]: Ambiente: development
2026-01-17 01:39:09 [ERROR]: Erro ao executar migrations: duplicate key value violates unique constraint "pg_extension_name_index" {"length":230,"name":"error","severity":"ERROR","code":"23505","detail":"Key (extname)=(uuid-ossp) already exists.","schema":"pg_catalog","table":"pg_extension","constraint":"pg_extension_name_index","file":"nbtinsert.c","line":"666","routine":"_bt_check_unique"}
error: duplicate key value violates unique constraint "pg_extension_name_index"
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runMigrations (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\migrate.ts:253:5)
    at startServer (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\server.ts:57:5)
2026-01-17 01:45:14 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:45:16 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:45:23 [INFO]: Iniciando seed do banco de dados PostgreSQL...
2026-01-17 01:45:23 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:45:25 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:45:25 [DEBUG]: Query executada em 230ms
2026-01-17 01:45:25 [DEBUG]: Query executada em 224ms
2026-01-17 01:45:25 [INFO]: Usuário admin criado: admin@escola.com / admin123
2026-01-17 01:45:25 [DEBUG]: Query executada em 222ms
2026-01-17 01:45:26 [DEBUG]: Query executada em 229ms
2026-01-17 01:45:26 [INFO]: Escola padrão criada com sucesso
2026-01-17 01:45:26 [DEBUG]: Query executada em 230ms
2026-01-17 01:45:26 [DEBUG]: Query executada em 230ms
2026-01-17 01:45:26 [DEBUG]: Query executada em 228ms
2026-01-17 01:45:27 [DEBUG]: Query executada em 225ms
2026-01-17 01:45:27 [INFO]: Planos de mensalidade criados com sucesso
2026-01-17 01:45:27 [INFO]: Seed concluído com sucesso!
2026-01-17 01:45:44 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:45:44 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:45:44 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:45:44 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:45:44 [INFO]: Migrations executadas com sucesso
2026-01-17 01:45:44 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:45:44 [INFO]: Ambiente: development
2026-01-17 01:45:56 [INFO]: Encerrando servidor...
2026-01-17 01:46:06 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:46:06 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:46:06 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:46:06 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:46:06 [INFO]: Migrations executadas com sucesso
2026-01-17 01:46:06 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:46:06 [INFO]: Ambiente: development
2026-01-17 01:46:15 [INFO]: Encerrando servidor...
2026-01-17 01:46:29 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:46:30 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:46:30 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:46:30 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:46:30 [INFO]: Migrations executadas com sucesso
2026-01-17 01:46:30 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:46:30 [INFO]: Ambiente: development
2026-01-17 01:47:39 [HTTP]: POST /api/auth/login
2026-01-17 01:47:41 [DEBUG]: Query executada em 1908ms
2026-01-17 01:47:41 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:48:22 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:48:22 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:48:22 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:48:23 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:48:23 [INFO]: Migrations executadas com sucesso
2026-01-17 01:48:23 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:48:23 [INFO]: Ambiente: development
2026-01-17 01:48:37 [HTTP]: POST /api/auth/login
2026-01-17 01:48:39 [DEBUG]: Query executada em 1786ms
2026-01-17 01:48:39 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:48:39 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:48:40 [DEBUG]: Query executada em 220ms
2026-01-17 01:48:40 [DEBUG]: Query executada em 219ms
2026-01-17 01:48:40 [DEBUG]: Query executada em 221ms
2026-01-17 01:48:40 [DEBUG]: Query executada em 220ms
2026-01-17 01:48:41 [DEBUG]: Query executada em 219ms
2026-01-17 01:48:41 [DEBUG]: Query executada em 227ms
2026-01-17 01:48:41 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:41 [DEBUG]: Query executada em 219ms
2026-01-17 01:48:41 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:48:41 [DEBUG]: Query executada em 218ms
2026-01-17 01:48:42 [DEBUG]: Query executada em 224ms
2026-01-17 01:48:42 [DEBUG]: Query executada em 220ms
2026-01-17 01:48:42 [DEBUG]: Query executada em 219ms
2026-01-17 01:48:42 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:43 [DEBUG]: Query executada em 221ms
2026-01-17 01:48:43 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:43 [DEBUG]: Query executada em 217ms
2026-01-17 01:48:55 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:48:57 [DEBUG]: Query executada em 1804ms
2026-01-17 01:48:58 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:58 [DEBUG]: Query executada em 224ms
2026-01-17 01:48:58 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:58 [DEBUG]: Query executada em 232ms
2026-01-17 01:48:58 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:59 [DEBUG]: Query executada em 223ms
2026-01-17 01:48:59 [DEBUG]: Query executada em 221ms
2026-01-17 01:48:59 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:48:59 [DEBUG]: Query executada em 222ms
2026-01-17 01:48:59 [DEBUG]: Query executada em 223ms
2026-01-17 01:49:00 [DEBUG]: Query executada em 224ms
2026-01-17 01:49:00 [DEBUG]: Query executada em 221ms
2026-01-17 01:49:00 [DEBUG]: Query executada em 222ms
2026-01-17 01:49:00 [DEBUG]: Query executada em 227ms
2026-01-17 01:49:00 [DEBUG]: Query executada em 228ms
2026-01-17 01:49:01 [DEBUG]: Query executada em 224ms
2026-01-17 01:50:17 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:50:17 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:50:17 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:50:17 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:50:17 [INFO]: Migrations executadas com sucesso
2026-01-17 01:50:17 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:50:17 [INFO]: Ambiente: development
2026-01-17 01:50:17 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:50:18 [DEBUG]: Query executada em 224ms
2026-01-17 01:50:18 [DEBUG]: Query executada em 223ms
2026-01-17 01:50:18 [DEBUG]: Query executada em 224ms
2026-01-17 01:50:18 [DEBUG]: Query executada em 224ms
2026-01-17 01:50:19 [DEBUG]: Query executada em 223ms
2026-01-17 01:50:19 [DEBUG]: Query executada em 223ms
2026-01-17 01:50:19 [DEBUG]: Query executada em 223ms
2026-01-17 01:50:19 [DEBUG]: Query executada em 220ms
2026-01-17 01:50:19 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:50:19 [DEBUG]: Query executada em 225ms
2026-01-17 01:50:20 [DEBUG]: Query executada em 221ms
2026-01-17 01:50:20 [DEBUG]: Query executada em 222ms
2026-01-17 01:50:20 [DEBUG]: Query executada em 222ms
2026-01-17 01:50:20 [DEBUG]: Query executada em 222ms
2026-01-17 01:50:21 [DEBUG]: Query executada em 225ms
2026-01-17 01:50:21 [DEBUG]: Query executada em 222ms
2026-01-17 01:50:21 [DEBUG]: Query executada em 222ms
2026-01-17 01:51:43 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:51:49 [HTTP]: POST /api/auth/login
2026-01-17 01:51:51 [DEBUG]: Query executada em 1885ms
2026-01-17 01:51:51 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:51:52 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:51:52 [DEBUG]: Query executada em 225ms
2026-01-17 01:51:52 [DEBUG]: Query executada em 224ms
2026-01-17 01:51:52 [DEBUG]: Query executada em 227ms
2026-01-17 01:51:53 [DEBUG]: Query executada em 226ms
2026-01-17 01:51:53 [DEBUG]: Query executada em 233ms
2026-01-17 01:51:53 [DEBUG]: Query executada em 228ms
2026-01-17 01:51:53 [DEBUG]: Query executada em 226ms
2026-01-17 01:51:54 [DEBUG]: Query executada em 227ms
2026-01-17 01:52:22 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:52:22 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:52:22 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:52:23 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:52:23 [INFO]: Migrations executadas com sucesso
2026-01-17 01:52:23 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:52:23 [INFO]: Ambiente: development
2026-01-17 01:52:29 [HTTP]: POST /api/auth/login
2026-01-17 01:52:29 [DEBUG]: Query executada em 222ms
2026-01-17 01:52:29 [INFO]: Login realizado: admin@escola.com
2026-01-17 01:52:30 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:52:30 [DEBUG]: Query executada em 222ms
2026-01-17 01:52:30 [DEBUG]: Query executada em 222ms
2026-01-17 01:52:30 [DEBUG]: Query executada em 219ms
2026-01-17 01:52:30 [DEBUG]: Query executada em 227ms
2026-01-17 01:52:31 [DEBUG]: Query executada em 219ms
2026-01-17 01:52:31 [DEBUG]: Query executada em 222ms
2026-01-17 01:52:31 [DEBUG]: Query executada em 219ms
2026-01-17 01:52:31 [DEBUG]: Query executada em 220ms
2026-01-17 01:52:32 [DEBUG]: Query executada em 220ms
2026-01-17 01:52:32 [DEBUG]: Query executada em 221ms
2026-01-17 01:52:32 [DEBUG]: Query executada em 219ms
2026-01-17 01:52:32 [DEBUG]: Query executada em 221ms
2026-01-17 01:52:32 [DEBUG]: Query executada em 218ms
2026-01-17 01:52:33 [DEBUG]: Query executada em 221ms
2026-01-17 01:52:33 [DEBUG]: Query executada em 219ms
2026-01-17 01:52:33 [DEBUG]: Query executada em 220ms
2026-01-17 01:52:33 [DEBUG]: Query executada em 223ms
2026-01-17 01:52:34 [DEBUG]: Query executada em 220ms
2026-01-17 01:52:34 [DEBUG]: Query executada em 218ms
2026-01-17 01:52:34 [DEBUG]: Query executada em 220ms
2026-01-17 01:52:56 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:52:57 [DEBUG]: Query executada em 1852ms
2026-01-17 01:52:58 [DEBUG]: Query executada em 226ms
2026-01-17 01:52:58 [DEBUG]: Query executada em 226ms
2026-01-17 01:52:58 [DEBUG]: Query executada em 226ms
2026-01-17 01:52:58 [DEBUG]: Query executada em 230ms
2026-01-17 01:52:59 [DEBUG]: Query executada em 233ms
2026-01-17 01:52:59 [DEBUG]: Query executada em 227ms
2026-01-17 01:52:59 [DEBUG]: Query executada em 227ms
2026-01-17 01:52:59 [DEBUG]: Query executada em 227ms
2026-01-17 01:52:59 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:00 [DEBUG]: Query executada em 226ms
2026-01-17 01:53:00 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:00 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:00 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:01 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:01 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:01 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:01 [DEBUG]: Query executada em 226ms
2026-01-17 01:53:02 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:02 [DEBUG]: Query executada em 226ms
2026-01-17 01:53:02 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:53:02 [DEBUG]: Query executada em 226ms
2026-01-17 01:53:02 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:02 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:03 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:03 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:03 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:03 [DEBUG]: Query executada em 229ms
2026-01-17 01:53:04 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:04 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:04 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:04 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:05 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:05 [DEBUG]: Query executada em 229ms
2026-01-17 01:53:05 [DEBUG]: Query executada em 231ms
2026-01-17 01:53:05 [DEBUG]: Query executada em 228ms
2026-01-17 01:53:05 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:06 [DEBUG]: Query executada em 226ms
2026-01-17 01:53:06 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:06 [DEBUG]: Query executada em 227ms
2026-01-17 01:53:06 [DEBUG]: Query executada em 225ms
2026-01-17 01:53:09 [INFO]: Encerrando servidor...
2026-01-17 01:53:51 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:53:51 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:53:51 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:53:51 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:53:51 [INFO]: Migrations executadas com sucesso
2026-01-17 01:53:51 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:53:51 [INFO]: Ambiente: development
2026-01-17 01:54:03 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:54:05 [DEBUG]: Query executada em 1787ms
2026-01-17 01:54:05 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:05 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:05 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:06 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:06 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:06 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:06 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:07 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:07 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:07 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:07 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:07 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:08 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:08 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:08 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:08 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:09 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:09 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:09 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:09 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:54:09 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:09 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:10 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:10 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:10 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:10 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:11 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:11 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:11 [DEBUG]: Query executada em 221ms
2026-01-17 01:54:11 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:11 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:12 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:12 [DEBUG]: Query executada em 218ms
2026-01-17 01:54:12 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:12 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:13 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:13 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:13 [DEBUG]: Query executada em 220ms
2026-01-17 01:54:13 [DEBUG]: Query executada em 222ms
2026-01-17 01:54:13 [DEBUG]: Query executada em 219ms
2026-01-17 01:54:24 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:54:26 [DEBUG]: Query executada em 1874ms
2026-01-17 01:54:26 [DEBUG]: Query executada em 228ms
2026-01-17 01:54:26 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:27 [DEBUG]: Query executada em 228ms
2026-01-17 01:54:27 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:27 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:27 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:28 [DEBUG]: Query executada em 228ms
2026-01-17 01:54:28 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:28 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:28 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:28 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:29 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:29 [DEBUG]: Query executada em 228ms
2026-01-17 01:54:29 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:29 [DEBUG]: Query executada em 229ms
2026-01-17 01:54:30 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:30 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:30 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:30 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:30 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:54:30 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:31 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:31 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:31 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:31 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:32 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:32 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:32 [DEBUG]: Query executada em 231ms
2026-01-17 01:54:32 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:33 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:33 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:33 [DEBUG]: Query executada em 224ms
2026-01-17 01:54:33 [DEBUG]: Query executada em 224ms
2026-01-17 01:54:33 [DEBUG]: Query executada em 226ms
2026-01-17 01:54:34 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:34 [DEBUG]: Query executada em 224ms
2026-01-17 01:54:34 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:34 [DEBUG]: Query executada em 225ms
2026-01-17 01:54:35 [DEBUG]: Query executada em 227ms
2026-01-17 01:54:35 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:06 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:55:08 [DEBUG]: Query executada em 1838ms
2026-01-17 01:55:08 [DEBUG]: Query executada em 231ms
2026-01-17 01:55:08 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:08 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:08 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:09 [DEBUG]: Query executada em 224ms
2026-01-17 01:55:09 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:09 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:09 [DEBUG]: Query executada em 233ms
2026-01-17 01:55:10 [DEBUG]: Query executada em 232ms
2026-01-17 01:55:10 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:10 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:10 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:11 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:11 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:11 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:11 [DEBUG]: Query executada em 225ms
2026-01-17 01:55:11 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:12 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:12 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:12 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 01:55:12 [DEBUG]: Query executada em 228ms
2026-01-17 01:55:12 [DEBUG]: Query executada em 229ms
2026-01-17 01:55:13 [DEBUG]: Query executada em 237ms
2026-01-17 01:55:13 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:13 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:13 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:14 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:14 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:14 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:14 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:14 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:15 [DEBUG]: Query executada em 230ms
2026-01-17 01:55:15 [DEBUG]: Query executada em 225ms
2026-01-17 01:55:15 [DEBUG]: Query executada em 227ms
2026-01-17 01:55:15 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:16 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:16 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:16 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:16 [DEBUG]: Query executada em 226ms
2026-01-17 01:55:16 [DEBUG]: Query executada em 227ms
2026-01-17 01:59:16 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:59:16 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:59:16 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:59:16 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:59:16 [INFO]: Migrations executadas com sucesso
2026-01-17 01:59:16 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:59:16 [INFO]: Ambiente: development
2026-01-17 01:59:38 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:59:38 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:59:38 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:59:38 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:59:38 [INFO]: Migrations executadas com sucesso
2026-01-17 01:59:38 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:59:38 [INFO]: Ambiente: development
2026-01-17 01:59:57 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 01:59:57 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 01:59:57 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 01:59:57 [INFO]: Migrations executadas com sucesso!
2026-01-17 01:59:57 [INFO]: Migrations executadas com sucesso
2026-01-17 01:59:57 [INFO]: Servidor rodando na porta 3001
2026-01-17 01:59:57 [INFO]: Ambiente: development
2026-01-17 02:00:15 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:00:17 [DEBUG]: Query executada em 1805ms
2026-01-17 02:00:17 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:17 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:18 [DEBUG]: Query executada em 227ms
2026-01-17 02:00:18 [DEBUG]: Query executada em 235ms
2026-01-17 02:00:18 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:18 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:19 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:19 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:19 [DEBUG]: Query executada em 224ms
2026-01-17 02:00:19 [DEBUG]: Query executada em 226ms
2026-01-17 02:00:19 [DEBUG]: Query executada em 234ms
2026-01-17 02:00:20 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:20 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:20 [DEBUG]: Query executada em 221ms
2026-01-17 02:00:20 [DEBUG]: Query executada em 226ms
2026-01-17 02:00:21 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:21 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:21 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:21 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:21 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:00:22 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:22 [DEBUG]: Query executada em 224ms
2026-01-17 02:00:22 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:22 [DEBUG]: Query executada em 224ms
2026-01-17 02:00:22 [DEBUG]: Query executada em 221ms
2026-01-17 02:00:23 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:23 [DEBUG]: Query executada em 227ms
2026-01-17 02:00:23 [DEBUG]: Query executada em 221ms
2026-01-17 02:00:23 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:24 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:24 [DEBUG]: Query executada em 224ms
2026-01-17 02:00:24 [DEBUG]: Query executada em 226ms
2026-01-17 02:00:24 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:24 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:25 [DEBUG]: Query executada em 227ms
2026-01-17 02:00:25 [DEBUG]: Query executada em 223ms
2026-01-17 02:00:25 [DEBUG]: Query executada em 225ms
2026-01-17 02:00:25 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:26 [DEBUG]: Query executada em 222ms
2026-01-17 02:00:26 [DEBUG]: Query executada em 222ms
2026-01-17 02:01:05 [HTTP]: POST /api/auth/login
2026-01-17 02:01:07 [HTTP]: POST /api/auth/login
2026-01-17 02:01:07 [DEBUG]: Query executada em 1871ms
2026-01-17 02:01:07 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:01:09 [DEBUG]: Query executada em 1833ms
2026-01-17 02:01:09 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:01:09 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:01:09 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:09 [DEBUG]: Query executada em 229ms
2026-01-17 02:01:10 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:10 [DEBUG]: Query executada em 228ms
2026-01-17 02:01:10 [DEBUG]: Query executada em 228ms
2026-01-17 02:01:10 [DEBUG]: Query executada em 223ms
2026-01-17 02:01:10 [DEBUG]: Query executada em 224ms
2026-01-17 02:01:11 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:11 [HTTP]: POST /api/auth/login
2026-01-17 02:01:11 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:11 [DEBUG]: Query executada em 223ms
2026-01-17 02:01:11 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:01:11 [DEBUG]: Query executada em 312ms
2026-01-17 02:01:11 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:12 [DEBUG]: Query executada em 224ms
2026-01-17 02:01:12 [DEBUG]: Query executada em 233ms
2026-01-17 02:01:12 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:12 [DEBUG]: Query executada em 228ms
2026-01-17 02:01:13 [DEBUG]: Query executada em 227ms
2026-01-17 02:01:13 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:13 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:13 [DEBUG]: Query executada em 227ms
2026-01-17 02:01:13 [DEBUG]: Query executada em 224ms
2026-01-17 02:01:15 [HTTP]: POST /api/auth/login
2026-01-17 02:01:15 [DEBUG]: Query executada em 227ms
2026-01-17 02:01:15 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:01:15 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:01:15 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:15 [DEBUG]: Query executada em 234ms
2026-01-17 02:01:16 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:16 [DEBUG]: Query executada em 224ms
2026-01-17 02:01:16 [DEBUG]: Query executada em 233ms
2026-01-17 02:01:16 [DEBUG]: Query executada em 230ms
2026-01-17 02:01:17 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:17 [DEBUG]: Query executada em 228ms
2026-01-17 02:01:17 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:17 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:18 [DEBUG]: Query executada em 227ms
2026-01-17 02:01:18 [DEBUG]: Query executada em 227ms
2026-01-17 02:01:18 [DEBUG]: Query executada em 226ms
2026-01-17 02:01:18 [DEBUG]: Query executada em 229ms
2026-01-17 02:01:18 [DEBUG]: Query executada em 230ms
2026-01-17 02:01:19 [DEBUG]: Query executada em 225ms
2026-01-17 02:01:19 [DEBUG]: Query executada em 224ms
2026-01-17 02:01:19 [DEBUG]: Query executada em 229ms
2026-01-17 02:01:19 [DEBUG]: Query executada em 223ms
2026-01-17 02:01:20 [DEBUG]: Query executada em 223ms
2026-01-17 02:02:09 [HTTP]: POST /api/auth/login
2026-01-17 02:02:11 [DEBUG]: Query executada em 1809ms
2026-01-17 02:02:11 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:02:11 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:02:12 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:12 [DEBUG]: Query executada em 225ms
2026-01-17 02:02:12 [DEBUG]: Query executada em 220ms
2026-01-17 02:02:12 [DEBUG]: Query executada em 225ms
2026-01-17 02:02:12 [DEBUG]: Query executada em 226ms
2026-01-17 02:02:13 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:13 [DEBUG]: Query executada em 225ms
2026-01-17 02:02:13 [DEBUG]: Query executada em 221ms
2026-01-17 02:02:13 [DEBUG]: Query executada em 223ms
2026-01-17 02:02:14 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:14 [DEBUG]: Query executada em 223ms
2026-01-17 02:02:14 [DEBUG]: Query executada em 223ms
2026-01-17 02:02:14 [DEBUG]: Query executada em 223ms
2026-01-17 02:02:15 [DEBUG]: Query executada em 222ms
2026-01-17 02:02:15 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:15 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:15 [DEBUG]: Query executada em 222ms
2026-01-17 02:02:15 [DEBUG]: Query executada em 221ms
2026-01-17 02:02:16 [DEBUG]: Query executada em 222ms
2026-01-17 02:02:16 [DEBUG]: Query executada em 227ms
2026-01-17 02:02:16 [HTTP]: GET /api/alunos
2026-01-17 02:02:16 [DEBUG]: Query executada em 229ms
2026-01-17 02:02:16 [HTTP]: GET /api/professores
2026-01-17 02:02:16 [DEBUG]: Query executada em 226ms
2026-01-17 02:02:16 [HTTP]: GET /api/turmas
2026-01-17 02:02:17 [DEBUG]: Query executada em 225ms
2026-01-17 02:02:17 [HTTP]: GET /api/responsaveis
2026-01-17 02:02:17 [DEBUG]: Query executada em 224ms
2026-01-17 02:02:17 [HTTP]: GET /api/escola
2026-01-17 02:02:17 [DEBUG]: Query executada em 225ms
2026-01-17 02:04:27 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:04:27 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:04:27 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:04:27 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:04:27 [INFO]: Migrations executadas com sucesso
2026-01-17 02:04:27 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:04:27 [INFO]: Ambiente: development
2026-01-17 02:04:32 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:04:32 [DEBUG]: Query executada em 226ms
2026-01-17 02:04:33 [DEBUG]: Query executada em 235ms
2026-01-17 02:04:33 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:33 [DEBUG]: Query executada em 224ms
2026-01-17 02:04:33 [DEBUG]: Query executada em 218ms
2026-01-17 02:04:34 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:34 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:34 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:34 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:34 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:35 [DEBUG]: Query executada em 224ms
2026-01-17 02:04:35 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:35 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:35 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:36 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:36 [DEBUG]: Query executada em 218ms
2026-01-17 02:04:36 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:36 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:36 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:37 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:37 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:04:37 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:37 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:37 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:37 [DEBUG]: Query executada em 218ms
2026-01-17 02:04:38 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:38 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:38 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:38 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:39 [DEBUG]: Query executada em 218ms
2026-01-17 02:04:39 [DEBUG]: Query executada em 226ms
2026-01-17 02:04:39 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:39 [DEBUG]: Query executada em 217ms
2026-01-17 02:04:39 [DEBUG]: Query executada em 224ms
2026-01-17 02:04:40 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:40 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:40 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:40 [DEBUG]: Query executada em 226ms
2026-01-17 02:04:41 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:41 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:41 [DEBUG]: Query executada em 228ms
2026-01-17 02:04:48 [HTTP]: GET /api/escola
2026-01-17 02:04:48 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:48 [HTTP]: GET /api/escola
2026-01-17 02:04:48 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:50 [HTTP]: GET /api/usuarios
2026-01-17 02:04:50 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:50 [HTTP]: GET /api/usuarios
2026-01-17 02:04:51 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:52 [HTTP]: GET /api/professores
2026-01-17 02:04:52 [DEBUG]: Query executada em 217ms
2026-01-17 02:04:52 [HTTP]: GET /api/professores
2026-01-17 02:04:52 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:52 [HTTP]: GET /api/turmas
2026-01-17 02:04:52 [HTTP]: GET /api/professores
2026-01-17 02:04:53 [DEBUG]: Query executada em 234ms
2026-01-17 02:04:53 [HTTP]: GET /api/turmas
2026-01-17 02:04:53 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:53 [HTTP]: GET /api/responsaveis
2026-01-17 02:04:53 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:53 [HTTP]: GET /api/responsaveis
2026-01-17 02:04:53 [DEBUG]: Query executada em 221ms
2026-01-17 02:04:54 [HTTP]: GET /api/alunos
2026-01-17 02:04:54 [HTTP]: GET /api/responsaveis
2026-01-17 02:04:54 [HTTP]: GET /api/turmas
2026-01-17 02:04:54 [DEBUG]: Query executada em 225ms
2026-01-17 02:04:54 [HTTP]: GET /api/alunos
2026-01-17 02:04:54 [DEBUG]: Query executada em 220ms
2026-01-17 02:04:54 [DEBUG]: Query executada em 1875ms
2026-01-17 02:04:54 [HTTP]: GET /api/professores
2026-01-17 02:04:55 [DEBUG]: Query executada em 225ms
2026-01-17 02:04:56 [DEBUG]: Query executada em 1822ms
2026-01-17 02:04:56 [HTTP]: GET /api/responsaveis
2026-01-17 02:04:56 [DEBUG]: Query executada em 1843ms
2026-01-17 02:04:56 [HTTP]: GET /api/turmas
2026-01-17 02:04:56 [DEBUG]: Query executada em 225ms
2026-01-17 02:04:56 [DEBUG]: Query executada em 224ms
2026-01-17 02:04:57 [HTTP]: GET /api/notas
2026-01-17 02:04:57 [HTTP]: GET /api/alunos
2026-01-17 02:04:57 [HTTP]: GET /api/professores
2026-01-17 02:04:57 [DEBUG]: Query executada em 222ms
2026-01-17 02:04:57 [HTTP]: GET /api/professores
2026-01-17 02:04:57 [DEBUG]: Query executada em 230ms
2026-01-17 02:04:57 [DEBUG]: Query executada em 235ms
2026-01-17 02:04:57 [HTTP]: GET /api/alunos
2026-01-17 02:04:57 [HTTP]: GET /api/notas
2026-01-17 02:04:57 [DEBUG]: Query executada em 219ms
2026-01-17 02:04:57 [DEBUG]: Query executada em 225ms
2026-01-17 02:04:57 [DEBUG]: Query executada em 227ms
2026-01-17 02:04:59 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:04:59 [DEBUG]: Query executada em 226ms
2026-01-17 02:04:59 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:04:59 [DEBUG]: Query executada em 225ms
2026-01-17 02:05:02 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:05:02 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:02 [HTTP]: GET /api/alunos
2026-01-17 02:05:03 [DEBUG]: Query executada em 220ms
2026-01-17 02:05:03 [HTTP]: GET /api/alunos
2026-01-17 02:05:03 [DEBUG]: Query executada em 228ms
2026-01-17 02:05:03 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:05:03 [DEBUG]: Query executada em 232ms
2026-01-17 02:05:03 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:03 [DEBUG]: Query executada em 227ms
2026-01-17 02:05:03 [DEBUG]: Query executada em 228ms
2026-01-17 02:05:03 [DEBUG]: Query executada em 230ms
2026-01-17 02:05:03 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:05:03 [DEBUG]: Query executada em 226ms
2026-01-17 02:05:03 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:05:04 [DEBUG]: Query executada em 228ms
2026-01-17 02:05:04 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:05:04 [DEBUG]: Query executada em 231ms
2026-01-17 02:05:04 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:05:05 [DEBUG]: Query executada em 229ms
2026-01-17 02:05:05 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:05:05 [HTTP]: GET /api/professores
2026-01-17 02:05:05 [DEBUG]: Query executada em 226ms
2026-01-17 02:05:05 [DEBUG]: Query executada em 227ms
2026-01-17 02:05:05 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:05:05 [HTTP]: GET /api/professores
2026-01-17 02:05:05 [DEBUG]: Query executada em 228ms
2026-01-17 02:05:05 [DEBUG]: Query executada em 225ms
2026-01-17 02:05:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:06 [DEBUG]: Query executada em 224ms
2026-01-17 02:05:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:06 [DEBUG]: Query executada em 227ms
2026-01-17 02:05:21 [HTTP]: PUT /api/financeiro/planos/122b78ac-1585-4aca-ab6c-43448dedec97
2026-01-17 02:05:23 [DEBUG]: Query executada em 1854ms
2026-01-17 02:05:23 [DEBUG]: Query executada em 220ms
2026-01-17 02:05:23 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:23 [DEBUG]: Query executada em 225ms
2026-01-17 02:05:37 [HTTP]: PUT /api/financeiro/planos/ccb45156-d24f-4b18-be6b-050f70713b99
2026-01-17 02:05:38 [DEBUG]: Query executada em 1813ms
2026-01-17 02:05:39 [DEBUG]: Query executada em 224ms
2026-01-17 02:05:39 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:39 [DEBUG]: Query executada em 223ms
2026-01-17 02:05:43 [HTTP]: PUT /api/financeiro/planos/b50448ba-ff2a-42db-950d-091ac67c1f27
2026-01-17 02:05:43 [DEBUG]: Query executada em 229ms
2026-01-17 02:05:44 [DEBUG]: Query executada em 223ms
2026-01-17 02:05:44 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:05:44 [DEBUG]: Query executada em 223ms
2026-01-17 02:05:47 [HTTP]: GET /api/professores
2026-01-17 02:05:47 [DEBUG]: Query executada em 226ms
2026-01-17 02:05:47 [HTTP]: GET /api/professores
2026-01-17 02:05:47 [DEBUG]: Query executada em 221ms
2026-01-17 02:05:58 [HTTP]: POST /api/professores
2026-01-17 02:06:01 [ERROR]: Erro ao criar professor null value in column "data_contratacao" of relation "funcionarios" violates not-null constraint {"length":486,"name":"error","severity":"ERROR","code":"23502","detail":"Failing row contains (8e122f8d-d2f6-4218-a4ca-d95e1cce927d, Izabelle Cristhine Rilder, 03554889148, null, null, 26999992600, izabelle@gmail.com, RUA AT19 UNIDADE 305, 07, null, null, null, Professor, 2000.00, null, null, t, null, 2026-01-17 05:05:36.761823, 2026-01-17 05:05:36.761823).","schema":"public","table":"funcionarios","column":"data_contratacao","file":"execMain.c","line":"2022","routine":"ExecConstraints"}
error: null value in column "data_contratacao" of relation "funcionarios" violates not-null constraint
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg\lib\client.js:588:17
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at ProfessorService.criar (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\professorService.ts:15:7)
    at criar (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\professorController.ts:9:25)
2026-01-17 02:07:27 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:07:27 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:07:27 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:07:27 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:07:27 [INFO]: Migrations executadas com sucesso
2026-01-17 02:07:27 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:07:27 [INFO]: Ambiente: development
2026-01-17 02:07:33 [HTTP]: POST /api/auth/login
2026-01-17 02:07:33 [DEBUG]: Query executada em 229ms
2026-01-17 02:07:33 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:07:33 [HTTP]: POST /api/professores
2026-01-17 02:07:34 [INFO]: Professor criado: Izabelle Cristhine Rilder
2026-01-17 02:07:36 [DEBUG]: Query executada em 1911ms
2026-01-17 02:07:36 [DEBUG]: Query executada em 230ms
2026-01-17 02:07:40 [HTTP]: POST /api/auth/login
2026-01-17 02:07:40 [DEBUG]: Query executada em 231ms
2026-01-17 02:07:41 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:07:41 [HTTP]: POST /api/professores
2026-01-17 02:07:41 [INFO]: Professor criado: Maria Silva
2026-01-17 02:07:42 [DEBUG]: Query executada em 227ms
2026-01-17 02:07:42 [DEBUG]: Query executada em 229ms
2026-01-17 02:08:09 [HTTP]: GET /api/professores
2026-01-17 02:08:11 [DEBUG]: Query executada em 1842ms
2026-01-17 02:08:11 [HTTP]: GET /api/professores
2026-01-17 02:08:11 [DEBUG]: Query executada em 231ms
2026-01-17 02:08:20 [HTTP]: GET /api/professores
2026-01-17 02:08:20 [HTTP]: GET /api/turmas
2026-01-17 02:08:20 [DEBUG]: Query executada em 227ms
2026-01-17 02:08:20 [HTTP]: GET /api/professores
2026-01-17 02:08:20 [DEBUG]: Query executada em 229ms
2026-01-17 02:08:22 [DEBUG]: Query executada em 1829ms
2026-01-17 02:08:22 [HTTP]: GET /api/turmas
2026-01-17 02:08:22 [DEBUG]: Query executada em 228ms
2026-01-17 02:08:26 [HTTP]: GET /api/escola
2026-01-17 02:08:26 [DEBUG]: Query executada em 225ms
2026-01-17 02:08:26 [HTTP]: GET /api/escola
2026-01-17 02:08:26 [DEBUG]: Query executada em 226ms
2026-01-17 02:08:47 [HTTP]: PUT /api/escola
2026-01-17 02:08:48 [DEBUG]: Query executada em 1817ms
2026-01-17 02:08:49 [DEBUG]: Query executada em 229ms
2026-01-17 02:08:49 [INFO]: Escola atualizada
2026-01-17 02:08:49 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:51 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:08:52 [DEBUG]: Query executada em 226ms
2026-01-17 02:08:52 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:52 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:52 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:52 [DEBUG]: Query executada em 226ms
2026-01-17 02:08:53 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:53 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:53 [DEBUG]: Query executada em 227ms
2026-01-17 02:08:53 [DEBUG]: Query executada em 226ms
2026-01-17 02:08:54 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:54 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:54 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:54 [DEBUG]: Query executada em 226ms
2026-01-17 02:08:54 [DEBUG]: Query executada em 228ms
2026-01-17 02:08:55 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:55 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:55 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:55 [DEBUG]: Query executada em 227ms
2026-01-17 02:08:56 [DEBUG]: Query executada em 221ms
2026-01-17 02:08:56 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:56 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 02:08:56 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:56 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:57 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:57 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:57 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:57 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:57 [DEBUG]: Query executada em 229ms
2026-01-17 02:08:58 [DEBUG]: Query executada em 221ms
2026-01-17 02:08:58 [DEBUG]: Query executada em 223ms
2026-01-17 02:08:58 [HTTP]: GET /api/escola
2026-01-17 02:08:58 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:58 [DEBUG]: Query executada em 224ms
2026-01-17 02:08:59 [DEBUG]: Query executada em 221ms
2026-01-17 02:08:59 [DEBUG]: Query executada em 221ms
2026-01-17 02:08:59 [DEBUG]: Query executada em 225ms
2026-01-17 02:08:59 [DEBUG]: Query executada em 222ms
2026-01-17 02:08:59 [DEBUG]: Query executada em 226ms
2026-01-17 02:09:00 [DEBUG]: Query executada em 223ms
2026-01-17 02:09:00 [DEBUG]: Query executada em 1838ms
2026-01-17 02:09:00 [HTTP]: GET /api/escola
2026-01-17 02:09:00 [DEBUG]: Query executada em 232ms
2026-01-17 02:09:00 [DEBUG]: Query executada em 228ms
2026-01-17 02:09:00 [DEBUG]: Query executada em 223ms
2026-01-17 02:09:00 [DEBUG]: Query executada em 222ms
2026-01-17 02:09:01 [HTTP]: GET /api/usuarios
2026-01-17 02:09:01 [DEBUG]: Query executada em 222ms
2026-01-17 02:09:01 [HTTP]: GET /api/usuarios
2026-01-17 02:09:01 [DEBUG]: Query executada em 221ms
2026-01-17 02:09:02 [HTTP]: GET /api/professores
2026-01-17 02:09:02 [DEBUG]: Query executada em 225ms
2026-01-17 02:09:02 [HTTP]: GET /api/professores
2026-01-17 02:09:03 [DEBUG]: Query executada em 227ms
2026-01-17 02:09:03 [HTTP]: GET /api/turmas
2026-01-17 02:09:03 [HTTP]: GET /api/professores
2026-01-17 02:09:03 [DEBUG]: Query executada em 236ms
2026-01-17 02:09:03 [DEBUG]: Query executada em 236ms
2026-01-17 02:09:03 [HTTP]: GET /api/turmas
2026-01-17 02:09:03 [HTTP]: GET /api/professores
2026-01-17 02:09:04 [DEBUG]: Query executada em 225ms
2026-01-17 02:09:04 [DEBUG]: Query executada em 229ms
2026-01-17 02:09:26 [HTTP]: POST /api/turmas
2026-01-17 02:11:03 [HTTP]: GET /api/turmas
2026-01-17 02:11:03 [HTTP]: GET /api/professores
2026-01-17 02:11:05 [DEBUG]: Query executada em 2045ms
2026-01-17 02:11:05 [HTTP]: GET /api/turmas
2026-01-17 02:11:05 [DEBUG]: Query executada em 2049ms
2026-01-17 02:11:05 [HTTP]: GET /api/professores
2026-01-17 02:11:05 [DEBUG]: Query executada em 224ms
2026-01-17 02:11:05 [DEBUG]: Query executada em 228ms
2026-01-17 02:11:09 [HTTP]: POST /api/auth/login
2026-01-17 02:11:09 [DEBUG]: Query executada em 225ms
2026-01-17 02:11:09 [INFO]: Login realizado: admin@escola.com
2026-01-17 02:11:09 [HTTP]: POST /api/turmas
2026-01-17 02:11:09 [DEBUG]: Query executada em 231ms
2026-01-17 02:11:09 [INFO]: Turma criada: Maternal
2026-01-17 02:11:09 [DEBUG]: Query executada em 233ms
2026-01-17 02:11:27 [HTTP]: GET /api/turmas
2026-01-17 02:11:27 [HTTP]: GET /api/professores
2026-01-17 02:11:29 [DEBUG]: Query executada em 1825ms
2026-01-17 02:11:29 [HTTP]: GET /api/turmas
2026-01-17 02:11:29 [DEBUG]: Query executada em 1831ms
2026-01-17 02:11:29 [HTTP]: GET /api/professores
2026-01-17 02:11:29 [DEBUG]: Query executada em 222ms
2026-01-17 02:11:30 [DEBUG]: Query executada em 224ms
2026-01-17 02:11:35 [HTTP]: GET /api/responsaveis
2026-01-17 02:11:35 [DEBUG]: Query executada em 222ms
2026-01-17 02:11:35 [HTTP]: GET /api/responsaveis
2026-01-17 02:11:35 [DEBUG]: Query executada em 226ms
2026-01-17 02:11:58 [HTTP]: POST /api/responsaveis
2026-01-17 02:12:00 [DEBUG]: Query executada em 1838ms
2026-01-17 02:12:00 [DEBUG]: Query executada em 230ms
2026-01-17 02:12:00 [INFO]: Responsável criado: YURI RILDER MARTINS 75157080182
2026-01-17 02:12:01 [DEBUG]: Query executada em 228ms
2026-01-17 02:12:01 [HTTP]: GET /api/responsaveis
2026-01-17 02:12:01 [DEBUG]: Query executada em 231ms
2026-01-17 02:12:04 [HTTP]: GET /api/alunos
2026-01-17 02:12:04 [HTTP]: GET /api/responsaveis
2026-01-17 02:12:04 [HTTP]: GET /api/turmas
2026-01-17 02:12:04 [DEBUG]: Query executada em 228ms
2026-01-17 02:12:04 [HTTP]: GET /api/alunos
2026-01-17 02:12:05 [DEBUG]: Query executada em 229ms
2026-01-17 02:12:06 [DEBUG]: Query executada em 1852ms
2026-01-17 02:12:06 [HTTP]: GET /api/responsaveis
2026-01-17 02:12:06 [DEBUG]: Query executada em 1877ms
2026-01-17 02:12:06 [HTTP]: GET /api/turmas
2026-01-17 02:12:06 [DEBUG]: Query executada em 226ms
2026-01-17 02:12:06 [DEBUG]: Query executada em 227ms
2026-01-17 02:13:03 [HTTP]: POST /api/alunos
2026-01-17 02:17:44 [HTTP]: GET /api/alunos
2026-01-17 02:17:44 [HTTP]: GET /api/responsaveis
2026-01-17 02:17:44 [HTTP]: GET /api/turmas
2026-01-17 02:17:46 [DEBUG]: Query executada em 2015ms
2026-01-17 02:17:46 [HTTP]: GET /api/responsaveis
2026-01-17 02:17:47 [DEBUG]: Query executada em 221ms
2026-01-17 02:17:47 [DEBUG]: Query executada em 2435ms
2026-01-17 02:17:47 [HTTP]: GET /api/alunos
2026-01-17 02:17:47 [DEBUG]: Query executada em 2503ms
2026-01-17 02:17:47 [HTTP]: GET /api/turmas
2026-01-17 02:17:47 [DEBUG]: Query executada em 271ms
2026-01-17 02:17:47 [DEBUG]: Query executada em 280ms
2026-01-17 02:19:33 [HTTP]: GET /api/alunos
2026-01-17 02:19:33 [HTTP]: GET /api/responsaveis
2026-01-17 02:19:33 [HTTP]: GET /api/turmas
2026-01-17 02:19:35 [DEBUG]: Query executada em 1800ms
2026-01-17 02:19:35 [DEBUG]: Query executada em 1820ms
2026-01-17 02:19:35 [DEBUG]: Query executada em 1821ms
2026-01-17 02:19:51 [HTTP]: GET /api/alunos
2026-01-17 02:19:51 [HTTP]: GET /api/responsaveis
2026-01-17 02:19:51 [HTTP]: GET /api/turmas
2026-01-17 02:19:53 [DEBUG]: Query executada em 1800ms
2026-01-17 02:19:53 [DEBUG]: Query executada em 1805ms
2026-01-17 02:19:53 [DEBUG]: Query executada em 1809ms
2026-01-17 02:20:07 [HTTP]: GET /api/alunos
2026-01-17 02:20:07 [HTTP]: GET /api/responsaveis
2026-01-17 02:20:07 [HTTP]: GET /api/turmas
2026-01-17 02:20:08 [DEBUG]: Query executada em 1838ms
2026-01-17 02:20:08 [DEBUG]: Query executada em 1809ms
2026-01-17 02:20:09 [DEBUG]: Query executada em 1855ms
2026-01-17 02:20:26 [HTTP]: GET /api/alunos
2026-01-17 02:20:26 [HTTP]: GET /api/responsaveis
2026-01-17 02:20:26 [HTTP]: GET /api/turmas
2026-01-17 02:20:28 [DEBUG]: Query executada em 1788ms
2026-01-17 02:20:28 [DEBUG]: Query executada em 1825ms
2026-01-17 02:20:28 [DEBUG]: Query executada em 1828ms
2026-01-17 02:21:10 [HTTP]: GET /api/alunos
2026-01-17 02:21:10 [HTTP]: GET /api/responsaveis
2026-01-17 02:21:10 [HTTP]: GET /api/turmas
2026-01-17 02:21:12 [DEBUG]: Query executada em 1827ms
2026-01-17 02:21:12 [DEBUG]: Query executada em 1807ms
2026-01-17 02:21:12 [HTTP]: GET /api/alunos
2026-01-17 02:21:12 [HTTP]: GET /api/responsaveis
2026-01-17 02:21:12 [DEBUG]: Query executada em 1862ms
2026-01-17 02:21:12 [HTTP]: GET /api/turmas
2026-01-17 02:21:12 [DEBUG]: Query executada em 221ms
2026-01-17 02:21:12 [DEBUG]: Query executada em 226ms
2026-01-17 02:21:12 [DEBUG]: Query executada em 224ms
2026-01-17 02:21:44 [HTTP]: POST /api/alunos
2026-01-17 02:21:46 [DEBUG]: Query executada em 1793ms
2026-01-17 02:21:46 [DEBUG]: Query executada em 224ms
2026-01-17 02:21:46 [DEBUG]: Query executada em 228ms
2026-01-17 02:21:46 [INFO]: Aluno criado: Samuel Henrique Rilder Toledo Martins
2026-01-17 02:21:46 [DEBUG]: Query executada em 219ms
2026-01-17 02:21:46 [HTTP]: GET /api/alunos
2026-01-17 02:21:46 [HTTP]: GET /api/responsaveis
2026-01-17 02:21:46 [HTTP]: GET /api/turmas
2026-01-17 02:21:47 [DEBUG]: Query executada em 222ms
2026-01-17 02:21:48 [DEBUG]: Query executada em 1826ms
2026-01-17 02:21:48 [DEBUG]: Query executada em 1827ms
2026-01-17 02:22:06 [HTTP]: GET /api/notas
2026-01-17 02:22:06 [HTTP]: GET /api/professores
2026-01-17 02:22:06 [HTTP]: GET /api/alunos
2026-01-17 02:22:08 [DEBUG]: Query executada em 1805ms
2026-01-17 02:22:08 [HTTP]: GET /api/professores
2026-01-17 02:22:08 [DEBUG]: Query executada em 1814ms
2026-01-17 02:22:08 [HTTP]: GET /api/notas
2026-01-17 02:22:08 [DEBUG]: Query executada em 1853ms
2026-01-17 02:22:08 [HTTP]: GET /api/alunos
2026-01-17 02:22:08 [DEBUG]: Query executada em 223ms
2026-01-17 02:22:08 [DEBUG]: Query executada em 229ms
2026-01-17 02:22:08 [DEBUG]: Query executada em 226ms
2026-01-17 02:22:13 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:22:13 [HTTP]: GET /api/alunos
2026-01-17 02:22:13 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:22:13 [DEBUG]: Query executada em 230ms
2026-01-17 02:22:13 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:22:13 [DEBUG]: Query executada em 229ms
2026-01-17 02:22:13 [DEBUG]: Query executada em 233ms
2026-01-17 02:22:13 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:22:13 [HTTP]: GET /api/alunos
2026-01-17 02:22:13 [DEBUG]: Query executada em 225ms
2026-01-17 02:22:13 [DEBUG]: Query executada em 223ms
2026-01-17 02:22:13 [DEBUG]: Query executada em 224ms
2026-01-17 02:23:02 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 02:23:11 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 02:23:47 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 02:32:55 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:32:55 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:32:55 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:32:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:32:55 [INFO]: Migrations executadas com sucesso
2026-01-17 02:32:55 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:32:55 [INFO]: Ambiente: development
2026-01-17 02:35:22 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:22 [HTTP]: GET /api/alunos
2026-01-17 02:35:22 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:24 [DEBUG]: Query executada em 1806ms
2026-01-17 02:35:24 [DEBUG]: Query executada em 1810ms
2026-01-17 02:35:24 [DEBUG]: Query executada em 1814ms
2026-01-17 02:35:27 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:27 [HTTP]: GET /api/alunos
2026-01-17 02:35:27 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:27 [DEBUG]: Query executada em 223ms
2026-01-17 02:35:27 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:27 [DEBUG]: Query executada em 224ms
2026-01-17 02:35:27 [DEBUG]: Query executada em 229ms
2026-01-17 02:35:27 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:27 [HTTP]: GET /api/alunos
2026-01-17 02:35:27 [DEBUG]: Query executada em 226ms
2026-01-17 02:35:27 [DEBUG]: Query executada em 221ms
2026-01-17 02:35:27 [DEBUG]: Query executada em 220ms
2026-01-17 02:35:34 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:34 [HTTP]: GET /api/alunos
2026-01-17 02:35:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:34 [DEBUG]: Query executada em 223ms
2026-01-17 02:35:34 [DEBUG]: Query executada em 224ms
2026-01-17 02:35:34 [DEBUG]: Query executada em 227ms
2026-01-17 02:35:42 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:42 [HTTP]: GET /api/alunos
2026-01-17 02:35:42 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:42 [DEBUG]: Query executada em 222ms
2026-01-17 02:35:42 [DEBUG]: Query executada em 225ms
2026-01-17 02:35:42 [DEBUG]: Query executada em 220ms
2026-01-17 02:35:50 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:35:50 [HTTP]: GET /api/alunos
2026-01-17 02:35:50 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:35:50 [DEBUG]: Query executada em 220ms
2026-01-17 02:35:50 [DEBUG]: Query executada em 222ms
2026-01-17 02:35:50 [DEBUG]: Query executada em 222ms
2026-01-17 02:40:18 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:40:18 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:40:18 [HTTP]: GET /api/alunos
2026-01-17 02:40:20 [DEBUG]: Query executada em 1907ms
2026-01-17 02:40:20 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:40:20 [DEBUG]: Query executada em 1931ms
2026-01-17 02:40:20 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:40:20 [DEBUG]: Query executada em 1945ms
2026-01-17 02:40:20 [HTTP]: GET /api/alunos
2026-01-17 02:40:20 [DEBUG]: Query executada em 220ms
2026-01-17 02:40:20 [DEBUG]: Query executada em 223ms
2026-01-17 02:40:20 [DEBUG]: Query executada em 228ms
2026-01-17 02:40:59 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 02:41:01 [DEBUG]: Query executada em 1860ms
2026-01-17 02:41:01 [DEBUG]: Query executada em 219ms
2026-01-17 02:41:05 [INFO]: Matrícula realizada para aluno Samuel Henrique Rilder Toledo Martins
2026-01-17 02:41:06 [DEBUG]: Query executada em 1791ms
2026-01-17 02:41:06 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:41:06 [HTTP]: GET /api/alunos
2026-01-17 02:41:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:41:07 [DEBUG]: Query executada em 224ms
2026-01-17 02:41:07 [DEBUG]: Query executada em 223ms
2026-01-17 02:41:08 [DEBUG]: Query executada em 1804ms
2026-01-17 02:41:20 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:41:20 [HTTP]: GET /api/alunos
2026-01-17 02:41:20 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:41:21 [DEBUG]: Query executada em 1766ms
2026-01-17 02:41:21 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:41:21 [DEBUG]: Query executada em 1832ms
2026-01-17 02:41:21 [HTTP]: GET /api/alunos
2026-01-17 02:41:21 [DEBUG]: Query executada em 1844ms
2026-01-17 02:41:21 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:41:22 [DEBUG]: Query executada em 219ms
2026-01-17 02:41:22 [DEBUG]: Query executada em 223ms
2026-01-17 02:41:22 [DEBUG]: Query executada em 225ms
2026-01-17 02:46:22 [HTTP]: GET /api/alunos
2026-01-17 02:46:22 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:22 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:24 [DEBUG]: Query executada em 1947ms
2026-01-17 02:46:24 [DEBUG]: Query executada em 1946ms
2026-01-17 02:46:24 [HTTP]: GET /api/alunos
2026-01-17 02:46:24 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:24 [DEBUG]: Query executada em 1987ms
2026-01-17 02:46:24 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:25 [DEBUG]: Query executada em 224ms
2026-01-17 02:46:25 [DEBUG]: Query executada em 222ms
2026-01-17 02:46:25 [DEBUG]: Query executada em 228ms
2026-01-17 02:46:34 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:34 [HTTP]: GET /api/alunos
2026-01-17 02:46:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:34 [DEBUG]: Query executada em 227ms
2026-01-17 02:46:34 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:34 [DEBUG]: Query executada em 219ms
2026-01-17 02:46:34 [HTTP]: GET /api/alunos
2026-01-17 02:46:34 [DEBUG]: Query executada em 222ms
2026-01-17 02:46:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:34 [DEBUG]: Query executada em 227ms
2026-01-17 02:46:34 [DEBUG]: Query executada em 218ms
2026-01-17 02:46:34 [DEBUG]: Query executada em 221ms
2026-01-17 02:46:43 [HTTP]: GET /api/alunos
2026-01-17 02:46:43 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:43 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:43 [DEBUG]: Query executada em 222ms
2026-01-17 02:46:43 [DEBUG]: Query executada em 226ms
2026-01-17 02:46:43 [DEBUG]: Query executada em 234ms
2026-01-17 02:46:56 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:46:56 [HTTP]: GET /api/alunos
2026-01-17 02:46:56 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:46:58 [DEBUG]: Query executada em 1765ms
2026-01-17 02:46:58 [DEBUG]: Query executada em 1881ms
2026-01-17 02:46:58 [DEBUG]: Query executada em 1939ms
2026-01-17 02:47:05 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:47:05 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:47:05 [HTTP]: GET /api/alunos
2026-01-17 02:47:05 [DEBUG]: Query executada em 228ms
2026-01-17 02:47:05 [DEBUG]: Query executada em 231ms
2026-01-17 02:47:05 [DEBUG]: Query executada em 234ms
2026-01-17 02:48:20 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:48:20 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:48:20 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:48:21 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:48:21 [INFO]: Migrations executadas com sucesso
2026-01-17 02:48:21 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:48:21 [INFO]: Ambiente: development
2026-01-17 02:48:37 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:48:37 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:48:37 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:48:37 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:48:37 [INFO]: Migrations executadas com sucesso
2026-01-17 02:48:37 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:48:37 [INFO]: Ambiente: development
2026-01-17 02:49:10 [HTTP]: GET /api/alunos
2026-01-17 02:49:10 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:49:10 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:12 [DEBUG]: Query executada em 1823ms
2026-01-17 02:49:12 [HTTP]: GET /api/alunos
2026-01-17 02:49:12 [DEBUG]: Query executada em 1817ms
2026-01-17 02:49:12 [DEBUG]: Query executada em 1804ms
2026-01-17 02:49:12 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:49:12 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:12 [DEBUG]: Query executada em 220ms
2026-01-17 02:49:12 [DEBUG]: Query executada em 225ms
2026-01-17 02:49:12 [DEBUG]: Query executada em 227ms
2026-01-17 02:49:16 [HTTP]: POST /api/financeiro/mensalidades/gerar
2026-01-17 02:49:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:36 [DEBUG]: Query executada em 1863ms
2026-01-17 02:49:36 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:36 [DEBUG]: Query executada em 223ms
2026-01-17 02:49:50 [HTTP]: POST /api/financeiro/planos
2026-01-17 02:49:51 [DEBUG]: Query executada em 1849ms
2026-01-17 02:49:51 [INFO]: Plano criado: teste
2026-01-17 02:49:52 [DEBUG]: Query executada em 220ms
2026-01-17 02:49:52 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:52 [DEBUG]: Query executada em 222ms
2026-01-17 02:49:57 [HTTP]: DELETE /api/financeiro/planos/eafae3ab-e085-42e4-8fcf-9cafa76f7f64
2026-01-17 02:49:57 [DEBUG]: Query executada em 225ms
2026-01-17 02:49:57 [INFO]: Plano deletado: eafae3ab-e085-42e4-8fcf-9cafa76f7f64
2026-01-17 02:49:57 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:49:57 [DEBUG]: Query executada em 222ms
2026-01-17 02:50:00 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:50:00 [DEBUG]: Query executada em 221ms
2026-01-17 02:50:00 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:50:00 [DEBUG]: Query executada em 227ms
2026-01-17 02:50:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:50:06 [DEBUG]: Query executada em 220ms
2026-01-17 02:50:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:50:06 [DEBUG]: Query executada em 221ms
2026-01-17 02:50:08 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:50:09 [DEBUG]: Query executada em 225ms
2026-01-17 02:50:09 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:50:09 [DEBUG]: Query executada em 221ms
2026-01-17 02:50:11 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:50:11 [HTTP]: GET /api/professores
2026-01-17 02:50:11 [DEBUG]: Query executada em 221ms
2026-01-17 02:50:11 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:50:11 [DEBUG]: Query executada em 220ms
2026-01-17 02:50:13 [DEBUG]: Query executada em 1774ms
2026-01-17 02:50:13 [HTTP]: GET /api/professores
2026-01-17 02:50:13 [DEBUG]: Query executada em 220ms
2026-01-17 02:50:14 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:50:14 [DEBUG]: Query executada em 224ms
2026-01-17 02:50:14 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:50:14 [DEBUG]: Query executada em 221ms
2026-01-17 02:50:48 [HTTP]: POST /api/financeiro/despesas
2026-01-17 02:50:50 [ERROR]: Erro na query: null value in column "data_vencimento" of relation "despesas" violates not-null constraint
2026-01-17 02:50:50 [ERROR]: Erro ao criar despesa null value in column "data_vencimento" of relation "despesas" violates not-null constraint {"length":371,"name":"error","severity":"ERROR","code":"23502","detail":"Failing row contains (450d92d1-57e8-4e2d-ae29-0938cfc33dec, banner, MANUTENCAO, 350.00, null, null, PENDENTE, grafica, null, 2026-01-17 05:50:26.364941, 2026-01-17 05:50:26.364941).","schema":"public","table":"despesas","column":"data_vencimento","file":"execMain.c","line":"2022","routine":"ExecConstraints"}
error: null value in column "data_vencimento" of relation "despesas" violates not-null constraint
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at query (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\connection.ts:30:20)
    at FinanceiroService.criarDespesa (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\financeiroService.ts:286:5)
    at criarDespesa (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\financeiroController.ts:163:23)
2026-01-17 02:51:28 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:51:30 [DEBUG]: Query executada em 1901ms
2026-01-17 02:51:30 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:51:30 [DEBUG]: Query executada em 228ms
2026-01-17 02:51:31 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:51:31 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:51:31 [HTTP]: GET /api/alunos
2026-01-17 02:51:31 [DEBUG]: Query executada em 229ms
2026-01-17 02:51:31 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:51:32 [DEBUG]: Query executada em 228ms
2026-01-17 02:51:33 [DEBUG]: Query executada em 1816ms
2026-01-17 02:51:33 [HTTP]: GET /api/alunos
2026-01-17 02:51:33 [DEBUG]: Query executada em 1840ms
2026-01-17 02:51:33 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:51:33 [DEBUG]: Query executada em 223ms
2026-01-17 02:51:33 [DEBUG]: Query executada em 219ms
2026-01-17 02:51:34 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:51:34 [DEBUG]: Query executada em 222ms
2026-01-17 02:51:34 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:51:35 [DEBUG]: Query executada em 222ms
2026-01-17 02:52:28 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:52:29 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:52:29 [HTTP]: GET /api/alunos
2026-01-17 02:52:30 [DEBUG]: Query executada em 1799ms
2026-01-17 02:52:30 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:52:30 [DEBUG]: Query executada em 1839ms
2026-01-17 02:52:30 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:52:30 [DEBUG]: Query executada em 1862ms
2026-01-17 02:52:30 [HTTP]: GET /api/alunos
2026-01-17 02:52:31 [DEBUG]: Query executada em 223ms
2026-01-17 02:52:31 [DEBUG]: Query executada em 230ms
2026-01-17 02:52:31 [DEBUG]: Query executada em 223ms
2026-01-17 02:52:32 [HTTP]: GET /api/professores
2026-01-17 02:52:32 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:52:32 [DEBUG]: Query executada em 223ms
2026-01-17 02:52:32 [HTTP]: GET /api/professores
2026-01-17 02:52:32 [DEBUG]: Query executada em 229ms
2026-01-17 02:52:32 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:52:32 [DEBUG]: Query executada em 224ms
2026-01-17 02:52:32 [DEBUG]: Query executada em 227ms
2026-01-17 02:54:17 [HTTP]: POST /api/financeiro/pagamentos-funcionarios
2026-01-17 02:54:19 [ERROR]: Erro na query: null value in column "funcionario_id" of relation "pagamentos_funcionarios" violates not-null constraint
2026-01-17 02:54:19 [ERROR]: Erro ao criar pagamento null value in column "funcionario_id" of relation "pagamentos_funcionarios" violates not-null constraint {"length":397,"name":"error","severity":"ERROR","code":"23502","detail":"Failing row contains (6afa667b-e7d4-4314-aae6-03346a1e2360, null, null, null, null, 0.00, 0.00, NaN, null, PENDENTE, null, 2026-01-17 05:53:55.463159, 2026-01-17 05:53:55.463159).","schema":"public","table":"pagamentos_funcionarios","column":"funcionario_id","file":"execMain.c","line":"2022","routine":"ExecConstraints"}
error: null value in column "funcionario_id" of relation "pagamentos_funcionarios" violates not-null constraint
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at query (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\connection.ts:30:20)
    at FinanceiroService.criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\financeiroService.ts:369:5)
    at criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\financeiroController.ts:228:25)
2026-01-17 02:56:05 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:56:06 [HTTP]: GET /api/professores
2026-01-17 02:56:07 [DEBUG]: Query executada em 1809ms
2026-01-17 02:56:07 [DEBUG]: Query executada em 1805ms
2026-01-17 02:56:31 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:56:31 [HTTP]: GET /api/professores
2026-01-17 02:56:33 [DEBUG]: Query executada em 2033ms
2026-01-17 02:56:33 [DEBUG]: Query executada em 2043ms
2026-01-17 02:56:39 [HTTP]: GET /api/professores
2026-01-17 02:56:39 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:56:39 [DEBUG]: Query executada em 231ms
2026-01-17 02:56:39 [DEBUG]: Query executada em 230ms
2026-01-17 02:57:38 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:57:38 [HTTP]: GET /api/professores
2026-01-17 02:57:40 [DEBUG]: Query executada em 1821ms
2026-01-17 02:57:40 [DEBUG]: Query executada em 1833ms
2026-01-17 02:58:42 [INFO]: Encerrando servidor...
2026-01-17 02:58:51 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 02:58:51 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 02:58:51 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 02:58:52 [INFO]: Migrations executadas com sucesso!
2026-01-17 02:58:52 [INFO]: Migrations executadas com sucesso
2026-01-17 02:58:52 [INFO]: Servidor rodando na porta 3001
2026-01-17 02:58:52 [INFO]: Ambiente: development
2026-01-17 02:58:55 [HTTP]: GET /api/professores
2026-01-17 02:58:55 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:58:56 [DEBUG]: Query executada em 227ms
2026-01-17 02:58:56 [HTTP]: GET /api/professores
2026-01-17 02:58:56 [DEBUG]: Query executada em 224ms
2026-01-17 02:58:57 [DEBUG]: Query executada em 1907ms
2026-01-17 02:58:57 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 02:58:58 [DEBUG]: Query executada em 236ms
2026-01-17 02:59:01 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:59:01 [DEBUG]: Query executada em 231ms
2026-01-17 02:59:01 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:59:01 [DEBUG]: Query executada em 225ms
2026-01-17 02:59:02 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:59:02 [HTTP]: GET /api/alunos
2026-01-17 02:59:02 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:59:02 [DEBUG]: Query executada em 222ms
2026-01-17 02:59:02 [HTTP]: GET /api/alunos
2026-01-17 02:59:02 [DEBUG]: Query executada em 234ms
2026-01-17 02:59:02 [HTTP]: GET /api/financeiro/planos
2026-01-17 02:59:03 [DEBUG]: Query executada em 240ms
2026-01-17 02:59:03 [DEBUG]: Query executada em 240ms
2026-01-17 02:59:04 [DEBUG]: Query executada em 1851ms
2026-01-17 02:59:04 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 02:59:04 [DEBUG]: Query executada em 221ms
2026-01-17 02:59:27 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:59:29 [DEBUG]: Query executada em 1855ms
2026-01-17 02:59:29 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 02:59:29 [DEBUG]: Query executada em 227ms
2026-01-17 02:59:41 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:59:43 [DEBUG]: Query executada em 1794ms
2026-01-17 02:59:43 [HTTP]: GET /api/financeiro/despesas
2026-01-17 02:59:43 [DEBUG]: Query executada em 218ms
2026-01-17 03:00:08 [HTTP]: POST /api/financeiro/despesas
2026-01-17 03:00:10 [DEBUG]: Query executada em 1794ms
2026-01-17 03:00:10 [INFO]: Despesa criada: banner
2026-01-17 03:00:10 [DEBUG]: Query executada em 219ms
2026-01-17 03:00:10 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:00:10 [DEBUG]: Query executada em 219ms
2026-01-17 03:00:15 [HTTP]: PUT /api/financeiro/despesas/97eca65c-5bae-48b9-aa77-3656fb659444/pagar
2026-01-17 03:00:21 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:00:21 [HTTP]: GET /api/professores
2026-01-17 03:00:23 [DEBUG]: Query executada em 1777ms
2026-01-17 03:00:23 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:00:23 [DEBUG]: Query executada em 1828ms
2026-01-17 03:00:23 [HTTP]: GET /api/professores
2026-01-17 03:00:23 [DEBUG]: Query executada em 220ms
2026-01-17 03:00:23 [DEBUG]: Query executada em 223ms
2026-01-17 03:00:36 [HTTP]: POST /api/financeiro/pagamentos-funcionarios
2026-01-17 03:00:37 [ERROR]: Erro na query: insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey"
2026-01-17 03:00:37 [ERROR]: Erro ao criar pagamento insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey" {"length":377,"name":"error","severity":"ERROR","code":"23503","detail":"Key (funcionario_id)=(17c09cea-66b9-4fe5-8766-b37be0eb4b26) is not present in table \"funcionarios\".","schema":"public","table":"pagamentos_funcionarios","constraint":"pagamentos_funcionarios_funcionario_id_fkey","file":"ri_triggers.c","line":"2599","routine":"ri_ReportViolation"}
error: insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey"
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at query (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\connection.ts:30:20)
    at FinanceiroService.criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\financeiroService.ts:369:5)
    at criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\financeiroController.ts:228:25)
2026-01-17 03:00:56 [HTTP]: POST /api/financeiro/pagamentos-funcionarios
2026-01-17 03:00:58 [ERROR]: Erro na query: insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey"
2026-01-17 03:00:58 [ERROR]: Erro ao criar pagamento insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey" {"length":377,"name":"error","severity":"ERROR","code":"23503","detail":"Key (funcionario_id)=(17c09cea-66b9-4fe5-8766-b37be0eb4b26) is not present in table \"funcionarios\".","schema":"public","table":"pagamentos_funcionarios","constraint":"pagamentos_funcionarios_funcionario_id_fkey","file":"ri_triggers.c","line":"2599","routine":"ri_ReportViolation"}
error: insert or update on table "pagamentos_funcionarios" violates foreign key constraint "pagamentos_funcionarios_funcionario_id_fkey"
    at C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\node_modules\pg-pool\index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at query (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\database\connection.ts:30:20)
    at FinanceiroService.criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\financeiroService.ts:369:5)
    at criarPagamentoFuncionario (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\financeiroController.ts:228:25)
2026-01-17 03:02:32 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:02:32 [HTTP]: GET /api/professores
2026-01-17 03:02:34 [DEBUG]: Query executada em 2042ms
2026-01-17 03:02:34 [DEBUG]: Query executada em 2075ms
2026-01-17 03:03:22 [INFO]: Encerrando servidor...
2026-01-17 03:03:45 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:03:45 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:03:45 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:03:45 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:03:45 [INFO]: Migrations executadas com sucesso
2026-01-17 03:03:45 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:03:45 [INFO]: Ambiente: development
2026-01-17 03:03:58 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:03:58 [HTTP]: GET /api/professores
2026-01-17 03:04:00 [DEBUG]: Query executada em 1817ms
2026-01-17 03:04:00 [DEBUG]: Query executada em 1826ms
2026-01-17 03:04:00 [HTTP]: GET /api/professores
2026-01-17 03:04:00 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:04:00 [DEBUG]: Query executada em 224ms
2026-01-17 03:04:00 [DEBUG]: Query executada em 224ms
2026-01-17 03:04:20 [HTTP]: POST /api/financeiro/pagamentos-funcionarios
2026-01-17 03:04:22 [DEBUG]: Query executada em 1817ms
2026-01-17 03:04:22 [INFO]: Pagamento criado para funcionário eab9223b-974b-4b32-92d2-f7b76c5f3346
2026-01-17 03:04:22 [DEBUG]: Query executada em 223ms
2026-01-17 03:04:22 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:04:22 [HTTP]: GET /api/professores
2026-01-17 03:04:23 [DEBUG]: Query executada em 223ms
2026-01-17 03:04:24 [DEBUG]: Query executada em 1772ms
2026-01-17 03:04:27 [HTTP]: PUT /api/financeiro/pagamentos-funcionarios/d176485e-88eb-45b6-b239-3fbbf3651de8/pagar
2026-01-17 03:05:40 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:05:42 [DEBUG]: Query executada em 1899ms
2026-01-17 03:05:42 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:05:42 [DEBUG]: Query executada em 220ms
2026-01-17 03:05:45 [HTTP]: PUT /api/financeiro/despesas/97eca65c-5bae-48b9-aa77-3656fb659444/pagar
2026-01-17 03:06:29 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:06:30 [DEBUG]: Query executada em 1813ms
2026-01-17 03:06:30 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:06:31 [DEBUG]: Query executada em 226ms
2026-01-17 03:06:51 [HTTP]: PUT /api/financeiro/mensalidades/c8be2163-54a0-48c4-a604-1a2450981606/pagar
2026-01-17 03:11:10 [HTTP]: GET /api/alunos
2026-01-17 03:11:10 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:11:10 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:11:13 [DEBUG]: Query executada em 2047ms
2026-01-17 03:11:13 [HTTP]: GET /api/alunos
2026-01-17 03:11:13 [DEBUG]: Query executada em 2065ms
2026-01-17 03:11:13 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:11:13 [DEBUG]: Query executada em 2093ms
2026-01-17 03:11:13 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:11:13 [DEBUG]: Query executada em 219ms
2026-01-17 03:11:13 [DEBUG]: Query executada em 225ms
2026-01-17 03:11:13 [DEBUG]: Query executada em 227ms
2026-01-17 03:11:25 [HTTP]: POST /api/financeiro/mensalidades/gerar
2026-01-17 03:15:33 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:15:33 [HTTP]: GET /api/alunos
2026-01-17 03:15:33 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:15:35 [DEBUG]: Query executada em 1789ms
2026-01-17 03:15:35 [DEBUG]: Query executada em 1789ms
2026-01-17 03:15:35 [DEBUG]: Query executada em 1828ms
2026-01-17 03:17:02 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:17:02 [HTTP]: GET /api/alunos
2026-01-17 03:17:02 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:17:04 [DEBUG]: Query executada em 1956ms
2026-01-17 03:17:04 [DEBUG]: Query executada em 1987ms
2026-01-17 03:17:04 [DEBUG]: Query executada em 2039ms
2026-01-17 03:17:09 [HTTP]: GET /api/alunos
2026-01-17 03:17:09 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:17:09 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:17:09 [DEBUG]: Query executada em 225ms
2026-01-17 03:17:09 [DEBUG]: Query executada em 229ms
2026-01-17 03:17:09 [DEBUG]: Query executada em 237ms
2026-01-17 03:17:13 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:17:13 [HTTP]: GET /api/alunos
2026-01-17 03:17:13 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:17:13 [DEBUG]: Query executada em 225ms
2026-01-17 03:17:13 [DEBUG]: Query executada em 231ms
2026-01-17 03:17:13 [DEBUG]: Query executada em 231ms
2026-01-17 03:20:46 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:20:47 [DEBUG]: Query executada em 1941ms
2026-01-17 03:20:47 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:20:48 [DEBUG]: Query executada em 225ms
2026-01-17 03:20:49 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:20:49 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:20:49 [HTTP]: GET /api/alunos
2026-01-17 03:20:50 [DEBUG]: Query executada em 225ms
2026-01-17 03:20:50 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:20:50 [DEBUG]: Query executada em 224ms
2026-01-17 03:20:51 [DEBUG]: Query executada em 1772ms
2026-01-17 03:20:51 [HTTP]: GET /api/alunos
2026-01-17 03:20:51 [DEBUG]: Query executada em 1839ms
2026-01-17 03:20:51 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:20:51 [DEBUG]: Query executada em 221ms
2026-01-17 03:20:52 [DEBUG]: Query executada em 229ms
2026-01-17 03:20:53 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:20:54 [DEBUG]: Query executada em 234ms
2026-01-17 03:20:54 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:20:54 [DEBUG]: Query executada em 227ms
2026-01-17 03:21:01 [HTTP]: POST /api/financeiro/mensalidades/6a264fae-dd23-4db1-9fc3-dddb64c8454d/pagar
2026-01-17 03:21:02 [DEBUG]: Query executada em 229ms
2026-01-17 03:21:02 [DEBUG]: Query executada em 229ms
2026-01-17 03:21:02 [INFO]: Pagamento de mensalidade registrado: 6a264fae-dd23-4db1-9fc3-dddb64c8454d
2026-01-17 03:21:02 [DEBUG]: Query executada em 228ms
2026-01-17 03:21:02 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:21:02 [DEBUG]: Query executada em 230ms
2026-01-17 03:21:14 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:21:15 [DEBUG]: Query executada em 1820ms
2026-01-17 03:21:15 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:21:16 [DEBUG]: Query executada em 230ms
2026-01-17 03:21:17 [HTTP]: POST /api/financeiro/despesas/97eca65c-5bae-48b9-aa77-3656fb659444/pagar
2026-01-17 03:21:17 [DEBUG]: Query executada em 228ms
2026-01-17 03:21:17 [DEBUG]: Query executada em 230ms
2026-01-17 03:21:17 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:21:17 [DEBUG]: Query executada em 225ms
2026-01-17 03:21:20 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:21:20 [HTTP]: GET /api/professores
2026-01-17 03:21:21 [DEBUG]: Query executada em 229ms
2026-01-17 03:21:21 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:21:21 [DEBUG]: Query executada em 227ms
2026-01-17 03:21:22 [DEBUG]: Query executada em 1833ms
2026-01-17 03:21:22 [HTTP]: GET /api/professores
2026-01-17 03:21:22 [DEBUG]: Query executada em 227ms
2026-01-17 03:21:25 [HTTP]: POST /api/financeiro/pagamentos-funcionarios/d176485e-88eb-45b6-b239-3fbbf3651de8/pagar
2026-01-17 03:21:25 [DEBUG]: Query executada em 221ms
2026-01-17 03:21:25 [DEBUG]: Query executada em 221ms
2026-01-17 03:21:25 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:21:25 [HTTP]: GET /api/professores
2026-01-17 03:21:25 [DEBUG]: Query executada em 223ms
2026-01-17 03:21:25 [DEBUG]: Query executada em 229ms
2026-01-17 03:22:03 [HTTP]: GET /api/alunos
2026-01-17 03:22:03 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:22:03 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:22:05 [DEBUG]: Query executada em 2032ms
2026-01-17 03:22:05 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:22:05 [DEBUG]: Query executada em 2043ms
2026-01-17 03:22:05 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:22:05 [DEBUG]: Query executada em 2066ms
2026-01-17 03:22:05 [HTTP]: GET /api/alunos
2026-01-17 03:22:06 [DEBUG]: Query executada em 222ms
2026-01-17 03:22:06 [DEBUG]: Query executada em 224ms
2026-01-17 03:22:06 [DEBUG]: Query executada em 219ms
2026-01-17 03:22:10 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:22:10 [DEBUG]: Query executada em 221ms
2026-01-17 03:22:10 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:22:10 [DEBUG]: Query executada em 223ms
2026-01-17 03:22:36 [HTTP]: POST /api/financeiro/mensalidades/8162e0d2-6138-4b92-8b27-b4ef942ae2e1/pagar
2026-01-17 03:22:37 [DEBUG]: Query executada em 1785ms
2026-01-17 03:22:38 [DEBUG]: Query executada em 223ms
2026-01-17 03:22:38 [INFO]: Pagamento de mensalidade registrado: 8162e0d2-6138-4b92-8b27-b4ef942ae2e1
2026-01-17 03:22:38 [DEBUG]: Query executada em 222ms
2026-01-17 03:22:38 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:22:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:25:05 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:25:07 [DEBUG]: Query executada em 1970ms
2026-01-17 03:25:07 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:25:07 [DEBUG]: Query executada em 228ms
2026-01-17 03:27:03 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:27:03 [HTTP]: GET /api/professores
2026-01-17 03:27:05 [DEBUG]: Query executada em 1875ms
2026-01-17 03:27:05 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:27:05 [DEBUG]: Query executada em 1872ms
2026-01-17 03:27:05 [HTTP]: GET /api/professores
2026-01-17 03:27:05 [DEBUG]: Query executada em 225ms
2026-01-17 03:27:05 [DEBUG]: Query executada em 226ms
2026-01-17 03:29:16 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:29:18 [DEBUG]: Query executada em 1936ms
2026-01-17 03:29:18 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:29:18 [DEBUG]: Query executada em 221ms
2026-01-17 03:29:20 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:29:20 [DEBUG]: Query executada em 225ms
2026-01-17 03:29:20 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:29:20 [DEBUG]: Query executada em 222ms
2026-01-17 03:29:32 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:29:32 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:29:32 [HTTP]: GET /api/alunos
2026-01-17 03:29:34 [DEBUG]: Query executada em 1797ms
2026-01-17 03:29:34 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:29:34 [DEBUG]: Query executada em 1841ms
2026-01-17 03:29:34 [DEBUG]: Query executada em 1845ms
2026-01-17 03:29:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:29:34 [HTTP]: GET /api/alunos
2026-01-17 03:29:34 [DEBUG]: Query executada em 219ms
2026-01-17 03:29:34 [DEBUG]: Query executada em 229ms
2026-01-17 03:29:34 [DEBUG]: Query executada em 229ms
2026-01-17 03:36:07 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:36:07 [HTTP]: GET /api/alunos
2026-01-17 03:36:07 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:36:09 [DEBUG]: Query executada em 1944ms
2026-01-17 03:36:09 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:36:09 [DEBUG]: Query executada em 1970ms
2026-01-17 03:36:09 [HTTP]: GET /api/alunos
2026-01-17 03:36:09 [DEBUG]: Query executada em 2027ms
2026-01-17 03:36:09 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:36:09 [DEBUG]: Query executada em 224ms
2026-01-17 03:36:09 [DEBUG]: Query executada em 227ms
2026-01-17 03:36:09 [DEBUG]: Query executada em 228ms
2026-01-17 03:38:06 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:38:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:38:06 [HTTP]: GET /api/alunos
2026-01-17 03:38:08 [DEBUG]: Query executada em 1824ms
2026-01-17 03:38:08 [DEBUG]: Query executada em 1827ms
2026-01-17 03:38:08 [DEBUG]: Query executada em 1868ms
2026-01-17 03:38:24 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:38:24 [HTTP]: GET /api/alunos
2026-01-17 03:38:24 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:38:26 [DEBUG]: Query executada em 1807ms
2026-01-17 03:38:26 [DEBUG]: Query executada em 1815ms
2026-01-17 03:38:26 [DEBUG]: Query executada em 1815ms
2026-01-17 03:43:41 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:43:41 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:43:41 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:43:42 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:43:42 [INFO]: Migrations executadas com sucesso
2026-01-17 03:43:42 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:43:42 [INFO]: Ambiente: development
2026-01-17 03:43:43 [HTTP]: GET /api/professores
2026-01-17 03:43:43 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:43:43 [DEBUG]: Query executada em 226ms
2026-01-17 03:43:43 [HTTP]: GET /api/professores
2026-01-17 03:43:43 [DEBUG]: Query executada em 232ms
2026-01-17 03:43:45 [DEBUG]: Query executada em 1808ms
2026-01-17 03:43:45 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:43:45 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:01 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:44:01 [HTTP]: GET /api/alunos
2026-01-17 03:44:01 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:44:03 [DEBUG]: Query executada em 1814ms
2026-01-17 03:44:03 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:44:03 [DEBUG]: Query executada em 1825ms
2026-01-17 03:44:03 [HTTP]: GET /api/alunos
2026-01-17 03:44:03 [DEBUG]: Query executada em 1835ms
2026-01-17 03:44:03 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:44:04 [DEBUG]: Query executada em 228ms
2026-01-17 03:44:04 [DEBUG]: Query executada em 225ms
2026-01-17 03:44:04 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:13 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:44:13 [DEBUG]: Query executada em 232ms
2026-01-17 03:44:13 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:44:13 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:28 [HTTP]: POST /api/financeiro/mensalidades/5ca05257-f646-445a-b246-131d79c8f9c5/pagar
2026-01-17 03:44:30 [DEBUG]: Query executada em 1813ms
2026-01-17 03:44:31 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:31 [INFO]: Pagamento de mensalidade registrado: 5ca05257-f646-445a-b246-131d79c8f9c5
2026-01-17 03:44:31 [DEBUG]: Query executada em 224ms
2026-01-17 03:44:31 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:44:31 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:36 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:44:37 [DEBUG]: Query executada em 237ms
2026-01-17 03:44:37 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:44:37 [DEBUG]: Query executada em 229ms
2026-01-17 03:44:44 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:44:44 [HTTP]: GET /api/professores
2026-01-17 03:44:45 [DEBUG]: Query executada em 224ms
2026-01-17 03:44:45 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:44:45 [DEBUG]: Query executada em 222ms
2026-01-17 03:44:46 [DEBUG]: Query executada em 1839ms
2026-01-17 03:44:46 [HTTP]: GET /api/professores
2026-01-17 03:44:46 [DEBUG]: Query executada em 229ms
2026-01-17 03:44:52 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 03:44:53 [DEBUG]: Query executada em 236ms
2026-01-17 03:44:53 [DEBUG]: Query executada em 232ms
2026-01-17 03:44:53 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:53 [DEBUG]: Query executada em 238ms
2026-01-17 03:44:54 [DEBUG]: Query executada em 235ms
2026-01-17 03:44:54 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:54 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:54 [DEBUG]: Query executada em 234ms
2026-01-17 03:44:54 [DEBUG]: Query executada em 228ms
2026-01-17 03:44:55 [DEBUG]: Query executada em 253ms
2026-01-17 03:44:55 [DEBUG]: Query executada em 243ms
2026-01-17 03:44:55 [DEBUG]: Query executada em 248ms
2026-01-17 03:44:56 [DEBUG]: Query executada em 277ms
2026-01-17 03:44:56 [DEBUG]: Query executada em 229ms
2026-01-17 03:44:56 [DEBUG]: Query executada em 255ms
2026-01-17 03:44:56 [DEBUG]: Query executada em 233ms
2026-01-17 03:44:56 [DEBUG]: Query executada em 230ms
2026-01-17 03:44:57 [DEBUG]: Query executada em 235ms
2026-01-17 03:44:57 [DEBUG]: Query executada em 252ms
2026-01-17 03:44:57 [DEBUG]: Query executada em 233ms
2026-01-17 03:44:57 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 03:44:57 [DEBUG]: Query executada em 239ms
2026-01-17 03:44:58 [DEBUG]: Query executada em 243ms
2026-01-17 03:44:58 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:58 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:58 [DEBUG]: Query executada em 239ms
2026-01-17 03:44:59 [DEBUG]: Query executada em 226ms
2026-01-17 03:44:59 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:59 [DEBUG]: Query executada em 227ms
2026-01-17 03:44:59 [DEBUG]: Query executada em 232ms
2026-01-17 03:45:00 [DEBUG]: Query executada em 231ms
2026-01-17 03:45:00 [DEBUG]: Query executada em 226ms
2026-01-17 03:45:00 [DEBUG]: Query executada em 231ms
2026-01-17 03:45:00 [DEBUG]: Query executada em 224ms
2026-01-17 03:45:00 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:01 [DEBUG]: Query executada em 226ms
2026-01-17 03:45:01 [DEBUG]: Query executada em 225ms
2026-01-17 03:45:01 [DEBUG]: Query executada em 227ms
2026-01-17 03:45:01 [DEBUG]: Query executada em 229ms
2026-01-17 03:45:02 [DEBUG]: Query executada em 227ms
2026-01-17 03:45:02 [DEBUG]: Query executada em 226ms
2026-01-17 03:45:08 [HTTP]: GET /api/professores
2026-01-17 03:45:08 [HTTP]: GET /api/turmas
2026-01-17 03:45:08 [DEBUG]: Query executada em 230ms
2026-01-17 03:45:08 [HTTP]: GET /api/professores
2026-01-17 03:45:08 [DEBUG]: Query executada em 232ms
2026-01-17 03:45:10 [DEBUG]: Query executada em 1787ms
2026-01-17 03:45:10 [HTTP]: GET /api/turmas
2026-01-17 03:45:10 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:14 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:14 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:14 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:15 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:17 [HTTP]: GET /api/alunos
2026-01-17 03:45:17 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:17 [HTTP]: GET /api/turmas
2026-01-17 03:45:17 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:17 [HTTP]: GET /api/alunos
2026-01-17 03:45:17 [DEBUG]: Query executada em 232ms
2026-01-17 03:45:17 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:17 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:17 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:19 [DEBUG]: Query executada em 1796ms
2026-01-17 03:45:19 [HTTP]: GET /api/turmas
2026-01-17 03:45:19 [DEBUG]: Query executada em 223ms
2026-01-17 03:45:27 [HTTP]: GET /api/alunos
2026-01-17 03:45:27 [HTTP]: GET /api/professores
2026-01-17 03:45:27 [HTTP]: GET /api/notas
2026-01-17 03:45:27 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:27 [HTTP]: GET /api/alunos
2026-01-17 03:45:27 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:27 [HTTP]: GET /api/professores
2026-01-17 03:45:27 [DEBUG]: Query executada em 236ms
2026-01-17 03:45:27 [HTTP]: GET /api/notas
2026-01-17 03:45:27 [DEBUG]: Query executada em 218ms
2026-01-17 03:45:27 [DEBUG]: Query executada em 225ms
2026-01-17 03:45:27 [DEBUG]: Query executada em 223ms
2026-01-17 03:45:28 [HTTP]: GET /api/alunos
2026-01-17 03:45:28 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:28 [HTTP]: GET /api/turmas
2026-01-17 03:45:28 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:28 [HTTP]: GET /api/alunos
2026-01-17 03:45:28 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:28 [HTTP]: GET /api/turmas
2026-01-17 03:45:28 [DEBUG]: Query executada em 229ms
2026-01-17 03:45:28 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:29 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:29 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:29 [DEBUG]: Query executada em 229ms
2026-01-17 03:45:38 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:45:38 [HTTP]: GET /api/alunos
2026-01-17 03:45:38 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:45:38 [DEBUG]: Query executada em 239ms
2026-01-17 03:45:38 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:45:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:38 [HTTP]: GET /api/alunos
2026-01-17 03:45:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:38 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:45:38 [DEBUG]: Query executada em 230ms
2026-01-17 03:45:38 [DEBUG]: Query executada em 222ms
2026-01-17 03:45:39 [DEBUG]: Query executada em 222ms
2026-01-17 03:45:43 [HTTP]: PUT /api/financeiro/matriculas/2ec4b3b5-f80f-4a6b-ba91-fa0696578efb
2026-01-17 03:45:43 [DEBUG]: Query executada em 224ms
2026-01-17 03:45:43 [DEBUG]: Query executada em 224ms
2026-01-17 03:45:43 [INFO]: Matrícula atualizada: 2ec4b3b5-f80f-4a6b-ba91-fa0696578efb
2026-01-17 03:45:44 [DEBUG]: Query executada em 220ms
2026-01-17 03:45:44 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:45:44 [HTTP]: GET /api/alunos
2026-01-17 03:45:44 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:45:44 [DEBUG]: Query executada em 221ms
2026-01-17 03:45:44 [DEBUG]: Query executada em 229ms
2026-01-17 03:45:44 [DEBUG]: Query executada em 235ms
2026-01-17 03:45:47 [HTTP]: GET /api/escola
2026-01-17 03:45:47 [DEBUG]: Query executada em 226ms
2026-01-17 03:45:47 [HTTP]: GET /api/escola
2026-01-17 03:45:47 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:49 [HTTP]: GET /api/usuarios
2026-01-17 03:45:49 [DEBUG]: Query executada em 235ms
2026-01-17 03:45:49 [HTTP]: GET /api/usuarios
2026-01-17 03:45:49 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:50 [HTTP]: GET /api/professores
2026-01-17 03:45:51 [DEBUG]: Query executada em 231ms
2026-01-17 03:45:51 [HTTP]: GET /api/professores
2026-01-17 03:45:51 [DEBUG]: Query executada em 230ms
2026-01-17 03:45:52 [HTTP]: GET /api/turmas
2026-01-17 03:45:52 [HTTP]: GET /api/professores
2026-01-17 03:45:52 [DEBUG]: Query executada em 233ms
2026-01-17 03:45:52 [DEBUG]: Query executada em 233ms
2026-01-17 03:45:52 [HTTP]: GET /api/turmas
2026-01-17 03:45:52 [HTTP]: GET /api/professores
2026-01-17 03:45:52 [DEBUG]: Query executada em 219ms
2026-01-17 03:45:52 [DEBUG]: Query executada em 228ms
2026-01-17 03:45:59 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:59 [DEBUG]: Query executada em 229ms
2026-01-17 03:45:59 [HTTP]: GET /api/responsaveis
2026-01-17 03:45:59 [DEBUG]: Query executada em 226ms
2026-01-17 03:46:00 [HTTP]: GET /api/responsaveis
2026-01-17 03:46:00 [HTTP]: GET /api/alunos
2026-01-17 03:46:00 [HTTP]: GET /api/turmas
2026-01-17 03:46:00 [DEBUG]: Query executada em 227ms
2026-01-17 03:46:00 [HTTP]: GET /api/responsaveis
2026-01-17 03:46:00 [DEBUG]: Query executada em 230ms
2026-01-17 03:46:00 [HTTP]: GET /api/alunos
2026-01-17 03:46:00 [DEBUG]: Query executada em 223ms
2026-01-17 03:46:00 [DEBUG]: Query executada em 228ms
2026-01-17 03:46:02 [DEBUG]: Query executada em 1807ms
2026-01-17 03:46:02 [HTTP]: GET /api/turmas
2026-01-17 03:46:02 [DEBUG]: Query executada em 222ms
2026-01-17 03:46:03 [HTTP]: GET /api/notas
2026-01-17 03:46:03 [HTTP]: GET /api/alunos
2026-01-17 03:46:03 [HTTP]: GET /api/professores
2026-01-17 03:46:04 [DEBUG]: Query executada em 221ms
2026-01-17 03:46:04 [DEBUG]: Query executada em 226ms
2026-01-17 03:46:04 [HTTP]: GET /api/professores
2026-01-17 03:46:04 [HTTP]: GET /api/notas
2026-01-17 03:46:04 [DEBUG]: Query executada em 232ms
2026-01-17 03:46:04 [HTTP]: GET /api/alunos
2026-01-17 03:46:04 [DEBUG]: Query executada em 220ms
2026-01-17 03:46:04 [DEBUG]: Query executada em 226ms
2026-01-17 03:46:04 [DEBUG]: Query executada em 229ms
2026-01-17 03:46:06 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:46:07 [DEBUG]: Query executada em 227ms
2026-01-17 03:46:07 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:46:07 [DEBUG]: Query executada em 228ms
2026-01-17 03:46:07 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:46:07 [HTTP]: GET /api/alunos
2026-01-17 03:46:07 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:46:08 [DEBUG]: Query executada em 220ms
2026-01-17 03:46:08 [DEBUG]: Query executada em 225ms
2026-01-17 03:46:08 [DEBUG]: Query executada em 229ms
2026-01-17 03:46:08 [HTTP]: GET /api/financeiro/planos
2026-01-17 03:46:08 [HTTP]: GET /api/alunos
2026-01-17 03:46:08 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 03:46:08 [DEBUG]: Query executada em 224ms
2026-01-17 03:46:08 [DEBUG]: Query executada em 227ms
2026-01-17 03:46:08 [DEBUG]: Query executada em 221ms
2026-01-17 03:46:08 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:46:09 [DEBUG]: Query executada em 224ms
2026-01-17 03:46:09 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 03:46:09 [DEBUG]: Query executada em 225ms
2026-01-17 03:46:09 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:46:09 [DEBUG]: Query executada em 221ms
2026-01-17 03:46:09 [HTTP]: GET /api/financeiro/despesas
2026-01-17 03:46:10 [DEBUG]: Query executada em 225ms
2026-01-17 03:46:10 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:46:10 [HTTP]: GET /api/professores
2026-01-17 03:46:10 [DEBUG]: Query executada em 223ms
2026-01-17 03:46:10 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:46:10 [DEBUG]: Query executada em 227ms
2026-01-17 03:46:10 [HTTP]: GET /api/professores
2026-01-17 03:46:10 [DEBUG]: Query executada em 222ms
2026-01-17 03:46:11 [DEBUG]: Query executada em 228ms
2026-01-17 03:46:19 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:46:19 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:46:19 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:46:19 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:46:19 [INFO]: Migrations executadas com sucesso
2026-01-17 03:46:19 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:46:19 [INFO]: Ambiente: development
2026-01-17 03:46:19 [HTTP]: GET /api/financeiro/pagamentos-funcionarios
2026-01-17 03:46:19 [HTTP]: GET /api/professores
2026-01-17 03:46:20 [DEBUG]: Query executada em 228ms
2026-01-17 03:46:21 [DEBUG]: Query executada em 1778ms
2026-01-17 03:50:35 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 03:50:37 [DEBUG]: Query executada em 2229ms
2026-01-17 03:50:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:38 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:38 [DEBUG]: Query executada em 218ms
2026-01-17 03:50:38 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:39 [DEBUG]: Query executada em 219ms
2026-01-17 03:50:39 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:39 [DEBUG]: Query executada em 223ms
2026-01-17 03:50:39 [DEBUG]: Query executada em 223ms
2026-01-17 03:50:40 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:40 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:40 [DEBUG]: Query executada em 219ms
2026-01-17 03:50:40 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:40 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:41 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:41 [DEBUG]: Query executada em 226ms
2026-01-17 03:50:41 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:41 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:41 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:41 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 03:50:42 [DEBUG]: Query executada em 219ms
2026-01-17 03:50:42 [DEBUG]: Query executada em 225ms
2026-01-17 03:50:42 [DEBUG]: Query executada em 219ms
2026-01-17 03:50:42 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:43 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:43 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:43 [DEBUG]: Query executada em 219ms
2026-01-17 03:50:43 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:43 [DEBUG]: Query executada em 225ms
2026-01-17 03:50:44 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:44 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:44 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:44 [DEBUG]: Query executada em 222ms
2026-01-17 03:50:45 [DEBUG]: Query executada em 221ms
2026-01-17 03:50:45 [DEBUG]: Query executada em 220ms
2026-01-17 03:50:45 [DEBUG]: Query executada em 225ms
2026-01-17 03:50:45 [DEBUG]: Query executada em 222ms
2026-01-17 03:50:45 [DEBUG]: Query executada em 223ms
2026-01-17 03:50:46 [DEBUG]: Query executada em 223ms
2026-01-17 03:50:46 [DEBUG]: Query executada em 222ms
2026-01-17 03:50:51 [HTTP]: GET /api/turmas
2026-01-17 03:50:51 [HTTP]: GET /api/professores
2026-01-17 03:50:52 [DEBUG]: Query executada em 222ms
2026-01-17 03:50:52 [HTTP]: GET /api/turmas
2026-01-17 03:50:52 [DEBUG]: Query executada em 222ms
2026-01-17 03:50:53 [DEBUG]: Query executada em 1881ms
2026-01-17 03:50:53 [HTTP]: GET /api/professores
2026-01-17 03:50:54 [DEBUG]: Query executada em 224ms
2026-01-17 03:51:03 [HTTP]: POST /api/turmas/ca219cc6-1575-4997-8949-9bd77b69c8d7/professores/17c09cea-66b9-4fe5-8766-b37be0eb4b26
2026-01-17 03:52:49 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:52:49 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:52:49 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:52:49 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:52:49 [INFO]: Migrations executadas com sucesso
2026-01-17 03:52:49 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:52:49 [INFO]: Ambiente: development
2026-01-17 03:53:25 [INFO]: Encerrando servidor...
2026-01-17 03:54:14 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:54:14 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:54:14 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:54:14 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:54:14 [INFO]: Migrations executadas com sucesso
2026-01-17 03:54:14 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:54:14 [INFO]: Ambiente: development
2026-01-17 03:54:21 [HTTP]: GET /api/turmas
2026-01-17 03:54:21 [HTTP]: GET /api/professores
2026-01-17 03:54:21 [DEBUG]: Query executada em 229ms
2026-01-17 03:54:21 [HTTP]: GET /api/turmas
2026-01-17 03:54:21 [DEBUG]: Query executada em 228ms
2026-01-17 03:54:22 [DEBUG]: Query executada em 1874ms
2026-01-17 03:54:22 [HTTP]: GET /api/professores
2026-01-17 03:54:23 [DEBUG]: Query executada em 226ms
2026-01-17 03:54:31 [HTTP]: POST /api/turmas/ca219cc6-1575-4997-8949-9bd77b69c8d7/professores/17c09cea-66b9-4fe5-8766-b37be0eb4b26
2026-01-17 03:54:31 [DEBUG]: Query executada em 226ms
2026-01-17 03:54:32 [DEBUG]: Query executada em 225ms
2026-01-17 03:54:32 [DEBUG]: Query executada em 253ms
2026-01-17 03:54:32 [INFO]: Professor 17c09cea-66b9-4fe5-8766-b37be0eb4b26 vinculado à turma ca219cc6-1575-4997-8949-9bd77b69c8d7
2026-01-17 03:54:32 [HTTP]: GET /api/turmas
2026-01-17 03:54:32 [HTTP]: GET /api/professores
2026-01-17 03:54:32 [DEBUG]: Query executada em 226ms
2026-01-17 03:54:34 [DEBUG]: Query executada em 1836ms
2026-01-17 03:54:49 [HTTP]: PUT /api/turmas/ca219cc6-1575-4997-8949-9bd77b69c8d7
2026-01-17 03:54:51 [DEBUG]: Query executada em 1818ms
2026-01-17 03:54:51 [DEBUG]: Query executada em 226ms
2026-01-17 03:54:51 [INFO]: Turma atualizada: ca219cc6-1575-4997-8949-9bd77b69c8d7
2026-01-17 03:54:51 [DEBUG]: Query executada em 227ms
2026-01-17 03:54:51 [HTTP]: GET /api/turmas
2026-01-17 03:54:51 [HTTP]: GET /api/professores
2026-01-17 03:54:51 [DEBUG]: Query executada em 223ms
2026-01-17 03:54:53 [DEBUG]: Query executada em 1850ms
2026-01-17 03:55:35 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:55:35 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:55:35 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:55:35 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:55:35 [INFO]: Migrations executadas com sucesso
2026-01-17 03:55:35 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:55:35 [INFO]: Ambiente: development
2026-01-17 03:57:04 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 03:57:04 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 03:57:04 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 03:57:04 [INFO]: Migrations executadas com sucesso!
2026-01-17 03:57:04 [INFO]: Migrations executadas com sucesso
2026-01-17 03:57:04 [INFO]: Servidor rodando na porta 3001
2026-01-17 03:57:04 [INFO]: Ambiente: development
2026-01-17 03:57:16 [HTTP]: GET /api/turmas
2026-01-17 03:57:16 [HTTP]: GET /api/professores
2026-01-17 03:57:18 [DEBUG]: Query executada em 1815ms
2026-01-17 03:57:18 [DEBUG]: Query executada em 1831ms
2026-01-17 03:57:18 [DEBUG]: Query executada em 230ms
2026-01-17 03:57:48 [HTTP]: GET /api/responsaveis
2026-01-17 03:57:50 [DEBUG]: Query executada em 1831ms
2026-01-17 03:57:50 [HTTP]: GET /api/responsaveis
2026-01-17 03:57:51 [DEBUG]: Query executada em 224ms
2026-01-17 03:57:52 [HTTP]: GET /api/turmas
2026-01-17 03:57:52 [HTTP]: GET /api/professores
2026-01-17 03:57:52 [DEBUG]: Query executada em 223ms
2026-01-17 03:57:52 [DEBUG]: Query executada em 226ms
2026-01-17 03:57:52 [HTTP]: GET /api/turmas
2026-01-17 03:57:52 [DEBUG]: Query executada em 225ms
2026-01-17 03:57:52 [DEBUG]: Query executada em 222ms
2026-01-17 03:57:53 [DEBUG]: Query executada em 1785ms
2026-01-17 03:57:53 [HTTP]: GET /api/professores
2026-01-17 03:57:54 [DEBUG]: Query executada em 220ms
2026-01-17 03:58:42 [HTTP]: GET /api/turmas
2026-01-17 03:58:42 [HTTP]: GET /api/professores
2026-01-17 03:58:44 [DEBUG]: Query executada em 1767ms
2026-01-17 03:58:44 [DEBUG]: Query executada em 1824ms
2026-01-17 03:58:44 [DEBUG]: Query executada em 222ms
2026-01-17 03:59:00 [HTTP]: GET /api/alunos
2026-01-17 03:59:00 [HTTP]: GET /api/turmas
2026-01-17 03:59:00 [HTTP]: GET /api/responsaveis
2026-01-17 03:59:02 [DEBUG]: Query executada em 1809ms
2026-01-17 03:59:02 [DEBUG]: Query executada em 1841ms
2026-01-17 03:59:02 [DEBUG]: Query executada em 1848ms
2026-01-17 03:59:02 [HTTP]: GET /api/responsaveis
2026-01-17 03:59:02 [HTTP]: GET /api/alunos
2026-01-17 03:59:02 [DEBUG]: Query executada em 221ms
2026-01-17 03:59:02 [HTTP]: GET /api/turmas
2026-01-17 03:59:02 [DEBUG]: Query executada em 221ms
2026-01-17 03:59:02 [DEBUG]: Query executada em 222ms
2026-01-17 03:59:02 [DEBUG]: Query executada em 219ms
2026-01-17 03:59:02 [DEBUG]: Query executada em 219ms
2026-01-17 04:00:17 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:00:17 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:00:17 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:00:18 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:00:18 [INFO]: Migrations executadas com sucesso
2026-01-17 04:00:18 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:00:18 [INFO]: Ambiente: development
2026-01-17 04:00:42 [INFO]: Encerrando servidor...
2026-01-17 04:01:39 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:01:39 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:01:39 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:01:39 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:01:39 [INFO]: Migrations executadas com sucesso
2026-01-17 04:01:39 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:01:39 [INFO]: Ambiente: development
2026-01-17 04:01:42 [HTTP]: GET /api/alunos
2026-01-17 04:01:42 [HTTP]: GET /api/turmas
2026-01-17 04:01:42 [HTTP]: GET /api/responsaveis
2026-01-17 04:01:42 [DEBUG]: Query executada em 237ms
2026-01-17 04:01:42 [HTTP]: GET /api/alunos
2026-01-17 04:01:42 [DEBUG]: Query executada em 231ms
2026-01-17 04:01:44 [DEBUG]: Query executada em 1785ms
2026-01-17 04:01:44 [HTTP]: GET /api/responsaveis
2026-01-17 04:01:44 [DEBUG]: Query executada em 1892ms
2026-01-17 04:01:44 [DEBUG]: Query executada em 220ms
2026-01-17 04:01:44 [DEBUG]: Query executada em 229ms
2026-01-17 04:01:44 [HTTP]: GET /api/turmas
2026-01-17 04:01:44 [DEBUG]: Query executada em 231ms
2026-01-17 04:01:44 [DEBUG]: Query executada em 229ms
2026-01-17 04:02:15 [HTTP]: GET /api/notas
2026-01-17 04:02:15 [HTTP]: GET /api/professores
2026-01-17 04:02:15 [HTTP]: GET /api/alunos
2026-01-17 04:02:17 [DEBUG]: Query executada em 1983ms
2026-01-17 04:02:17 [DEBUG]: Query executada em 2003ms
2026-01-17 04:02:17 [HTTP]: GET /api/alunos
2026-01-17 04:02:17 [HTTP]: GET /api/notas
2026-01-17 04:02:17 [DEBUG]: Query executada em 2045ms
2026-01-17 04:02:17 [HTTP]: GET /api/professores
2026-01-17 04:02:17 [DEBUG]: Query executada em 225ms
2026-01-17 04:02:18 [DEBUG]: Query executada em 261ms
2026-01-17 04:02:18 [DEBUG]: Query executada em 247ms
2026-01-17 04:02:20 [HTTP]: GET /api/alunos
2026-01-17 04:02:20 [HTTP]: GET /api/responsaveis
2026-01-17 04:02:20 [HTTP]: GET /api/turmas
2026-01-17 04:02:20 [DEBUG]: Query executada em 221ms
2026-01-17 04:02:20 [DEBUG]: Query executada em 225ms
2026-01-17 04:02:20 [DEBUG]: Query executada em 227ms
2026-01-17 04:02:20 [HTTP]: GET /api/responsaveis
2026-01-17 04:02:20 [HTTP]: GET /api/alunos
2026-01-17 04:02:21 [DEBUG]: Query executada em 221ms
2026-01-17 04:02:21 [HTTP]: GET /api/turmas
2026-01-17 04:02:21 [DEBUG]: Query executada em 227ms
2026-01-17 04:02:21 [DEBUG]: Query executada em 233ms
2026-01-17 04:02:21 [DEBUG]: Query executada em 224ms
2026-01-17 04:02:21 [DEBUG]: Query executada em 222ms
2026-01-17 04:06:25 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:06:25 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:06:25 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:06:26 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:06:26 [INFO]: Migrations executadas com sucesso
2026-01-17 04:06:26 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:06:26 [INFO]: Ambiente: development
2026-01-17 04:07:54 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:07:54 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:07:54 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:07:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:07:55 [INFO]: Migrations executadas com sucesso
2026-01-17 04:07:55 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:07:55 [INFO]: Ambiente: development
2026-01-17 04:09:28 [HTTP]: GET /api/alunos
2026-01-17 04:09:28 [HTTP]: GET /api/responsaveis
2026-01-17 04:09:28 [HTTP]: GET /api/turmas
2026-01-17 04:09:29 [DEBUG]: Query executada em 1783ms
2026-01-17 04:09:29 [DEBUG]: Query executada em 1839ms
2026-01-17 04:09:29 [DEBUG]: Query executada em 1858ms
2026-01-17 04:09:30 [DEBUG]: Query executada em 222ms
2026-01-17 04:09:42 [HTTP]: GET /api/alunos
2026-01-17 04:09:42 [HTTP]: GET /api/responsaveis
2026-01-17 04:09:42 [HTTP]: GET /api/turmas
2026-01-17 04:09:44 [DEBUG]: Query executada em 1833ms
2026-01-17 04:09:44 [HTTP]: GET /api/alunos
2026-01-17 04:09:44 [DEBUG]: Query executada em 1848ms
2026-01-17 04:09:44 [DEBUG]: Query executada em 1839ms
2026-01-17 04:09:44 [HTTP]: GET /api/responsaveis
2026-01-17 04:09:44 [DEBUG]: Query executada em 226ms
2026-01-17 04:09:44 [DEBUG]: Query executada em 228ms
2026-01-17 04:09:44 [DEBUG]: Query executada em 228ms
2026-01-17 04:09:44 [HTTP]: GET /api/turmas
2026-01-17 04:09:45 [DEBUG]: Query executada em 225ms
2026-01-17 04:09:45 [DEBUG]: Query executada em 228ms
2026-01-17 04:09:59 [HTTP]: GET /api/turmas
2026-01-17 04:09:59 [HTTP]: GET /api/responsaveis
2026-01-17 04:09:59 [HTTP]: GET /api/alunos
2026-01-17 04:10:01 [DEBUG]: Query executada em 1807ms
2026-01-17 04:10:01 [DEBUG]: Query executada em 1815ms
2026-01-17 04:10:01 [DEBUG]: Query executada em 1808ms
2026-01-17 04:10:01 [DEBUG]: Query executada em 224ms
2026-01-17 04:10:15 [HTTP]: GET /api/turmas
2026-01-17 04:10:15 [HTTP]: GET /api/responsaveis
2026-01-17 04:10:15 [HTTP]: GET /api/alunos
2026-01-17 04:10:17 [DEBUG]: Query executada em 1840ms
2026-01-17 04:10:17 [DEBUG]: Query executada em 1838ms
2026-01-17 04:10:17 [DEBUG]: Query executada em 1864ms
2026-01-17 04:10:17 [DEBUG]: Query executada em 234ms
2026-01-17 04:10:34 [HTTP]: GET /api/alunos
2026-01-17 04:10:34 [HTTP]: GET /api/turmas
2026-01-17 04:10:34 [HTTP]: GET /api/responsaveis
2026-01-17 04:10:36 [DEBUG]: Query executada em 1793ms
2026-01-17 04:10:36 [DEBUG]: Query executada em 1796ms
2026-01-17 04:10:36 [DEBUG]: Query executada em 1808ms
2026-01-17 04:10:36 [DEBUG]: Query executada em 223ms
2026-01-17 04:11:15 [INFO]: Encerrando servidor...
2026-01-17 04:12:15 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:12:15 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:12:15 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:12:16 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:12:16 [INFO]: Migrations executadas com sucesso
2026-01-17 04:12:16 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:12:16 [INFO]: Ambiente: development
2026-01-17 04:12:18 [HTTP]: GET /api/alunos
2026-01-17 04:12:18 [HTTP]: GET /api/responsaveis
2026-01-17 04:12:18 [HTTP]: GET /api/turmas
2026-01-17 04:12:18 [DEBUG]: Query executada em 237ms
2026-01-17 04:12:18 [HTTP]: GET /api/alunos
2026-01-17 04:12:18 [DEBUG]: Query executada em 225ms
2026-01-17 04:12:20 [DEBUG]: Query executada em 1859ms
2026-01-17 04:12:20 [DEBUG]: Query executada em 1927ms
2026-01-17 04:12:20 [HTTP]: GET /api/responsaveis
2026-01-17 04:12:20 [DEBUG]: Query executada em 228ms
2026-01-17 04:12:20 [HTTP]: GET /api/turmas
2026-01-17 04:12:20 [DEBUG]: Query executada em 227ms
2026-01-17 04:12:20 [DEBUG]: Query executada em 225ms
2026-01-17 04:12:20 [DEBUG]: Query executada em 226ms
2026-01-17 04:12:32 [HTTP]: POST /api/historico-escolar
2026-01-17 04:12:34 [DEBUG]: Query executada em 1783ms
2026-01-17 04:12:34 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:34 [DEBUG]: Query executada em 219ms
2026-01-17 04:12:34 [DEBUG]: Query executada em 235ms
2026-01-17 04:12:35 [DEBUG]: Query executada em 231ms
2026-01-17 04:12:35 [INFO]: Aluno f71df7b1-5a29-405f-8ae0-2e6bfc085dbf vinculado à turma ca219cc6-1575-4997-8949-9bd77b69c8d7 no ano letivo 2026
2026-01-17 04:12:35 [DEBUG]: Query executada em 220ms
2026-01-17 04:12:35 [HTTP]: GET /api/alunos
2026-01-17 04:12:35 [HTTP]: GET /api/responsaveis
2026-01-17 04:12:35 [HTTP]: GET /api/turmas
2026-01-17 04:12:35 [DEBUG]: Query executada em 220ms
2026-01-17 04:12:37 [DEBUG]: Query executada em 1800ms
2026-01-17 04:12:37 [DEBUG]: Query executada em 1863ms
2026-01-17 04:12:37 [DEBUG]: Query executada em 226ms
2026-01-17 04:12:38 [HTTP]: GET /api/turmas
2026-01-17 04:12:38 [HTTP]: GET /api/professores
2026-01-17 04:12:38 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:38 [DEBUG]: Query executada em 229ms
2026-01-17 04:12:38 [HTTP]: GET /api/professores
2026-01-17 04:12:38 [DEBUG]: Query executada em 226ms
2026-01-17 04:12:38 [HTTP]: GET /api/turmas
2026-01-17 04:12:38 [DEBUG]: Query executada em 235ms
2026-01-17 04:12:38 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:38 [DEBUG]: Query executada em 228ms
2026-01-17 04:12:40 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:12:40 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:40 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:41 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:41 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:41 [DEBUG]: Query executada em 221ms
2026-01-17 04:12:41 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:42 [DEBUG]: Query executada em 221ms
2026-01-17 04:12:42 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:42 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:43 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:43 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:43 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:43 [DEBUG]: Query executada em 228ms
2026-01-17 04:12:44 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:44 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:44 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:44 [DEBUG]: Query executada em 239ms
2026-01-17 04:12:44 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:45 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:45 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:45 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:12:45 [DEBUG]: Query executada em 232ms
2026-01-17 04:12:45 [DEBUG]: Query executada em 226ms
2026-01-17 04:12:46 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:46 [DEBUG]: Query executada em 228ms
2026-01-17 04:12:46 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:46 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:47 [DEBUG]: Query executada em 227ms
2026-01-17 04:12:47 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:47 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:47 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:47 [DEBUG]: Query executada em 225ms
2026-01-17 04:12:48 [DEBUG]: Query executada em 227ms
2026-01-17 04:12:48 [DEBUG]: Query executada em 225ms
2026-01-17 04:12:48 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:48 [HTTP]: GET /api/responsaveis
2026-01-17 04:12:48 [HTTP]: GET /api/alunos
2026-01-17 04:12:48 [HTTP]: GET /api/turmas
2026-01-17 04:12:48 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:49 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:49 [DEBUG]: Query executada em 230ms
2026-01-17 04:12:49 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:49 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:49 [DEBUG]: Query executada em 222ms
2026-01-17 04:12:50 [DEBUG]: Query executada em 1779ms
2026-01-17 04:12:50 [HTTP]: GET /api/alunos
2026-01-17 04:12:50 [DEBUG]: Query executada em 1809ms
2026-01-17 04:12:50 [DEBUG]: Query executada em 1816ms
2026-01-17 04:12:50 [HTTP]: GET /api/responsaveis
2026-01-17 04:12:50 [DEBUG]: Query executada em 221ms
2026-01-17 04:12:50 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:50 [HTTP]: GET /api/turmas
2026-01-17 04:12:50 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:50 [DEBUG]: Query executada em 221ms
2026-01-17 04:12:51 [DEBUG]: Query executada em 223ms
2026-01-17 04:12:58 [HTTP]: GET /api/alunos/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:12:58 [DEBUG]: Query executada em 227ms
2026-01-17 04:12:58 [HTTP]: GET /api/historico-escolar/aluno/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:12:58 [HTTP]: GET /api/alunos/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:12:58 [DEBUG]: Query executada em 226ms
2026-01-17 04:12:58 [DEBUG]: Query executada em 232ms
2026-01-17 04:12:58 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:59 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:59 [HTTP]: GET /api/historico-escolar/aluno/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:12:59 [DEBUG]: Query executada em 224ms
2026-01-17 04:12:59 [DEBUG]: Query executada em 224ms
2026-01-17 04:13:00 [DEBUG]: Query executada em 224ms
2026-01-17 04:13:40 [HTTP]: GET /api/notas
2026-01-17 04:13:40 [HTTP]: GET /api/alunos
2026-01-17 04:13:40 [HTTP]: GET /api/professores
2026-01-17 04:13:42 [HTTP]: GET /api/responsaveis
2026-01-17 04:13:42 [HTTP]: GET /api/turmas
2026-01-17 04:13:42 [DEBUG]: Query executada em 1946ms
2026-01-17 04:13:42 [DEBUG]: Query executada em 1989ms
2026-01-17 04:13:42 [DEBUG]: Query executada em 2042ms
2026-01-17 04:13:42 [HTTP]: GET /api/professores
2026-01-17 04:13:42 [HTTP]: GET /api/notas
2026-01-17 04:13:42 [HTTP]: GET /api/alunos
2026-01-17 04:13:42 [DEBUG]: Query executada em 229ms
2026-01-17 04:13:42 [DEBUG]: Query executada em 328ms
2026-01-17 04:13:42 [DEBUG]: Query executada em 270ms
2026-01-17 04:13:42 [HTTP]: GET /api/alunos
2026-01-17 04:13:43 [DEBUG]: Query executada em 218ms
2026-01-17 04:13:43 [HTTP]: GET /api/alunos
2026-01-17 04:13:43 [DEBUG]: Query executada em 220ms
2026-01-17 04:13:44 [DEBUG]: Query executada em 1875ms
2026-01-17 04:13:44 [HTTP]: GET /api/responsaveis
2026-01-17 04:13:44 [DEBUG]: Query executada em 1896ms
2026-01-17 04:13:44 [DEBUG]: Query executada em 234ms
2026-01-17 04:13:44 [DEBUG]: Query executada em 229ms
2026-01-17 04:13:44 [HTTP]: GET /api/turmas
2026-01-17 04:13:44 [DEBUG]: Query executada em 226ms
2026-01-17 04:13:44 [DEBUG]: Query executada em 227ms
2026-01-17 04:15:40 [HTTP]: GET /api/alunos/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:15:40 [HTTP]: GET /api/historico-escolar/aluno/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:15:42 [DEBUG]: Query executada em 1836ms
2026-01-17 04:15:42 [DEBUG]: Query executada em 1880ms
2026-01-17 04:15:42 [HTTP]: GET /api/alunos/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:15:42 [DEBUG]: Query executada em 232ms
2026-01-17 04:15:42 [DEBUG]: Query executada em 230ms
2026-01-17 04:15:42 [DEBUG]: Query executada em 230ms
2026-01-17 04:15:42 [HTTP]: GET /api/historico-escolar/aluno/f71df7b1-5a29-405f-8ae0-2e6bfc085dbf
2026-01-17 04:15:43 [DEBUG]: Query executada em 224ms
2026-01-17 04:15:43 [DEBUG]: Query executada em 224ms
2026-01-17 04:15:43 [DEBUG]: Query executada em 223ms
2026-01-17 04:16:37 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:16:37 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:16:37 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:16:37 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:16:37 [INFO]: Migrations executadas com sucesso
2026-01-17 04:16:37 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:16:37 [INFO]: Ambiente: development
2026-01-17 04:17:10 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:17:10 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:17:10 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:17:10 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:17:10 [INFO]: Migrations executadas com sucesso
2026-01-17 04:17:10 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:17:10 [INFO]: Ambiente: development
2026-01-17 04:17:36 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:17:36 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:17:36 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:17:36 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:17:36 [INFO]: Migrations executadas com sucesso
2026-01-17 04:17:36 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:17:36 [INFO]: Ambiente: development
2026-01-17 04:17:43 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:17:43 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:17:43 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:17:43 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:17:43 [INFO]: Migrations executadas com sucesso
2026-01-17 04:17:43 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:17:43 [INFO]: Ambiente: development
2026-01-17 04:17:59 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:17:59 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:17:59 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:18:00 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:18:00 [INFO]: Migrations executadas com sucesso
2026-01-17 04:18:00 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:18:00 [INFO]: Ambiente: development
2026-01-17 04:18:08 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:18:08 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:18:08 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:18:09 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:18:09 [INFO]: Migrations executadas com sucesso
2026-01-17 04:18:09 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:18:09 [INFO]: Ambiente: development
2026-01-17 04:19:47 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:19:47 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:19:47 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:19:48 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:19:48 [INFO]: Migrations executadas com sucesso
2026-01-17 04:19:48 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:19:48 [INFO]: Ambiente: development
2026-01-17 04:19:58 [INFO]: Encerrando servidor...
2026-01-17 04:21:27 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:21:27 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:21:27 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:21:28 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:21:28 [INFO]: Migrations executadas com sucesso
2026-01-17 04:21:28 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:21:28 [INFO]: Ambiente: development
2026-01-17 04:21:28 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:21:28 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:28 [DEBUG]: Query executada em 230ms
2026-01-17 04:21:28 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:29 [DEBUG]: Query executada em 240ms
2026-01-17 04:21:29 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:29 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:29 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:29 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:30 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:30 [DEBUG]: Query executada em 228ms
2026-01-17 04:21:30 [DEBUG]: Query executada em 228ms
2026-01-17 04:21:30 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:31 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:31 [DEBUG]: Query executada em 229ms
2026-01-17 04:21:31 [DEBUG]: Query executada em 228ms
2026-01-17 04:21:31 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:32 [DEBUG]: Query executada em 224ms
2026-01-17 04:21:32 [DEBUG]: Query executada em 225ms
2026-01-17 04:21:32 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:32 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:32 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:21:32 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:33 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:33 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:33 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:33 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:34 [DEBUG]: Query executada em 229ms
2026-01-17 04:21:34 [DEBUG]: Query executada em 224ms
2026-01-17 04:21:34 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:34 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:34 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:35 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:35 [DEBUG]: Query executada em 229ms
2026-01-17 04:21:35 [DEBUG]: Query executada em 226ms
2026-01-17 04:21:35 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:36 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:36 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:36 [DEBUG]: Query executada em 225ms
2026-01-17 04:21:36 [DEBUG]: Query executada em 227ms
2026-01-17 04:21:37 [DEBUG]: Query executada em 230ms
2026-01-17 04:21:37 [DEBUG]: Query executada em 226ms
2026-01-17 04:23:14 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 04:23:16 [DEBUG]: Query executada em 1888ms
2026-01-17 04:23:16 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 04:23:16 [DEBUG]: Query executada em 229ms
2026-01-17 04:25:19 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:25:19 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:25:19 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:25:20 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:25:20 [INFO]: Migrations executadas com sucesso
2026-01-17 04:25:20 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:25:20 [INFO]: Ambiente: development
2026-01-17 04:26:00 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 04:26:02 [DEBUG]: Query executada em 1832ms
2026-01-17 04:26:17 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 04:26:19 [DEBUG]: Query executada em 1851ms
2026-01-17 04:27:21 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 04:27:23 [DEBUG]: Query executada em 1843ms
2026-01-17 04:27:29 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:27:29 [DEBUG]: Query executada em 225ms
2026-01-17 04:27:29 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:29 [DEBUG]: Query executada em 226ms
2026-01-17 04:27:30 [DEBUG]: Query executada em 225ms
2026-01-17 04:27:30 [DEBUG]: Query executada em 228ms
2026-01-17 04:27:30 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:30 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:30 [DEBUG]: Query executada em 221ms
2026-01-17 04:27:31 [DEBUG]: Query executada em 227ms
2026-01-17 04:27:31 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:31 [DEBUG]: Query executada em 225ms
2026-01-17 04:27:31 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:32 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:32 [DEBUG]: Query executada em 227ms
2026-01-17 04:27:32 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:32 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:33 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:33 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:33 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:33 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:33 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:27:33 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:34 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:34 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:34 [DEBUG]: Query executada em 227ms
2026-01-17 04:27:34 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:35 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:35 [DEBUG]: Query executada em 227ms
2026-01-17 04:27:35 [DEBUG]: Query executada em 224ms
2026-01-17 04:27:35 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:35 [DEBUG]: Query executada em 227ms
2026-01-17 04:27:36 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:36 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:36 [DEBUG]: Query executada em 225ms
2026-01-17 04:27:36 [DEBUG]: Query executada em 220ms
2026-01-17 04:27:37 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:37 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:37 [DEBUG]: Query executada em 223ms
2026-01-17 04:27:37 [DEBUG]: Query executada em 222ms
2026-01-17 04:27:37 [DEBUG]: Query executada em 225ms
2026-01-17 04:27:38 [DEBUG]: Query executada em 228ms
2026-01-17 04:28:23 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:28:23 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:28:23 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:28:24 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:28:24 [INFO]: Migrations executadas com sucesso
2026-01-17 04:28:24 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:28:24 [INFO]: Ambiente: development
2026-01-17 04:28:28 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:28:28 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:28:28 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:28:29 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:28:29 [INFO]: Migrations executadas com sucesso
2026-01-17 04:28:29 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:28:29 [INFO]: Ambiente: development
2026-01-17 04:28:47 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:28:47 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:28:47 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:28:47 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:28:47 [INFO]: Migrations executadas com sucesso
2026-01-17 04:28:47 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:28:47 [INFO]: Ambiente: development
2026-01-17 04:28:54 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:28:54 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:28:54 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:28:55 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:28:55 [INFO]: Migrations executadas com sucesso
2026-01-17 04:28:55 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:28:55 [INFO]: Ambiente: development
2026-01-17 04:29:48 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:29:50 [DEBUG]: Query executada em 1828ms
2026-01-17 04:29:50 [DEBUG]: Query executada em 226ms
2026-01-17 04:29:50 [DEBUG]: Query executada em 229ms
2026-01-17 04:29:50 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:51 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:51 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:51 [DEBUG]: Query executada em 226ms
2026-01-17 04:29:51 [DEBUG]: Query executada em 228ms
2026-01-17 04:29:51 [DEBUG]: Query executada em 221ms
2026-01-17 04:29:52 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:52 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:52 [DEBUG]: Query executada em 222ms
2026-01-17 04:29:52 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:53 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:53 [DEBUG]: Query executada em 222ms
2026-01-17 04:29:53 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:53 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:54 [DEBUG]: Query executada em 221ms
2026-01-17 04:29:54 [DEBUG]: Query executada em 226ms
2026-01-17 04:29:54 [DEBUG]: Query executada em 228ms
2026-01-17 04:29:54 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:29:54 [DEBUG]: Query executada em 221ms
2026-01-17 04:29:54 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:55 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:55 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:55 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:55 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:56 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:56 [DEBUG]: Query executada em 226ms
2026-01-17 04:29:56 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:56 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:56 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:57 [DEBUG]: Query executada em 225ms
2026-01-17 04:29:57 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:57 [DEBUG]: Query executada em 222ms
2026-01-17 04:29:57 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:58 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:58 [DEBUG]: Query executada em 224ms
2026-01-17 04:29:58 [DEBUG]: Query executada em 221ms
2026-01-17 04:29:58 [DEBUG]: Query executada em 223ms
2026-01-17 04:29:58 [DEBUG]: Query executada em 221ms
2026-01-17 04:30:04 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 04:30:04 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 04:30:04 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 04:30:05 [INFO]: Migrations executadas com sucesso!
2026-01-17 04:30:05 [INFO]: Migrations executadas com sucesso
2026-01-17 04:30:05 [INFO]: Servidor rodando na porta 3001
2026-01-17 04:30:05 [INFO]: Ambiente: development
2026-01-17 04:38:00 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:38:02 [DEBUG]: Query executada em 2140ms
2026-01-17 04:38:03 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:03 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:03 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:03 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:04 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:04 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:04 [DEBUG]: Query executada em 227ms
2026-01-17 04:38:04 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:04 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:05 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:05 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:05 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:05 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:06 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:06 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:06 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:06 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:06 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:07 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:07 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:38:07 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:07 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:07 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:08 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:08 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:08 [DEBUG]: Query executada em 216ms
2026-01-17 04:38:08 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:08 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:09 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:09 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:09 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:09 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:10 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:10 [DEBUG]: Query executada em 225ms
2026-01-17 04:38:10 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:10 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:10 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:11 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:11 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:11 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:11 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:38:11 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:12 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:12 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:12 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:12 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:12 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:13 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:13 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:13 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:13 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:13 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:14 [DEBUG]: Query executada em 248ms
2026-01-17 04:38:14 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:14 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:14 [DEBUG]: Query executada em 216ms
2026-01-17 04:38:15 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:15 [DEBUG]: Query executada em 224ms
2026-01-17 04:38:15 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:15 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:16 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:16 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:38:16 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:16 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:16 [DEBUG]: Query executada em 217ms
2026-01-17 04:38:16 [DEBUG]: Query executada em 237ms
2026-01-17 04:38:17 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:17 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:17 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:17 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:18 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:18 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:18 [DEBUG]: Query executada em 233ms
2026-01-17 04:38:18 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:18 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:19 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:19 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:19 [DEBUG]: Query executada em 219ms
2026-01-17 04:38:19 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:20 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:20 [DEBUG]: Query executada em 220ms
2026-01-17 04:38:20 [DEBUG]: Query executada em 218ms
2026-01-17 04:38:43 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 04:38:45 [DEBUG]: Query executada em 1803ms
2026-01-17 04:38:45 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:45 [DEBUG]: Query executada em 227ms
2026-01-17 04:38:45 [DEBUG]: Query executada em 227ms
2026-01-17 04:38:46 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:46 [DEBUG]: Query executada em 224ms
2026-01-17 04:38:46 [DEBUG]: Query executada em 228ms
2026-01-17 04:38:46 [DEBUG]: Query executada em 225ms
2026-01-17 04:38:46 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:47 [DEBUG]: Query executada em 224ms
2026-01-17 04:38:47 [DEBUG]: Query executada em 226ms
2026-01-17 04:38:47 [DEBUG]: Query executada em 226ms
2026-01-17 04:38:47 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:48 [DEBUG]: Query executada em 221ms
2026-01-17 04:38:48 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:48 [DEBUG]: Query executada em 223ms
2026-01-17 04:38:48 [DEBUG]: Query executada em 225ms
2026-01-17 04:38:49 [DEBUG]: Query executada em 224ms
2026-01-17 04:38:49 [DEBUG]: Query executada em 222ms
2026-01-17 04:38:49 [DEBUG]: Query executada em 223ms
2026-01-17 04:58:28 [HTTP]: GET /api/responsaveis
2026-01-17 04:58:28 [HTTP]: GET /api/turmas
2026-01-17 04:58:28 [HTTP]: GET /api/financeiro/planos
2026-01-17 04:58:30 [DEBUG]: Query executada em 2277ms
2026-01-17 04:58:30 [HTTP]: GET /api/financeiro/planos
2026-01-17 04:58:30 [DEBUG]: Query executada em 2350ms
2026-01-17 04:58:30 [DEBUG]: Query executada em 2350ms
2026-01-17 04:58:30 [HTTP]: GET /api/responsaveis
2026-01-17 04:58:30 [DEBUG]: Query executada em 223ms
2026-01-17 04:58:30 [DEBUG]: Query executada em 229ms
2026-01-17 04:58:30 [DEBUG]: Query executada em 237ms
2026-01-17 04:58:31 [HTTP]: GET /api/turmas
2026-01-17 04:58:31 [DEBUG]: Query executada em 226ms
2026-01-17 04:58:31 [DEBUG]: Query executada em 228ms
2026-01-17 04:59:21 [HTTP]: POST /api/responsaveis
2026-01-17 04:59:23 [DEBUG]: Query executada em 1875ms
2026-01-17 04:59:23 [DEBUG]: Query executada em 235ms
2026-01-17 04:59:23 [INFO]: Responsável criado: Maria Iracema da conceição martins
2026-01-17 04:59:23 [DEBUG]: Query executada em 224ms
2026-01-17 05:00:03 [HTTP]: POST /api/alunos
2026-01-17 05:00:04 [DEBUG]: Query executada em 1866ms
2026-01-17 05:00:04 [ERROR]: Erro ao criar aluno CPF já cadastrado
Error: CPF já cadastrado
    at AlunoService.criar (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\services\alunoService.ts:11:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at criar (C:\Yuri\Meus Projetos\Escola\EscolaSistema\backend\src\controllers\alunoController.ts:9:21)
2026-01-17 05:00:29 [HTTP]: POST /api/alunos
2026-01-17 05:00:31 [DEBUG]: Query executada em 1901ms
2026-01-17 05:00:31 [DEBUG]: Query executada em 226ms
2026-01-17 05:00:31 [DEBUG]: Query executada em 230ms
2026-01-17 05:00:31 [INFO]: Aluno criado: Zoe Emanuele Rilder Toledo Martins
2026-01-17 05:00:31 [DEBUG]: Query executada em 230ms
2026-01-17 05:00:41 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 05:00:41 [DEBUG]: Query executada em 226ms
2026-01-17 05:00:42 [DEBUG]: Query executada em 226ms
2026-01-17 05:00:45 [INFO]: Matrícula realizada para aluno Zoe Emanuele Rilder Toledo Martins
2026-01-17 05:00:47 [DEBUG]: Query executada em 1856ms
2026-01-17 05:00:57 [HTTP]: POST /api/historico-escolar
2026-01-17 05:00:57 [DEBUG]: Query executada em 223ms
2026-01-17 05:00:57 [DEBUG]: Query executada em 225ms
2026-01-17 05:00:57 [DEBUG]: Query executada em 220ms
2026-01-17 05:00:58 [DEBUG]: Query executada em 231ms
2026-01-17 05:00:58 [DEBUG]: Query executada em 225ms
2026-01-17 05:00:58 [INFO]: Aluno b18fb2ad-dcc8-4247-9172-3d1570924d23 vinculado à turma ca219cc6-1575-4997-8949-9bd77b69c8d7 no ano letivo 2026
2026-01-17 05:00:58 [DEBUG]: Query executada em 225ms
2026-01-17 05:01:04 [HTTP]: GET /api/alunos
2026-01-17 05:01:04 [HTTP]: GET /api/responsaveis
2026-01-17 05:01:04 [HTTP]: GET /api/turmas
2026-01-17 05:01:04 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:04 [HTTP]: GET /api/alunos
2026-01-17 05:01:04 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:06 [DEBUG]: Query executada em 1843ms
2026-01-17 05:01:06 [DEBUG]: Query executada em 1862ms
2026-01-17 05:01:06 [HTTP]: GET /api/responsaveis
2026-01-17 05:01:06 [DEBUG]: Query executada em 220ms
2026-01-17 05:01:06 [HTTP]: GET /api/turmas
2026-01-17 05:01:06 [DEBUG]: Query executada em 224ms
2026-01-17 05:01:06 [DEBUG]: Query executada em 222ms
2026-01-17 05:01:06 [DEBUG]: Query executada em 220ms
2026-01-17 05:01:19 [HTTP]: GET /api/alunos/b18fb2ad-dcc8-4247-9172-3d1570924d23
2026-01-17 05:01:19 [HTTP]: GET /api/historico-escolar/aluno/b18fb2ad-dcc8-4247-9172-3d1570924d23
2026-01-17 05:01:21 [DEBUG]: Query executada em 1896ms
2026-01-17 05:01:21 [HTTP]: GET /api/alunos/b18fb2ad-dcc8-4247-9172-3d1570924d23
2026-01-17 05:01:21 [DEBUG]: Query executada em 1904ms
2026-01-17 05:01:22 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:22 [DEBUG]: Query executada em 230ms
2026-01-17 05:01:22 [DEBUG]: Query executada em 229ms
2026-01-17 05:01:22 [HTTP]: GET /api/historico-escolar/aluno/b18fb2ad-dcc8-4247-9172-3d1570924d23
2026-01-17 05:01:22 [DEBUG]: Query executada em 234ms
2026-01-17 05:01:22 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:22 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:26 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 05:01:26 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:26 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:26 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:27 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:27 [DEBUG]: Query executada em 225ms
2026-01-17 05:01:27 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:27 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:28 [DEBUG]: Query executada em 228ms
2026-01-17 05:01:28 [DEBUG]: Query executada em 228ms
2026-01-17 05:01:28 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:28 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:29 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:29 [DEBUG]: Query executada em 229ms
2026-01-17 05:01:29 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:29 [DEBUG]: Query executada em 228ms
2026-01-17 05:01:29 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:30 [DEBUG]: Query executada em 230ms
2026-01-17 05:01:30 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:30 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:30 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:30 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 05:01:31 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:31 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:31 [DEBUG]: Query executada em 225ms
2026-01-17 05:01:31 [DEBUG]: Query executada em 229ms
2026-01-17 05:01:31 [DEBUG]: Query executada em 229ms
2026-01-17 05:01:32 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:32 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:32 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:32 [DEBUG]: Query executada em 225ms
2026-01-17 05:01:33 [DEBUG]: Query executada em 228ms
2026-01-17 05:01:33 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:33 [DEBUG]: Query executada em 230ms
2026-01-17 05:01:33 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:34 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:34 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:34 [HTTP]: GET /api/responsaveis
2026-01-17 05:01:34 [HTTP]: GET /api/turmas
2026-01-17 05:01:34 [HTTP]: GET /api/financeiro/planos
2026-01-17 05:01:34 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:34 [DEBUG]: Query executada em 227ms
2026-01-17 05:01:34 [DEBUG]: Query executada em 226ms
2026-01-17 05:01:35 [DEBUG]: Query executada em 229ms
2026-01-17 05:01:35 [DEBUG]: Query executada em 225ms
2026-01-17 05:01:36 [DEBUG]: Query executada em 1802ms
2026-01-17 05:01:36 [DEBUG]: Query executada em 1802ms
2026-01-17 05:01:36 [HTTP]: GET /api/financeiro/planos
2026-01-17 05:01:36 [DEBUG]: Query executada em 1861ms
2026-01-17 05:01:36 [HTTP]: GET /api/responsaveis
2026-01-17 05:01:36 [DEBUG]: Query executada em 223ms
2026-01-17 05:01:36 [DEBUG]: Query executada em 221ms
2026-01-17 05:01:36 [HTTP]: GET /api/turmas
2026-01-17 05:01:36 [DEBUG]: Query executada em 223ms
2026-01-17 05:01:36 [DEBUG]: Query executada em 223ms
2026-01-17 05:01:36 [DEBUG]: Query executada em 226ms
2026-01-17 05:02:18 [HTTP]: POST /api/alunos
2026-01-17 05:02:19 [DEBUG]: Query executada em 1767ms
2026-01-17 05:02:20 [DEBUG]: Query executada em 220ms
2026-01-17 05:02:20 [DEBUG]: Query executada em 227ms
2026-01-17 05:02:20 [INFO]: Aluno criado: Aylla cristhine Rilder Toledo Martins
2026-01-17 05:02:20 [DEBUG]: Query executada em 221ms
2026-01-17 05:02:30 [HTTP]: POST /api/financeiro/matriculas
2026-01-17 05:02:30 [DEBUG]: Query executada em 218ms
2026-01-17 05:02:30 [DEBUG]: Query executada em 222ms
2026-01-17 05:02:34 [INFO]: Matrícula realizada para aluno Aylla cristhine Rilder Toledo Martins
2026-01-17 05:02:36 [DEBUG]: Query executada em 1814ms
2026-01-17 05:02:41 [HTTP]: POST /api/historico-escolar
2026-01-17 05:02:42 [DEBUG]: Query executada em 223ms
2026-01-17 05:02:42 [DEBUG]: Query executada em 224ms
2026-01-17 05:02:42 [DEBUG]: Query executada em 221ms
2026-01-17 05:02:42 [DEBUG]: Query executada em 253ms
2026-01-17 05:02:42 [DEBUG]: Query executada em 226ms
2026-01-17 05:02:42 [INFO]: Aluno 88c9bde4-edbf-4e0e-920d-e7641529d7b5 vinculado à turma ca219cc6-1575-4997-8949-9bd77b69c8d7 no ano letivo 2026
2026-01-17 05:02:43 [DEBUG]: Query executada em 222ms
2026-01-17 05:04:45 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 05:04:45 [HTTP]: GET /api/alunos
2026-01-17 05:04:45 [HTTP]: GET /api/financeiro/planos
2026-01-17 05:04:47 [DEBUG]: Query executada em 1874ms
2026-01-17 05:04:47 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 05:04:47 [DEBUG]: Query executada em 1947ms
2026-01-17 05:04:47 [DEBUG]: Query executada em 1950ms
2026-01-17 05:04:47 [HTTP]: GET /api/financeiro/planos
2026-01-17 05:04:47 [HTTP]: GET /api/alunos
2026-01-17 05:04:48 [DEBUG]: Query executada em 226ms
2026-01-17 05:04:48 [DEBUG]: Query executada em 231ms
2026-01-17 05:04:48 [DEBUG]: Query executada em 234ms
2026-01-17 05:06:03 [HTTP]: GET /api/financeiro/matriculas
2026-01-17 05:06:03 [HTTP]: GET /api/alunos
2026-01-17 05:06:03 [HTTP]: GET /api/financeiro/planos
2026-01-17 05:06:05 [DEBUG]: Query executada em 1777ms
2026-01-17 05:06:05 [DEBUG]: Query executada em 1829ms
2026-01-17 05:06:05 [DEBUG]: Query executada em 1799ms
2026-01-17 05:07:06 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 05:07:08 [DEBUG]: Query executada em 1960ms
2026-01-17 05:07:08 [HTTP]: GET /api/financeiro/mensalidades
2026-01-17 05:07:08 [DEBUG]: Query executada em 309ms
2026-01-17 05:07:37 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 05:07:37 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 05:07:37 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 05:07:37 [INFO]: Migrations executadas com sucesso!
2026-01-17 05:07:37 [INFO]: Migrations executadas com sucesso
2026-01-17 05:07:37 [INFO]: Servidor rodando na porta 3001
2026-01-17 05:07:37 [INFO]: Ambiente: development
2026-01-17 05:08:26 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 05:08:28 [DEBUG]: Query executada em 1842ms
2026-01-17 05:08:28 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:29 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:29 [DEBUG]: Query executada em 229ms
2026-01-17 05:08:29 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:29 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:30 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:30 [DEBUG]: Query executada em 232ms
2026-01-17 05:08:30 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:30 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:31 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:31 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:31 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:31 [DEBUG]: Query executada em 225ms
2026-01-17 05:08:31 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:32 [DEBUG]: Query executada em 225ms
2026-01-17 05:08:32 [DEBUG]: Query executada em 225ms
2026-01-17 05:08:32 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:32 [DEBUG]: Query executada em 225ms
2026-01-17 05:08:33 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:33 [HTTP]: GET /api/financeiro/dashboard
2026-01-17 05:08:33 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:33 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:33 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:33 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:34 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:34 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:34 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:34 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:35 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:35 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:35 [DEBUG]: Query executada em 228ms
2026-01-17 05:08:35 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:36 [DEBUG]: Query executada em 225ms
2026-01-17 05:08:36 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:36 [DEBUG]: Query executada em 230ms
2026-01-17 05:08:36 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:36 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:37 [DEBUG]: Query executada em 227ms
2026-01-17 05:08:37 [DEBUG]: Query executada em 226ms
2026-01-17 05:08:37 [DEBUG]: Query executada em 226ms
2026-01-17 05:09:15 [INFO]: Conexão com banco de dados PostgreSQL estabelecida
2026-01-17 05:09:15 [INFO]: Conexão com banco de dados estabelecida
2026-01-17 05:09:15 [INFO]: Iniciando migrations do banco de dados PostgreSQL...
2026-01-17 05:09:16 [INFO]: Migrations executadas com sucesso!
2026-01-17 05:09:16 [INFO]: Migrations executadas com sucesso
2026-01-17 05:09:16 [INFO]: Servidor rodando na porta 3001
2026-01-17 05:09:16 [INFO]: Ambiente: development
2026-01-17 05:11:05 [INFO]: Encerrando servidor...
